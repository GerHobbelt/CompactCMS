(function(d){var c=/^\s*|\s*$/g,e,b="B".replace(/A(.)|B/,"$1")==="$1";var a={majorVersion:"@@tinymce_major_version@@",minorVersion:"@@tinymce_minor_version@@",releaseDate:"@@tinymce_release_date@@",_init:function(){var s=this,q=document,m=navigator,g=m.userAgent,l,f,k,j,h,r;s.isOpera=d.opera&&opera.buildNumber;s.isWebKit=/WebKit/.test(g);s.isIE=!s.isWebKit&&!s.isOpera&&(/MSIE/gi).test(g)&&(/Explorer/gi).test(m.appName);s.isIE6=s.isIE&&/MSIE [56]/.test(g);s.isGecko=!s.isWebKit&&/Gecko/.test(g);s.isMac=g.indexOf("Mac")!=-1;s.isAir=/adobeair/i.test(g);s.isIDevice=/(iPad|iPhone)/.test(g);if(d.tinyMCEPreInit){s.suffix=tinyMCEPreInit.suffix;s.baseURL=tinyMCEPreInit.base;s.query=tinyMCEPreInit.query;return}s.suffix="";f=q.getElementsByTagName("base");for(l=0;l<f.length;l++){if(r=f[l].href){if(/^https?:\/\/[^\/]+$/.test(r)){r+="/"}j=r?r.match(/.*\//)[0]:""}}function o(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){s.suffix="_src"}if((h=i.src.indexOf("?"))!=-1){s.query=i.src.substring(h+1)}s.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(j&&s.baseURL.indexOf("://")==-1&&s.baseURL.indexOf("/")!==0){s.baseURL=j+s.baseURL}return s.baseURL}return null}f=q.getElementsByTagName("script");for(l=0;l<f.length;l++){if(o(f[l])){return}}k=q.getElementsByTagName("head")[0];if(k){f=k.getElementsByTagName("script");for(l=0;l<f.length;l++){if(o(f[l])){return}}}return},is:function(g,f){if(!f){return g!==e}if(f=="array"&&(g.hasOwnProperty&&g instanceof Array)){return true}return typeof(g)==f},each:function(i,f,h){var j,g;if(!i){return 0}h=h||i;if(i.length!==e){for(j=0,g=i.length;j<g;j++){if(f.call(h,i[j],j,i)===false){return 0}}}else{for(j in i){if(i.hasOwnProperty(j)){if(f.call(h,i[j],j,i)===false){return 0}}}}return 1},map:function(g,h){var i=[];a.each(g,function(f){i.push(h(f))});return i},grep:function(g,h){var i=[];a.each(g,function(f){if(!h||h(f)){i.push(f)}});return i},inArray:function(g,h){var j,f;if(g){for(j=0,f=g.length;j<f;j++){if(g[j]===h){return j}}}return -1},extend:function(k,j){var h,g,f=arguments;for(h=1,g=f.length;h<g;h++){j=f[h];a.each(j,function(i,l){if(i!==e){k[l]=i}})}return k},trim:function(f){return(f?""+f:"").replace(c,"")},create:function(n,g){var m=this,f,i,k,j,h,l=0;n=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(n);k=n[3].match(/(^|\.)(\w+)$/i)[2];i=m.createNS(n[3].replace(/\.\w+$/,""));if(i[k]){return}if(n[2]=="static"){i[k]=g;if(this.onCreate){this.onCreate(n[2],n[3],i[k])}return}if(!g[k]){g[k]=function(){};l=1}i[k]=g[k];m.extend(i[k].prototype,g);if(n[5]){f=m.resolve(n[5]).prototype;j=n[5].match(/\.(\w+)$/i)[1];h=i[k];if(l){i[k]=function(){return f[j].apply(this,arguments)}}else{i[k]=function(){this.parent=f[j];return h.apply(this,arguments)}}i[k].prototype[k]=i[k];m.each(f,function(o,p){i[k].prototype[p]=f[p]});m.each(g,function(o,p){if(f[p]){i[k].prototype[p]=function(){this.parent=f[p];return o.apply(this,arguments)}}else{if(p!=k){i[k].prototype[p]=o}}})}m.each(g["static"],function(o,p){i[k][p]=o});if(this.onCreate){this.onCreate(n[2],n[3],i[k].prototype)}},walk:function(i,h,j,g){g=g||this;if(i){if(j){i=i[j]}a.each(i,function(k,f){if(h.call(g,k,f,j)===false){return false}a.walk(k,h,j,g)})}},createNS:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0;g<j.length;g++){f=j[g];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0,f=j.length;g<f;g++){h=h[j[g]];if(!h){break}}return h},addUnload:function(j,i){var g=this;j={func:j,scope:i||this};if(!g.unloads){function h(){var f=g.unloads,l,m;if(f){for(m in f){l=f[m];if(l&&l.func){l.func.call(l.scope,1)}}if(d.detachEvent){d.detachEvent("onbeforeunload",k);d.detachEvent("onunload",h)}else{if(d.removeEventListener){d.removeEventListener("unload",h,false)}}g.unloads=l=f=w=h=0;if(d.CollectGarbage){CollectGarbage()}}}function k(){var l=document;if(l.readyState=="interactive"){function f(){l.detachEvent("onstop",f);if(h){h()}l=0}if(l){l.attachEvent("onstop",f)}d.setTimeout(function(){if(l){l.detachEvent("onstop",f)}},0)}}if(d.attachEvent){d.attachEvent("onunload",h);d.attachEvent("onbeforeunload",k)}else{if(d.addEventListener){d.addEventListener("unload",h,false)}}g.unloads=[j]}else{g.unloads.push(j)}return j},removeUnload:function(i){var g=this.unloads,h=null;a.each(g,function(j,f){if(j&&j.func==i){g.splice(f,1);h=i;return false}});return h},explode:function(f,g){return f?a.map(f.split(g||","),a.trim):f},_addVer:function(g){var f;if(!this.query){return g}f=(g.indexOf("?")==-1?"?":"&")+this.query;if(g.indexOf("#")==-1){return g+f}return g.replace("#",f+"#")},_replace:function(h,f,g){if(b){return g.replace(h,function(){var l=f,j=arguments,k;for(k=0;k<j.length-2;k++){if(j[k]===e){l=l.replace(new RegExp("\\$"+k,"g"),"")}else{l=l.replace(new RegExp("\\$"+k,"g"),j[k])}}return l})}return g.replace(h,f)}};a._init();d.tinymce=d.tinyMCE=a})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,h,d,c;e=tinymce.trim(e);g=f.settings=g||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^\w*:?\/\//.test(e)){e=(g.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(g.base_uri.path,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];if(k){k=k.replace(/\(mce_at\)/g,"@@")}f[b]=k});if(c=g.base_uri){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host=="mce_host"){f.port=c.port}if(!f.host||f.host=="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,d;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}d=c.toRelPath(c.path,b.path);if(b.query){d+="?"+b.query}if(b.anchor){d+="#"+b.anchor}return d},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f==1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length==0||f[c]=="."){continue}if(f[c]==".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!=0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();tinymce.create("static tinymce.util.JSON",{serialize:function(e){var c,a,d=tinymce.util.JSON.serialize,b;if(e==null){return"null"}b=typeof e;if(b=="string"){a="\bb\tt\nn\ff\rr\"\"''\\\\";return'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(g,f){c=a.indexOf(f);if(c+1){return"\\"+a.charAt(c+1)}g=f.charCodeAt().toString(16);return"\\u"+"0000".substring(g.length)+g})+'"'}if(b=="object"){if(e.hasOwnProperty&&e instanceof Array){for(c=0,a="[";c<e.length;c++){a+=(c>0?",":"")+d(e[c])}return a+"]"}a="{";for(c in e){a+=typeof e[c]!="function"?(a.length>1?',"':'"')+c+'":'+d(e[c]):""}return a+"}"}return""+e},parse:function(s){try{return eval("("+s+")")}catch(ex){}}});tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var b=tinymce.extend,c=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=b({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=b(this.settings,f);f.success=function(h,g){h=c.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){e.call(f.error_scope||f.scope,h,g)};f.data=c.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(l){var k=l.each,g=l.is,b=l.isWebKit,a=l.isIE,j=/^(H[1-6R]|P|DIV|ADDRESS|PRE|FORM|T(ABLE|BODY|HEAD|FOOT|H|R|D)|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)$/,c=d("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),e=d("src,href,style,coords,shape"),h={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},n=/[<>&\"]/g,i=/^([a-z0-9],?)+$/i,f=/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)(\s*\/?)>/g,m=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;function d(q){var p={},o;q=q.split(",");for(o=q.length;o>=0;o--){p[q[o]]=1}return p}l.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(u,q){var o=this,p;o.doc=u;o.win=window;o.files={};o.cssFlicker=false;o.counter=0;o.stdMode=u.documentMode>=8;o.boxModel=!l.isIE||u.compatMode=="CSS1Compat"||o.stdMode;o.settings=q=l.extend({keep_values:false,hex_colors:1,process_html:1},q);if(l.isIE6){try{u.execCommand("BackgroundImageCache",false,true)}catch(r){o.cssFlicker=true}}if(q.valid_styles){o._styles={};k(q.valid_styles,function(v,s){o._styles[s]=l.explode(v)})}l.addUnload(o.destroy,o)},getRoot:function(){var o=this,p=o.settings;return(p&&o.get(p.root_element))||o.doc.body},getViewPort:function(p){var q,o;p=!p?this.win:p;q=p.document;o=this.boxModel?q.documentElement:q.body;return{x:p.pageXOffset||o.scrollLeft,y:p.pageYOffset||o.scrollTop,w:p.innerWidth||o.clientWidth,h:p.innerHeight||o.clientHeight}},getRect:function(s){var r,o=this,q;s=o.get(s);r=o.getPos(s);q=o.getSize(s);return{x:r.x,y:r.y,w:q.w,h:q.h}},getSize:function(r){var p=this,o,q;r=p.get(r);o=p.getStyle(r,"width");q=p.getStyle(r,"height");if(o.indexOf("px")===-1){o=0}if(q.indexOf("px")===-1){q=0}return{w:parseInt(o)||r.offsetWidth||r.clientWidth,h:parseInt(q)||r.offsetHeight||r.clientHeight}},getParent:function(q,p,o){return this.getParents(q,p,o,false)},getParents:function(z,v,s,y){var q=this,p,u=q.settings,x=[];z=q.get(z);y=y===undefined;if(u.strict_root){s=s||q.getRoot()}if(g(v,"string")){p=v;if(v==="*"){v=function(o){return o.nodeType==1}}else{v=function(o){return q.is(o,p)}}}while(z){if(z==s||!z.nodeType||z.nodeType===9){break}if(!v||v(z)){if(y){x.push(z)}else{return z}}z=z.parentNode}return y?x:null},get:function(o){var p;if(o&&this.doc&&typeof(o)=="string"){p=o;o=this.doc.getElementById(o);if(o&&o.id!==p){return this.doc.getElementsByName(p)[1]}}return o},getNext:function(p,o){return this._findSib(p,o,"nextSibling")},getPrev:function(p,o){return this._findSib(p,o,"previousSibling")},select:function(q,p){var o=this;return l.dom.Sizzle(q,o.get(p)||o.get(o.settings.root_element)||o.doc,[])},is:function(q,o){var p;if(q.length===undefined){if(o==="*"){return q.nodeType==1}if(i.test(o)){o=o.toLowerCase().split(/,/);q=q.nodeName.toLowerCase();for(p=o.length-1;p>=0;p--){if(o[p]==q){return true}}return false}}return l.dom.Sizzle.matches(o,q.nodeType?[q]:q).length>0},add:function(s,v,o,r,u){var q=this;return this.run(s,function(z){var y,x;y=g(v,"string")?q.doc.createElement(v):v;q.setAttribs(y,o);if(r){if(r.nodeType){y.appendChild(r)}else{q.setHTML(y,r)}}return !u?z.appendChild(y):y})},create:function(q,o,p){return this.add(this.doc.createElement(q),q,o,p,1)},createHTML:function(v,p,s){var u="",r=this,q;u+="<"+v;for(q in p){if(p.hasOwnProperty(q)){u+=" "+q+'="'+r.encode(p[q])+'"'}}if(typeof(s)!="undefined"){return u+">"+s+"</"+v+">"}return u+" />"},remove:function(p,o){return this.run(p,function(r){var q,s;q=r.parentNode;if(!q){return null}if(o){while(s=r.firstChild){if(!l.isIE||s.nodeType!==3||s.nodeValue){q.insertBefore(s,r)}else{r.removeChild(s)}}}return q.removeChild(r)})},setStyle:function(r,o,p){var q=this;return q.run(r,function(x){var v,u;v=x.style;o=o.replace(/-(\D)/g,function(y,s){return s.toUpperCase()});if(q.pixelStyles.test(o)&&(l.is(p,"number")||/^[\-0-9\.]+$/.test(p))){p+="px"}switch(o){case"opacity":if(a){v.filter=p===""?"":"alpha(opacity="+(p*100)+")";if(!r.currentStyle||!r.currentStyle.hasLayout){v.display="inline-block"}}v[o]=v["-moz-opacity"]=v["-khtml-opacity"]=p||"";break;case"float":a?v.styleFloat=p:v.cssFloat=p;break;default:v[o]=p||""}if(q.settings.update_styles){q.setAttrib(x,"_mce_style")}})},getStyle:function(r,o,q){r=this.get(r);if(!r){return false}if(this.doc.defaultView&&q){o=o.replace(/[A-Z]/g,function(s){return"-"+s});try{return this.doc.defaultView.getComputedStyle(r,null).getPropertyValue(o)}catch(p){return null}}o=o.replace(/-(\D)/g,function(u,s){return s.toUpperCase()});if(o=="float"){o=a?"styleFloat":"cssFloat"}if(r.currentStyle&&q){return r.currentStyle[o]}return r.style[o]},setStyles:function(u,v){var q=this,r=q.settings,p;p=r.update_styles;r.update_styles=0;k(v,function(o,s){q.setStyle(u,s,o)});r.update_styles=p;if(r.update_styles){q.setAttrib(u,r.cssText)}},removeAllAttribs:function(o){return this.run(o,function(r){var p=r.attributes;for(var q=p.length-1;q>=0;q--){r.removeAttributeNode(p.item(q))}})},setAttrib:function(q,r,o){var p=this;if(!q||!r){return}if(p.settings.strict){r=r.toLowerCase()}return this.run(q,function(v){var u=p.settings;switch(r){case"style":if(!g(o,"string")){k(o,function(s,x){p.setStyle(v,x,s)});return}if(u.keep_values){if(o&&!p._isRes(o)){v.setAttribute("_mce_style",o,2)}else{v.removeAttribute("_mce_style",2)}}v.style.cssText=o;break;case"class":v.className=o||"";break;case"src":case"href":if(u.keep_values){if(u.url_converter){o=u.url_converter.call(u.url_converter_scope||p,o,r,v)}p.setAttrib(v,"_mce_"+r,o,2)}break;case"shape":v.setAttribute("_mce_style",o);break}if(g(o)&&o!==null&&o.length!==0){v.setAttribute(r,""+o,2)}else{v.removeAttribute(r,2)}})},setAttribs:function(q,r){var p=this;return this.run(q,function(o){k(r,function(s,u){p.setAttrib(o,u,s)})})},getAttrib:function(r,s,q){var o,p=this;r=p.get(r);if(!r||r.nodeType!==1){return false}if(!g(q)){q=""}if(/^(src|href|style|coords|shape)$/.test(s)){o=r.getAttribute("_mce_"+s);if(o){return o}}if(a&&p.props[s]){o=r[p.props[s]];o=o&&o.nodeValue?o.nodeValue:o}if(!o){o=r.getAttribute(s,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(s)){if(r[p.props[s]]===true&&o===""){return s}return o?s:""}if(r.nodeName==="FORM"&&r.getAttributeNode(s)){return r.getAttributeNode(s).nodeValue}if(s==="style"){o=o||r.style.cssText;if(o){o=p.serializeStyle(p.parseStyle(o),r.nodeName);if(p.settings.keep_values&&!p._isRes(o)){r.setAttribute("_mce_style",o)}}}if(b&&s==="class"&&o){o=o.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(a){switch(s){case"rowspan":case"colspan":if(o===1){o=""}break;case"size":if(o==="+0"||o===20||o===0){o=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(o===0){o=""}break;case"hspace":if(o===-1){o=""}break;case"maxlength":case"tabindex":if(o===32768||o===2147483647||o==="32768"){o=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(o===65535){return s}return q;case"shape":o=o.toLowerCase();break;default:if(s.indexOf("on")===0&&o){o=l._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+o)}}}return(o!==undefined&&o!==null&&o!=="")?""+o:q},getPos:function(A,s){var p=this,o=0,z=0,u,v=p.doc,q;A=p.get(A);s=s||v.body;if(A){if(a&&!p.stdMode){A=A.getBoundingClientRect();u=p.boxModel?v.documentElement:v.body;o=p.getStyle(p.select("html")[0],"borderWidth");o=(o=="medium"||p.boxModel&&!p.isIE6)&&2||o;return{x:A.left+u.scrollLeft-o,y:A.top+u.scrollTop-o}}q=A;while(q&&q!=s&&q.nodeType){o+=q.offsetLeft||0;z+=q.offsetTop||0;q=q.offsetParent}q=A.parentNode;while(q&&q!=s&&q.nodeType){o-=q.scrollLeft||0;z-=q.scrollTop||0;q=q.parentNode}}return{x:o,y:z}},parseStyle:function(q){var r=this,v=r.settings,y={};if(!q){return y}function x(E,B,D){var A,C,o,z;A=y[E+"-top"+B];if(!A){return}C=y[E+"-right"+B];if(A!=C){return}o=y[E+"-bottom"+B];if(C!=o){return}z=y[E+"-left"+B];if(o!=z){return}y[D]=z;delete y[E+"-top"+B];delete y[E+"-right"+B];delete y[E+"-bottom"+B];delete y[E+"-left"+B]}function p(s){var o,z=y[s];if(!z||z.indexOf(" ")<0){return}o=z.split(" ");if(k(o,function(A){return A===o[0]})){y[s]=o[0];return true}else{return false}}function u(z,s,o,B){var A;if(!p(s)){return}if(!p(o)){return}if(!p(B)){return}y[z]=y[s]+" "+y[o]+" "+y[B];delete y[s];delete y[o];delete y[B]}q=q.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");k(q.split(";"),function(s){var o,z=[];if(s){s=s.replace(/_MCE_SEMI_/g,";");s=s.replace(/url\([^\)]+\)/g,function(A){z.push(A);return"url("+z.length+")"});s=s.split(":");o=l.trim(s[1]);o=o.replace(/url\(([^\)]+)\)/g,function(B,A){return z[parseInt(A)-1]});o=o.replace(/rgb\([^\)]+\)/g,function(A){return r.toHex(A)});if(v.url_converter){o=o.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(A,B){return"url("+v.url_converter.call(v.url_converter_scope||r,r.decode(B),"style",null)+")"})}y[l.trim(s[0]).toLowerCase()]=o}});x("border","","border");x("border","-width","border-width");x("border","-color","border-color");x("border","-style","border-style");x("padding","","padding");x("margin","","margin");u("border","border-width","border-style","border-color");if(a){if(y.border=="medium none"){y.border=""}}return y},serializeStyle:function(v,p){var q=this,r="";function u(s,o){if(o&&s){if(o.indexOf("-")===0){return}switch(o){case"font-weight":if(s==700){s="bold"}break;case"color":case"background-color":s=s.toLowerCase();break}r+=(r?" ":"")+o+": "+s+";"}}if(p&&q._styles){k(q._styles["*"],function(o){u(v[o],o)});k(q._styles[p.toLowerCase()],function(o){u(v[o],o)})}else{k(v,u)}return r},loadCSS:function(o){var q=this,r=q.doc,p;if(!o){o=""}p=q.select("head")[0];k(o.split(","),function(s){var v;if(q.files[s]){return}q.files[s]=true;v=q.create("link",{rel:"stylesheet",href:l._addVer(s)});if(a&&r.documentMode&&r.recalc){v.onload=function(){r.recalc();v.onload=null}}p.appendChild(v)})},addClass:function(o,p){return this.run(o,function(q){var r;if(!p){return 0}if(this.hasClass(q,p)){return q.className}r=this.removeClass(q,p);return q.className=(r!=""?(r+" "):"")+p})},removeClass:function(q,r){var o=this,p;return o.run(q,function(u){var s;if(o.hasClass(u,r)){if(!p){p=new RegExp("(^|\\s+)"+r+"(\\s+|$)","g")}s=u.className.replace(p," ");s=l.trim(s!=" "?s:"");u.className=s;if(!s){u.removeAttribute("class");u.removeAttribute("className")}return s}return u.className})},hasClass:function(p,o){p=this.get(p);if(!p||!o){return false}return(" "+p.className+" ").indexOf(" "+o+" ")!==-1},show:function(o){return this.setStyle(o,"display","block")},hide:function(o){return this.setStyle(o,"display","none")},isHidden:function(o){o=this.get(o);return !o||o.style.display=="none"||this.getStyle(o,"display")=="none"},uniqueId:function(o){return(!o?"mce_":o)+(this.counter++)},setHTML:function(q,p){var o=this;return this.run(q,function(y){var r,u,s,A,v,r;p=o.processHTML(p);if(a){function z(){while(y.firstChild){y.firstChild.removeNode()}try{y.innerHTML="<br />"+p;y.removeChild(y.firstChild)}catch(x){r=o.create("div");r.innerHTML="<br />"+p;k(r.childNodes,function(C,B){if(B){y.appendChild(C)}})}}if(o.settings.fix_ie_paragraphs){p=p.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>')}z();if(o.settings.fix_ie_paragraphs){s=y.getElementsByTagName("p");for(u=s.length-1,r=0;u>=0;u--){A=s[u];if(!A.hasChildNodes()){if(!A._mce_keep){r=1;break}A.removeAttribute("_mce_keep")}}}if(r){p=p.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _mce_tmp="1">');p=p.replace(/<\/p>/gi,"</div>");z();if(o.settings.fix_ie_paragraphs){s=y.getElementsByTagName("DIV");for(u=s.length-1;u>=0;u--){A=s[u];if(A._mce_tmp){v=o.doc.createElement("p");A.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(B,x){var C;if(x!=="_mce_tmp"){C=A.getAttribute(x);if(!C&&x==="class"){C=A.className}v.setAttribute(x,C)}});for(r=0;r<A.childNodes.length;r++){v.appendChild(A.childNodes[r].cloneNode(true))}A.swapNode(v)}}}}}else{y.innerHTML=p}return p})},processHTML:function(u){var q=this,r=q.settings,p=[];if(!r.process_html){return u}if(a){u=u.replace(/&apos;/g,"&#39;");u=u.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")}u=l._replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>",u);if(r.keep_values){if(/<script|noscript|style/i.test(u)){function o(x){x=x.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n");x=x.replace(/^[\r\n]*|[\r\n]*$/g,"");x=x.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");x=x.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"");return x}u=u.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(s,y,x){if(!y){y=' type="text/javascript"'}y=y.replace(/src=\"([^\"]+)\"?/i,function(z,A){if(r.url_converter){A=q.encode(r.url_converter.call(r.url_converter_scope||q,q.decode(A),"src","script"))}return'_mce_src="'+A+'"'});if(l.trim(x)){p.push(o(x));x="<!--\nMCE_SCRIPT:"+(p.length-1)+"\n// -->"}return"<mce:script"+y+">"+x+"</mce:script>"});u=u.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(s,y,x){if(x){p.push(o(x));x="<!--\nMCE_SCRIPT:"+(p.length-1)+"\n-->"}return"<mce:style"+y+">"+x+"</mce:style><style "+y+' _mce_bogus="1">'+x+"</style>"});u=u.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(s,y,x){return"<mce:noscript"+y+"><!--"+q.encode(x).replace(/--/g,"&#45;&#45;")+"--></mce:noscript>"})}u=l._replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->",u);function v(s){return s.replace(f,function(z,A,y,x){return"<"+A+y.replace(m,function(C,B,F,E,D){var G;B=B.toLowerCase();F=F||E||D||"";if(c[B]){if(F==="false"||F==="0"){return}return B+'="'+B+'"'}if(e[B]&&y.indexOf("_mce_"+B)==-1){G=q.decode(F);if(r.url_converter&&(B=="src"||B=="href")){G=r.url_converter.call(r.url_converter_scope||q,G,B,A)}if(B=="style"){G=q.serializeStyle(q.parseStyle(G),B)}return B+'="'+F+'" _mce_'+B+'="'+q.encode(G)+'"'}return C})+x+">"})}u=v(u);u=u.replace(/MCE_SCRIPT:([0-9]+)/g,function(x,s){return p[s]})}return u},getOuterHTML:function(o){var p;o=this.get(o);if(!o){return null}if(o.outerHTML!==undefined){return o.outerHTML}p=(o.ownerDocument||this.doc).createElement("body");p.appendChild(o.cloneNode(true));return p.innerHTML},setOuterHTML:function(r,p,s){var o=this;function q(v,u,y){var z,x;x=y.createElement("body");x.innerHTML=u;z=x.lastChild;while(z){o.insertAfter(z.cloneNode(true),v);z=z.previousSibling}o.remove(v)}return this.run(r,function(v){v=o.get(v);if(v.nodeType==1){s=s||v.ownerDocument||o.doc;if(a){try{if(a&&v.nodeType==1){v.outerHTML=p}else{q(v,p,s)}}catch(u){q(v,p,s)}}else{q(v,p,s)}}})},decode:function(p){var q,r,o;if(/&[\w#]+;/.test(p)){q=this.doc.createElement("div");q.innerHTML=p;r=q.firstChild;o="";if(r){do{o+=r.nodeValue}while(r=r.nextSibling)}return o||p}return p},encode:function(o){return(""+o).replace(n,function(p){return h[p]})},insertAfter:function(o,p){p=this.get(p);return this.run(o,function(s){var r,q;r=p.parentNode;q=p.nextSibling;if(q){r.insertBefore(s,q)}else{r.appendChild(s)}return s})},isBlock:function(o){if(o.nodeType&&o.nodeType!==1){return false}o=o.nodeName||o;return j.test(o)},replace:function(s,r,p){var q=this;if(g(r,"array")){s=s.cloneNode(true)}return q.run(r,function(u){if(p){k(l.grep(u.childNodes),function(o){s.appendChild(o)})}return u.parentNode.replaceChild(s,u)})},rename:function(r,p){var q=this,o;if(r.nodeName!=p.toUpperCase()){o=q.create(p);k(q.getAttribs(r),function(s){q.setAttrib(o,s.nodeName,q.getAttrib(r,s.nodeName))});q.replace(o,r,1)}return o||r},findCommonAncestor:function(q,o){var r=q,p;while(r){p=o;while(p&&r!=p){p=p.parentNode}if(r==p){break}r=r.parentNode}if(!r&&q.ownerDocument){return q.ownerDocument.documentElement}return r},toHex:function(o){var q=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(o);function p(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}if(q){o="#"+p(q[1])+p(q[2])+p(q[3]);return o}return o},getClasses:function(){var s=this,o=[],r,u={},v=s.settings.class_filter,q;if(s.classes){return s.classes}function x(y){k(y.imports,function(z){x(z)});k(y.cssRules||y.rules,function(z){switch(z.type||1){case 1:if(z.selectorText){k(z.selectorText.split(","),function(A){A=A.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(A)||!/\.[\w\-]+$/.test(A)){return}q=A;A=l._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",A);if(v&&!(A=v(A,q))){return}if(!u[A]){o.push({"class":A});u[A]=1}})}break;case 3:x(z.styleSheet);break}})}try{k(s.doc.styleSheets,x)}catch(p){}if(o.length>0){s.classes=o}return o},run:function(u,r,q){var p=this,v;if(p.doc&&typeof(u)==="string"){u=p.get(u)}if(!u){return false}q=q||this;if(!u.nodeType&&(u.length||u.length===0)){v=[];k(u,function(s,o){if(s){if(typeof(s)=="string"){s=p.doc.getElementById(s)}v.push(r.call(q,s,o))}});return v}return r.call(q,u)},getAttribs:function(q){var p;q=this.get(q);if(!q){return[]}if(a){p=[];if(q.nodeName=="OBJECT"){return q.attributes}if(q.nodeName==="OPTION"&&this.getAttrib(q,"selected")){p.push({specified:1,nodeName:"selected"})}q.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(o){p.push({specified:1,nodeName:o})});return p}return q.attributes},destroy:function(p){var o=this;if(o.events){o.events.destroy()}o.win=o.doc=o.root=o.events=null;if(!p){l.removeUnload(o.destroy)}},createRng:function(){var o=this.doc;return o.createRange?o.createRange():new l.dom.Range(this)},nodeIndex:function(s,u){var o=0,r,q,p;if(s){for(r=s.nodeType,s=s.previousSibling,q=s;s;s=s.previousSibling){p=s.nodeType;if(u&&p==3){if(p==r||!s.nodeValue.length){continue}}o++;r=p}}return o},split:function(u,s,z){var y=this,o=y.createRng(),v,q,x;function p(B){var A,r=B.childNodes;if(B.nodeType==1&&B.getAttribute("_mce_type")=="bookmark"){return}for(A=r.length-1;A>=0;A--){p(r[A])}if(B.nodeType!=9){if(B.nodeType==3&&B.nodeValue.length>0){if(!y.isBlock(B.parentNode)||l.trim(B.nodeValue).length>0){return}}if(B.nodeType==1){r=B.childNodes;if(r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("_mce_type")=="bookmark"){B.parentNode.insertBefore(r[0],B)}if(r.length||/^(br|hr|input|img)$/i.test(B.nodeName)){return}}y.remove(B)}return B}if(u&&s){o.setStart(u.parentNode,y.nodeIndex(u));o.setEnd(s.parentNode,y.nodeIndex(s));v=o.extractContents();o=y.createRng();o.setStart(s.parentNode,y.nodeIndex(s)+1);o.setEnd(u.parentNode,y.nodeIndex(u)+1);q=o.extractContents();x=u.parentNode;x.insertBefore(p(v),u);if(z){x.replaceChild(z,s)}else{x.insertBefore(s,u)}x.insertBefore(p(q),u);y.remove(u);return z||s}},bind:function(s,o,r,q){var p=this;if(!p.events){p.events=new l.dom.EventUtils()}return p.events.add(s,o,r,q||this)},unbind:function(r,o,q){var p=this;if(!p.events){p.events=new l.dom.EventUtils()}return p.events.remove(r,o,q)},_findSib:function(r,o,p){var q=this,s=o;if(r){if(g(s,"string")){s=function(u){return q.is(u,o)}}for(r=r[p];r;r=r[p]){if(s(r)){return r}}}return null},_isRes:function(o){return/^(top|left|bottom|right|width|height)/i.test(o)||/;\s*(top|left|bottom|right|width|height)/i.test(o)}});l.DOM=new l.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var P=this,g=c.doc,T=0,F=1,k=2,D=true,R=false,U="startOffset",i="startContainer",Q="endContainer",C="endOffset",N=tinymce.extend,n=c.nodeIndex;N(P,{startContainer:g,startOffset:0,endContainer:g,endOffset:0,collapsed:D,commonAncestorContainer:g,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:H,setStartBefore:O,setStartAfter:s,setEndBefore:r,setEndAfter:I,collapse:B,selectNode:E,selectNodeContents:x,compareBoundaryPoints:G,deleteContents:o,extractContents:v,cloneContents:e,insertNode:A,surroundContents:L,cloneRange:J});function p(W,V){z(D,W,V)}function H(W,V){z(R,W,V)}function O(V){p(V.parentNode,n(V))}function s(V){p(V.parentNode,n(V)+1)}function r(V){H(V.parentNode,n(V))}function I(V){H(V.parentNode,n(V)+1)}function B(V){if(V){P[Q]=P[i];P[C]=P[U]}else{P[i]=P[Q];P[U]=P[C]}P.collapsed=D}function E(V){O(V);I(V)}function x(V){p(V,0);H(V,V.nodeType===1?V.childNodes.length:V.nodeValue.length)}function G(aa,W){var ac=P[i],X=P[U],ab=P[Q],V=P[C],Z=W.startContainer,ae=W.startOffset,Y=W.endContainer,ad=W.endOffset;if(aa===0){return u(ac,X,Z,ae)}if(aa===1){return u(ab,V,Z,ae)}if(aa===2){return u(ab,V,Y,ad)}if(aa===3){return u(ac,X,Y,ad)}}function o(){l(k)}function v(){return l(T)}function e(){return l(F)}function A(Z){var V=this[i],W=this[U],Y,X;if((V.nodeType===3||V.nodeType===4)&&V.nodeValue){if(!W){V.parentNode.insertBefore(Z,V)}else{if(W>=V.nodeValue.length){c.insertAfter(Z,V)}else{Y=V.splitText(W);V.parentNode.insertBefore(Z,Y)}}}else{if(V.childNodes.length>0){X=V.childNodes[W]}if(X){V.insertBefore(Z,X)}else{V.appendChild(Z)}}}function L(W){var V=P.extractContents();P.insertNode(W);W.appendChild(V);P.selectNode(W)}function J(){return N(new b(c),{startContainer:P[i],startOffset:P[U],endContainer:P[Q],endOffset:P[C],collapsed:P.collapsed,commonAncestorContainer:P.commonAncestorContainer})}function f(V,W){var X;if(V.nodeType==3){return V}if(W<0){return V}X=V.firstChild;while(X&&W>0){--W;X=X.nextSibling}if(X){return X}return V}function M(){return(P[i]==P[Q]&&P[U]==P[C])}function u(aa,W,Y,X){var ac,Z,V,ab,ad,ae;if(aa==Y){if(W==X){return 0}if(W<X){return -1}return 1}ac=Y;while(ac&&ac.parentNode!=aa){ac=ac.parentNode}if(ac){Z=0;V=aa.firstChild;while(V!=ac&&Z<W){Z++;V=V.nextSibling}if(W<=Z){return -1}return 1}ac=aa;while(ac&&ac.parentNode!=Y){ac=ac.parentNode}if(ac){Z=0;V=Y.firstChild;while(V!=ac&&Z<X){Z++;V=V.nextSibling}if(Z<X){return -1}return 1}ab=c.findCommonAncestor(aa,Y);ad=aa;while(ad&&ad.parentNode!=ab){ad=ad.parentNode}if(!ad){ad=ab}ae=Y;while(ae&&ae.parentNode!=ab){ae=ae.parentNode}if(!ae){ae=ab}if(ad==ae){return 0}V=ab.firstChild;while(V){if(V==ad){return -1}if(V==ae){return 1}V=V.nextSibling}}function z(W,Z,Y){var V,X;if(W){P[i]=Z;P[U]=Y}else{P[Q]=Z;P[C]=Y}V=P[Q];while(V.parentNode){V=V.parentNode}X=P[i];while(X.parentNode){X=X.parentNode}if(X==V){if(u(P[i],P[U],P[Q],P[C])>0){P.collapse(W)}}else{P.collapse(W)}P.collapsed=M();P.commonAncestorContainer=c.findCommonAncestor(P[i],P[Q])}function l(ac){var ab,Z=0,ae=0,W,X,aa,Y,V,ad;if(P[i]==P[Q]){return h(ac)}for(ab=P[Q],W=ab.parentNode;W;ab=W,W=W.parentNode){if(W==P[i]){return q(ab,ac)}++Z}for(ab=P[i],W=ab.parentNode;W;ab=W,W=W.parentNode){if(W==P[Q]){return S(ab,ac)}++ae}X=ae-Z;aa=P[i];while(X>0){aa=aa.parentNode;X--}Y=P[Q];while(X<0){Y=Y.parentNode;X++}for(V=aa.parentNode,ad=Y.parentNode;V!=ad;V=V.parentNode,ad=ad.parentNode){aa=V;Y=ad}return K(aa,Y,ac)}function h(aa){var ac,Z,Y,ab,V,X,W;if(aa!=k){ac=g.createDocumentFragment()}if(P[U]==P[C]){return ac}if(P[i].nodeType==3){Z=P[i].nodeValue;Y=Z.substring(P[U],P[C]);if(aa!=F){P[i].deleteData(P[U],P[C]-P[U]);P.collapse(D)}if(aa==k){return}ac.appendChild(g.createTextNode(Y));return ac}ab=f(P[i],P[U]);V=P[C]-P[U];while(V>0){X=ab.nextSibling;W=y(ab,aa);if(ac){ac.appendChild(W)}--V;ab=X}if(aa!=F){P.collapse(D)}return ac}function q(ac,Z){var ab,aa,V,W,Y,X;if(Z!=k){ab=g.createDocumentFragment()}aa=j(ac,Z);if(ab){ab.appendChild(aa)}V=n(ac);W=V-P[U];if(W<=0){if(Z!=F){P.setEndBefore(ac);P.collapse(R)}return ab}aa=ac.previousSibling;while(W>0){Y=aa.previousSibling;X=y(aa,Z);if(ab){ab.insertBefore(X,ab.firstChild)}--W;aa=Y}if(Z!=F){P.setEndBefore(ac);P.collapse(R)}return ab}function S(aa,Z){var ac,W,ab,V,Y,X;if(Z!=k){ac=g.createDocumentFragment()}ab=d(aa,Z);if(ac){ac.appendChild(ab)}W=n(aa);++W;V=P[C]-W;ab=aa.nextSibling;while(V>0){Y=ab.nextSibling;X=y(ab,Z);if(ac){ac.appendChild(X)}--V;ab=Y}if(Z!=F){P.setStartAfter(aa);P.collapse(D)}return ac}function K(Z,W,ad){var Y,af,ab,V,ac,X,ae,aa;if(ad!=k){af=g.createDocumentFragment()}Y=d(Z,ad);if(af){af.appendChild(Y)}ab=Z.parentNode;V=n(Z);ac=n(W);++V;X=ac-V;ae=Z.nextSibling;while(X>0){aa=ae.nextSibling;Y=y(ae,ad);if(af){af.appendChild(Y)}ae=aa;--X}Y=j(W,ad);if(af){af.appendChild(Y)}if(ad!=F){P.setStartAfter(Z);P.collapse(D)}return af}function j(aa,ab){var X=f(P[Q],P[C]-1),ac,ad,Z,V,W,Y=X!=P[Q];if(X==aa){return m(X,Y,R,ab)}ac=X.parentNode;ad=m(ac,R,R,ab);while(ac){while(X){Z=X.previousSibling;V=m(X,Y,R,ab);if(ab!=k){ad.insertBefore(V,ad.firstChild)}Y=D;X=Z}if(ac==aa){return ad}X=ac.previousSibling;ac=ac.parentNode;W=m(ac,R,R,ab);if(ab!=k){W.appendChild(ad)}ad=W}}function d(aa,ab){var Y=f(P[i],P[U]),Z=Y!=P[i],ac,ad,W,V,X;if(Y==aa){return m(Y,Z,D,ab)}ac=Y.parentNode;ad=m(ac,R,D,ab);while(ac){while(Y){W=Y.nextSibling;V=m(Y,Z,D,ab);if(ab!=k){ad.appendChild(V)}Z=D;Y=W}if(ac==aa){return ad}Y=ac.nextSibling;ac=ac.parentNode;X=m(ac,R,D,ab);if(ab!=k){X.appendChild(ad)}ad=X}}function m(W,Z,ad,ac){var V,Y,aa,X,ab;if(Z){return y(W,ac)}if(W.nodeType==3){V=W.nodeValue;if(ad){X=P[U];Y=V.substring(X);aa=V.substring(0,X)}else{X=P[C];Y=V.substring(0,X);aa=V.substring(X)}if(ac!=F){W.nodeValue=aa}if(ac==k){return}ab=W.cloneNode(R);ab.nodeValue=Y;return ab}if(ac==k){return}return W.cloneNode(R)}function y(W,V){if(V!=k){return V==F?W.cloneNode(D):W}W.parentNode.removeChild(W)}}a.Range=b})(tinymce.dom);(function(){function a(g){var i=this,j="\uFEFF",e,h,d=g.dom,c=true,f=false;function b(){var n=g.getRng(),k=d.createRng(),l,o;l=n.item?n.item(0):n.parentElement();if(l.ownerDocument!=d.doc){return k}if(n.item||!l.hasChildNodes()){k.setStart(l.parentNode,d.nodeIndex(l));k.setEnd(k.startContainer,k.startOffset+1);return k}o=g.isCollapsed();function m(r){var s,z,u,p,A=0,x,y,B,q,v;q=n.duplicate();q.collapse(r);s=d.create("a");B=q.parentElement();if(!B.hasChildNodes()){k[r?"setStart":"setEnd"](B,0);return}B.appendChild(s);q.moveToElementText(s);v=n.compareEndPoints(r?"StartToStart":"EndToEnd",q);if(v>0){k[r?"setStartAfter":"setEndAfter"](B);d.remove(s);return}p=tinymce.grep(B.childNodes);x=p.length-1;while(A<=x){y=Math.floor((A+x)/2);B.insertBefore(s,p[y]);q.moveToElementText(s);v=n.compareEndPoints(r?"StartToStart":"EndToEnd",q);if(v>0){A=y+1}else{if(v<0){x=y-1}else{found=true;break}}}z=v>0||y==0?s.nextSibling:s.previousSibling;if(z.nodeType==1){d.remove(s);u=d.nodeIndex(z);z=z.parentNode;if(!r||y>0){u++}}else{if(v>0||y==0){q.setEndPoint(r?"StartToStart":"EndToEnd",n);u=q.text.length}else{q.setEndPoint(r?"StartToStart":"EndToEnd",n);u=z.nodeValue.length-q.text.length}d.remove(s)}k[r?"setStart":"setEnd"](z,u)}m(true);if(!o){m()}return k}this.addRange=function(k){var p,m,n,l,u,s,v=g.dom.doc,o=v.body;function r(C){var A,B,z,y,x;z=d.create("a");A=C?n:u;B=C?l:s;y=p.duplicate();if(A==v){A=o;B=0}if(A.nodeType==3){A.parentNode.insertBefore(z,A);y.moveToElementText(z);y.moveStart("character",B);d.remove(z);p.setEndPoint(C?"StartToStart":"EndToEnd",y)}else{x=A.childNodes;if(x.length){if(B>=x.length){d.insertAfter(z,x[x.length-1])}else{A.insertBefore(z,x[B])}y.moveToElementText(z)}else{z=v.createTextNode(j);A.appendChild(z);y.moveToElementText(z.parentNode);y.collapse(c)}p.setEndPoint(C?"StartToStart":"EndToEnd",y);d.remove(z)}}this.destroy();n=k.startContainer;l=k.startOffset;u=k.endContainer;s=k.endOffset;p=o.createTextRange();if(n==u&&n.nodeType==1&&l==s-1){if(l==s-1){try{m=o.createControlRange();m.addElement(n.childNodes[l]);m.select();return}catch(q){}}}r(true);r();p.select()};this.getRangeAt=function(){if(!e||!tinymce.dom.RangeUtils.compareRanges(h,g.getRng())){e=b();h=g.getRng()}try{e.startContainer.nextSibling}catch(k){e=b();h=null}return e};this.destroy=function(){h=e=null}}tinymce.dom.TridentSelection=a})();(function(){var p=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f=0,j=Object.prototype.toString,o=false,g=true;[0,0].sort(function(){g=false;return 0});var l=function(y,e,B,C){B=B||[];e=e||document;var r=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!y||typeof y!=="string"){return B}var z=[],u,F,I,s,x=true,v=l.isXML(e),D=y,E,H,G,A;do{p.exec("");u=p.exec(D);if(u){D=u[3];z.push(u[1]);if(u[2]){s=u[3];break}}}while(u);if(z.length>1&&c.exec(y)){if(z.length===2&&b.relative[z[0]]){F=d(z[0]+z[1],e)}else{F=b.relative[z[0]]?[e]:l(z.shift(),e);while(z.length){y=z.shift();if(b.relative[y]){y+=z.shift()}F=d(y,F)}}}else{if(!C&&z.length>1&&e.nodeType===9&&!v&&b.match.ID.test(z[0])&&!b.match.ID.test(z[z.length-1])){E=l.find(z.shift(),e,v);e=E.expr?l.filter(E.expr,E.set)[0]:E.set[0]}if(e){E=C?{expr:z.pop(),set:a(C)}:l.find(z.pop(),z.length===1&&(z[0]==="~"||z[0]==="+")&&e.parentNode?e.parentNode:e,v);F=E.expr?l.filter(E.expr,E.set):E.set;if(z.length>0){I=a(F)}else{x=false}while(z.length){H=z.pop();G=H;if(!b.relative[H]){H=""}else{G=z.pop()}if(G==null){G=e}b.relative[H](I,G,v)}}else{I=z=[]}}if(!I){I=F}if(!I){l.error(H||y)}if(j.call(I)==="[object Array]"){if(!x){B.push.apply(B,I)}else{if(e&&e.nodeType===1){for(A=0;I[A]!=null;A++){if(I[A]&&(I[A]===true||I[A].nodeType===1&&l.contains(e,I[A]))){B.push(F[A])}}}else{for(A=0;I[A]!=null;A++){if(I[A]&&I[A].nodeType===1){B.push(F[A])}}}}}else{a(I,B)}if(s){l(s,r,B,C);l.uniqueSort(B)}return B};l.uniqueSort=function(r){if(i){o=g;r.sort(i);if(o){for(var e=1;e<r.length;e++){if(r[e]===r[e-1]){r.splice(e--,1)}}}}return r};l.matches=function(e,r){return l(e,null,null,r)};l.find=function(y,e,A){var z;if(!y){return[]}for(var u=0,s=b.order.length;u<s;u++){var x=b.order[u],v;if((v=b.leftMatch[x].exec(y))){var r=v[1];v.splice(1,1);if(r.substr(r.length-1)!=="\\"){v[1]=(v[1]||"").replace(/\\/g,"");z=b.find[x](v,e,A);if(z!=null){y=y.replace(b.match[x],"");break}}}}if(!z){z=e.getElementsByTagName("*")}return{set:z,expr:y}};l.filter=function(D,E,H,s){var e=D,C=[],y=E,v,A,x=E&&E[0]&&l.isXML(E[0]);while(D&&E.length){for(var B in b.filter){if((v=b.leftMatch[B].exec(D))!=null&&v[2]){var z=b.filter[B],I,G,r=v[1];A=false;v.splice(1,1);if(r.substr(r.length-1)==="\\"){continue}if(y===C){C=[]}if(b.preFilter[B]){v=b.preFilter[B](v,y,H,C,s,x);if(!v){A=I=true}else{if(v===true){continue}}}if(v){for(var u=0;(G=y[u])!=null;u++){if(G){I=z(G,v,u,y);var F=s^!!I;if(H&&I!=null){if(F){A=true}else{y[u]=false}}else{if(F){C.push(G);A=true}}}}}if(I!==undefined){if(!H){y=C}D=D.replace(b.match[B],"");if(!A){return[]}break}}}if(D===e){if(A==null){l.error(D)}else{break}}e=D}return y};l.error=function(e){throw"Syntax error, unrecognized expression: "+e};var b=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(y,s){var r=typeof s==="string",x=r&&!/\W/.test(s),z=r&&!x;if(x){s=s.toLowerCase()}for(var u=0,e=y.length,v;u<e;u++){if((v=y[u])){while((v=v.previousSibling)&&v.nodeType!==1){}y[u]=z||v&&v.nodeName.toLowerCase()===s?v||false:v===s}}if(z){l.filter(s,y,true)}},">":function(y,u){var s=typeof u==="string",x,v=0,e=y.length;if(s&&!/\W/.test(u)){u=u.toLowerCase();for(;v<e;v++){x=y[v];if(x){var r=x.parentNode;y[v]=r.nodeName.toLowerCase()===u?r:false}}}else{for(;v<e;v++){x=y[v];if(x){y[v]=s?x.parentNode:x.parentNode===u}}if(s){l.filter(u,y,true)}}},"":function(u,r,x){var s=f++,e=q,v;if(typeof r==="string"&&!/\W/.test(r)){r=r.toLowerCase();v=r;e=n}e("parentNode",r,s,u,v,x)},"~":function(u,r,x){var s=f++,e=q,v;if(typeof r==="string"&&!/\W/.test(r)){r=r.toLowerCase();v=r;e=n}e("previousSibling",r,s,u,v,x)}},find:{ID:function(r,s,u){if(typeof s.getElementById!=="undefined"&&!u){var e=s.getElementById(r[1]);return e?[e]:[]}},NAME:function(s,x){if(typeof x.getElementsByName!=="undefined"){var r=[],v=x.getElementsByName(s[1]);for(var u=0,e=v.length;u<e;u++){if(v[u].getAttribute("name")===s[1]){r.push(v[u])}}return r.length===0?null:r}},TAG:function(e,r){return r.getElementsByTagName(e[1])}},preFilter:{CLASS:function(s,e,r,y,x,z){s=" "+s[1].replace(/\\/g,"")+" ";if(z){return s}for(var u=0,v;(v=e[u])!=null;u++){if(v){if(x^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(s)>=0)){if(!r){y.push(v)}}else{if(r){e[u]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(r,e){return r[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var r=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(r[1]+(r[2]||1))-0;e[3]=r[3]-0}e[0]=f++;return e},ATTR:function(u,e,r,x,v,y){var s=u[1].replace(/\\/g,"");if(!y&&b.attrMap[s]){u[1]=b.attrMap[s]}if(u[2]==="~="){u[4]=" "+u[4]+" "}return u},PSEUDO:function(u,e,r,x,v){if(u[1]==="not"){if((p.exec(u[3])||"").length>1||/^\w/.test(u[3])){u[3]=l(u[3],null,null,e)}else{var s=l.filter(u[3],e,r,true^v);if(!r){x.push.apply(x,s)}return false}}else{if(b.match.POS.test(u[0])||b.match.CHILD.test(u[0])){return true}}return u},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(s,r,e){return !!l(e[3],s).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(r,e){return e===0},last:function(s,r,e,u){return r===u.length-1},even:function(r,e){return e%2===0},odd:function(r,e){return e%2===1},lt:function(s,r,e){return r<e[3]-0},gt:function(s,r,e){return r>e[3]-0},nth:function(s,r,e){return e[3]-0===r},eq:function(s,r,e){return e[3]-0===r}},filter:{PSEUDO:function(s,y,x,A){var e=y[1],z=b.filters[e];if(z){return z(s,x,y,A)}else{if(e==="contains"){return(s.textContent||s.innerText||l.getText([s])||"").indexOf(y[3])>=0}else{if(e==="not"){var r=y[3];for(var v=0,u=r.length;v<u;v++){if(r[v]===s){return false}}return true}else{l.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(r,s){var y=s[1],e=r;switch(y){case"only":case"first":while((e=e.previousSibling)){if(e.nodeType===1){return false}}if(y==="first"){return true}e=r;case"last":while((e=e.nextSibling)){if(e.nodeType===1){return false}}return true;case"nth":var u=s[2],A=s[3];if(u===1&&A===0){return true}var x=s[0],B=r.parentNode;if(B&&(B.sizcache!==x||!r.nodeIndex)){var v=0;for(e=B.firstChild;e;e=e.nextSibling){if(e.nodeType===1){e.nodeIndex=++v}}B.sizcache=x}var z=r.nodeIndex-A;if(u===0){return z===0}else{return(z%u===0&&z/u>=0)}}},ID:function(r,e){return r.nodeType===1&&r.getAttribute("id")===e},TAG:function(r,e){return(e==="*"&&r.nodeType===1)||r.nodeName.toLowerCase()===e},CLASS:function(r,e){return(" "+(r.className||r.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(v,s){var r=s[1],y=b.attrHandle[r]?b.attrHandle[r](v):v[r]!=null?v[r]:v.getAttribute(r),x=y+"",u=s[2],e=s[4];return y==null?u==="!=":u==="="?x===e:u==="*="?x.indexOf(e)>=0:u==="~="?(" "+x+" ").indexOf(e)>=0:!e?x&&y!==false:u==="!="?x!==e:u==="^="?x.indexOf(e)===0:u==="$="?x.substr(x.length-e.length)===e:u==="|="?x===e||x.substr(0,e.length+1)===e+"-":false},POS:function(v,s,u,x){var r=s[2],e=b.setFilters[r];if(e){return e(v,u,s,x)}}}};var c=b.match.POS,h=function(r,e){return"\\"+(e-0+1)};for(var m in b.match){b.match[m]=new RegExp(b.match[m].source+(/(?![^\[]*\])(?![^\(]*\))/.source));b.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+b.match[m].source.replace(/\\(\d+)/g,h))}var a=function(r,e){r=Array.prototype.slice.call(r,0);if(e){e.push.apply(e,r);return e}return r};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(k){a=function(v,u){var r=u||[],s=0;if(j.call(v)==="[object Array]"){Array.prototype.push.apply(r,v)}else{if(typeof v.length==="number"){for(var e=v.length;s<e;s++){r.push(v[s])}}else{for(;v[s];s++){r.push(v[s])}}}return r}}var i;if(document.documentElement.compareDocumentPosition){i=function(r,e){if(!r.compareDocumentPosition||!e.compareDocumentPosition){if(r==e){o=true}return r.compareDocumentPosition?-1:1}var s=r.compareDocumentPosition(e)&4?-1:r===e?0:1;if(s===0){o=true}return s}}else{if("sourceIndex" in document.documentElement){i=function(r,e){if(!r.sourceIndex||!e.sourceIndex){if(r==e){o=true}return r.sourceIndex?-1:1}var s=r.sourceIndex-e.sourceIndex;if(s===0){o=true}return s}}else{if(document.createRange){i=function(r,e){if(!r.ownerDocument||!e.ownerDocument){if(r==e){o=true}return r.ownerDocument?-1:1}var u=r.ownerDocument.createRange(),v=e.ownerDocument.createRange();u.setStart(r,0);u.setEnd(r,0);v.setStart(e,0);v.setEnd(e,0);var s=u.compareBoundaryPoints(Range.START_TO_END,v);if(s===0){o=true}return s}}}}l.getText=function(e){var r="",u;for(var s=0;e[s];s++){u=e[s];if(u.nodeType===3||u.nodeType===4){r+=u.nodeValue}else{if(u.nodeType!==8){r+=l.getText(u.childNodes)}}}return r};(function(){var r=document.createElement("div"),s="script"+(new Date()).getTime();r.innerHTML="<a name='"+s+"'/>";var e=document.documentElement;e.insertBefore(r,e.firstChild);if(document.getElementById(s)){b.find.ID=function(v,x,y){if(typeof x.getElementById!=="undefined"&&!y){var u=x.getElementById(v[1]);return u?u.id===v[1]||typeof u.getAttributeNode!=="undefined"&&u.getAttributeNode("id").nodeValue===v[1]?[u]:undefined:[]}};b.filter.ID=function(x,u){var v=typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id");return x.nodeType===1&&v&&v.nodeValue===u}}e.removeChild(r);e=r=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){b.find.TAG=function(r,x){var v=x.getElementsByTagName(r[1]);if(r[1]==="*"){var u=[];for(var s=0;v[s];s++){if(v[s].nodeType===1){u.push(v[s])}}v=u}return v}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){b.attrHandle.href=function(r){return r.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=l,s=document.createElement("div");s.innerHTML="<p class='TEST'></p>";if(s.querySelectorAll&&s.querySelectorAll(".TEST").length===0){return}l=function(y,x,u,v){x=x||document;if(!v&&x.nodeType===9&&!l.isXML(x)){try{return a(x.querySelectorAll(y),u)}catch(z){}}return e(y,x,u,v)};for(var r in e){l[r]=e[r]}s=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}b.order.splice(1,0,"CLASS");b.find.CLASS=function(r,s,u){if(typeof s.getElementsByClassName!=="undefined"&&!u){return s.getElementsByClassName(r[1])}};e=null})();function n(r,z,x,A,y,B){for(var u=0,s=A.length;u<s;u++){var e=A[u];if(e){e=e[r];var v=false;while(e){if(e.sizcache===x){v=A[e.sizset];break}if(e.nodeType===1&&!B){e.sizcache=x;e.sizset=u}if(e.nodeName.toLowerCase()===z){v=e;break}e=e[r]}A[u]=v}}}function q(r,z,x,A,y,B){for(var u=0,s=A.length;u<s;u++){var e=A[u];if(e){e=e[r];var v=false;while(e){if(e.sizcache===x){v=A[e.sizset];break}if(e.nodeType===1){if(!B){e.sizcache=x;e.sizset=u}if(typeof z!=="string"){if(e===z){v=true;break}}else{if(l.filter(z,[e]).length>0){v=e;break}}}e=e[r]}A[u]=v}}}l.contains=document.compareDocumentPosition?function(r,e){return !!(r.compareDocumentPosition(e)&16)}:function(r,e){return r!==e&&(r.contains?r.contains(e):true)};l.isXML=function(e){var r=(e?e.ownerDocument||e:0).documentElement;return r?r.nodeName!=="HTML":false};var d=function(e,y){var z=[],u="",v,s=y.nodeType?[y]:y;while((v=b.match.PSEUDO.exec(e))){u+=v[0];e=e.replace(b.match.PSEUDO,"")}e=b.relative[e]?e+"*":e;for(var x=0,r=s.length;x<r;x++){l(e,s[x],z)}return l.filter(u,z)};window.tinymce.dom.Sizzle=l})();(function(c){var f=c.each,e=c.DOM,d=c.isIE,a=c.isWebKit,b;c.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(m,p,l,j){var g,h=this,i=h.events,k;if(p instanceof Array){k=[];f(p,function(o){k.push(h.add(m,o,l,j))});return k}if(m&&m.hasOwnProperty&&m instanceof Array){k=[];f(m,function(n){n=e.get(n);k.push(h.add(n,p,l,j))});return k}m=e.get(m);if(!m){return}g=function(n){if(h.disabled){return}n=n||window.event;if(n&&d){if(!n.target){n.target=n.srcElement}c.extend(n,h._stoppers)}if(!j){return l(n)}return l.call(j,n)};if(p=="unload"){c.unloads.unshift({func:g});return g}if(p=="init"){if(h.domLoaded){g()}else{h.inits.push(g)}return g}i.push({obj:m,name:p,func:l,cfunc:g,scope:j});h._add(m,p,g);return l},remove:function(l,m,k){var h=this,g=h.events,i=false,j;if(l&&l.hasOwnProperty&&l instanceof Array){j=[];f(l,function(n){n=e.get(n);j.push(h.remove(n,m,k))});return j}l=e.get(l);f(g,function(o,n){if(o.obj==l&&o.name==m&&(!k||(o.func==k||o.cfunc==k))){g.splice(n,1);h._remove(l,m,o.cfunc);i=true;return false}});return i},clear:function(l){var j=this,g=j.events,h,k;if(l){l=e.get(l);for(h=g.length-1;h>=0;h--){k=g[h];if(k.obj===l){j._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null;g.splice(h,1)}}}},cancel:function(g){if(!g){return false}this.stop(g);return this.prevent(g)},stop:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return false},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false},destroy:function(){var g=this;f(g.events,function(j,h){g._remove(j.obj,j.name,j.cfunc);j.obj=j.cfunc=null});g.events=[];g=null},_add:function(h,i,g){if(h.attachEvent){h.attachEvent("on"+i,g)}else{if(h.addEventListener){h.addEventListener(i,g,false)}else{h["on"+i]=g}}},_remove:function(i,j,h){if(i){try{if(i.detachEvent){i.detachEvent("on"+j,h)}else{if(i.removeEventListener){i.removeEventListener(j,h,false)}else{i["on"+j]=null}}}catch(g){}}},_pageInit:function(h){var g=this;if(g.domLoaded){return}g.domLoaded=true;f(g.inits,function(i){i()});g.inits=[]},_wait:function(i){var g=this,h=i.document;if(i.tinyMCE_GZ&&tinyMCE_GZ.loaded){g.domLoaded=1;return}if(h.attachEvent){h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){h.detachEvent("onreadystatechange",arguments.callee);g._pageInit(i)}});if(h.documentElement.doScroll&&i==i.top){(function(){if(g.domLoaded){return}try{h.documentElement.doScroll("left")}catch(j){setTimeout(arguments.callee,0);return}g._pageInit(i)})()}}else{if(h.addEventListener){g._add(i,"DOMContentLoaded",function(){g._pageInit(i)})}}g._add(i,"load",function(){g._pageInit(i)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});b=c.dom.Event=new c.dom.EventUtils();b._wait(window);c.addUnload(function(){b.destroy()})})(tinymce);(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(a){function e(f){return f.replace(/[\n\r]+/g,"")}var c=a.is,b=a.isIE,d=a.each;a.create("tinymce.dom.Selection",{Selection:function(i,h,f){var g=this;g.dom=i;g.win=h;g.serializer=f;d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(j){g[j]=new a.util.Dispatcher(g)});if(!g.win.getSelection){g.tridentSel=new a.dom.TridentSelection(g)}if(a.isIE&&i.boxModel){this._fixIESelection()}a.addUnload(g.destroy,g)},getContent:function(g){var f=this,h=f.getRng(),l=f.dom.create("body"),j=f.getSel(),i,k,m;g=g||{};i=k="";g.get=true;g.format=g.format||"html";f.onBeforeGetContent.dispatch(f,g);if(g.format=="text"){return f.isCollapsed()?"":(h.text||(j.toString?j.toString():""))}if(h.cloneContents){m=h.cloneContents();if(m){l.appendChild(m)}}else{if(c(h.item)||c(h.htmlText)){l.innerHTML=h.item?h.item(0).outerHTML:h.htmlText}else{l.innerHTML=h.toString()}}if(/^\s/.test(l.innerHTML)){i=" "}if(/\s+$/.test(l.innerHTML)){k=" "}g.getInner=true;g.content=f.isCollapsed()?"":i+f.serializer.serialize(l,g)+k;f.onGetContent.dispatch(f,g);return g.content},setContent:function(j,i){var g=this,k=g.getRng(),n,l=g.win.document;i=i||{format:"html"};i.set=true;j=i.content=g.dom.processHTML(j);g.onBeforeSetContent.dispatch(g,i);j=i.content;if(k.insertNode){j+='<span id="__caret">_</span>';if(k.startContainer==l&&k.endContainer==l){l.body.innerHTML=j}else{k.deleteContents();if(l.body.childNodes.length==0){l.body.innerHTML=j}else{if(k.createContextualFragment){k.insertNode(k.createContextualFragment(j))}else{var m=l.createDocumentFragment(),f=l.createElement("div");m.appendChild(f);f.outerHTML=j;k.insertNode(m)}}}n=g.dom.get("__caret");k=l.createRange();k.setStartBefore(n);k.setEndBefore(n);g.setRng(k);g.dom.remove("__caret");g.setRng(k)}else{if(k.item){l.execCommand("Delete",false,null);k=g.getRng()}k.pasteHTML(j)}g.onSetContent.dispatch(g,i)},getStart:function(){var f=this.getRng(),g,i,j,h;if(f.duplicate||f.item){if(f.item){return f.item(0)}j=f.duplicate();j.collapse(1);g=j.parentElement();i=h=f.parentElement();while(h=h.parentNode){if(h==g){g=i;break}}return g}else{g=f.startContainer;if(g.nodeType==1&&g.hasChildNodes()){g=g.childNodes[Math.min(g.childNodes.length-1,f.startOffset)]}if(g&&g.nodeType==3){return g.parentNode}return g}},getEnd:function(){var g=this,h=g.getRng(),i,f;if(h.duplicate||h.item){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);i=h.parentElement();if(i&&i.nodeName=="BODY"){return i.lastChild||i}return i}else{i=h.endContainer;f=h.endOffset;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[f>0?f-1:f]}if(i&&i.nodeType==3){return i.parentNode}return i}},getBookmark:function(q,s){var u=this,n=u.dom,g,j,i,m,h,k,p,l="\uFEFF",r;function f(y,x){var v=0;d(n.select(y),function(A,z){if(A==x){v=z}});return v}if(q==2){function o(){var x=u.getRng(true),v=n.getRoot(),y={};function z(B,H){var D=B[H?"startContainer":"endContainer"],G=B[H?"startOffset":"endOffset"],A=[],C,F,E=0;if(D.nodeType==3){if(s){for(C=D.previousSibling;C&&C.nodeType==3;C=C.previousSibling){G+=C.nodeValue.length}}A.push(G)}else{F=D.childNodes;if(G>=F.length&&F.length){E=1;G=Math.max(0,F.length-1)}A.push(u.dom.nodeIndex(F[G],s)+E)}for(;D&&D!=v;D=D.parentNode){A.push(u.dom.nodeIndex(D,s))}return A}y.start=z(x,true);if(!u.isCollapsed()){y.end=z(x)}return y}return o()}if(q){return{rng:u.getRng()}}g=u.getRng();i=n.uniqueId();m=tinyMCE.activeEditor.selection.isCollapsed();r="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!g.item){j=g.duplicate();g.collapse();g.pasteHTML('<span _mce_type="bookmark" id="'+i+'_start" style="'+r+'">'+l+"</span>");if(!m){j.collapse(false);j.pasteHTML('<span _mce_type="bookmark" id="'+i+'_end" style="'+r+'">'+l+"</span>")}}else{k=g.item(0);h=k.nodeName;return{name:h,index:f(h,k)}}}else{k=u.getNode();h=k.nodeName;if(h=="IMG"){return{name:h,index:f(h,k)}}j=g.cloneRange();if(!m){j.collapse(false);j.insertNode(n.create("span",{_mce_type:"bookmark",id:i+"_end",style:r},l))}g.collapse(true);g.insertNode(n.create("span",{_mce_type:"bookmark",id:i+"_start",style:r},l))}u.moveToBookmark({id:i,keep:1});return{id:i}},moveToBookmark:function(n){var s=this,l=s.dom,j,i,f,r,m,q,g,p;if(s.tridentSel){s.tridentSel.destroy()}if(n){if(n.start){f=l.createRng();r=l.getRoot();function o(A){var u=n[A?"start":"end"],x,y,z,v;if(u){for(y=r,x=u.length-1;x>=1;x--){v=y.childNodes;if(v.length){y=v[u[x]]}}if(A){f.setStart(y,u[0])}else{f.setEnd(y,u[0])}}}o(true);o();s.setRng(f)}else{if(n.id){function k(B){var A=l.get(n.id+"_"+B),z,u,x,y,v=n.keep;if(A){z=A.parentNode;if(B=="start"){if(!v){u=l.nodeIndex(A)}else{z=A.firstChild;u=1}m=q=z;g=p=u}else{if(!v){u=l.nodeIndex(A)}else{z=A.firstChild;u=1}q=z;p=u}if(!v){y=A.previousSibling;x=A.nextSibling;d(a.grep(A.childNodes),function(C){if(C.nodeType==3){C.nodeValue=C.nodeValue.replace(/\uFEFF/g,"")}});while(A=l.get(n.id+"_"+B)){l.remove(A,1)}if(y&&x&&y.nodeType==x.nodeType&&y.nodeType==3&&!a.isOpera){u=y.nodeValue.length;y.appendData(x.nodeValue);l.remove(x);if(B=="start"){m=q=y;g=p=u}else{q=y;p=u}}}}}function h(u){if(!b&&l.isBlock(u)&&!u.innerHTML){u.innerHTML='<br _mce_bogus="1" />'}return u}k("start");k("end");if(m){f=l.createRng();f.setStart(h(m),g);f.setEnd(h(q),p);s.setRng(f)}}else{if(n.name){s.select(l.select(n.name)[n.index])}else{if(n.rng){s.setRng(n.rng)}}}}}},moveAfterNode:function(g){var f=this.dom.createRng();f.setStartAfter(g);f.setEndAfter(g);this.setRng(f)},select:function(k,j){var i=this,l=i.dom,g=l.createRng(),f;f=l.nodeIndex(k);g.setStart(k.parentNode,f);g.setEnd(k.parentNode,f+1);if(j){function h(m,o){var n=new a.dom.TreeWalker(m,m);do{if(m.nodeType==3&&a.trim(m.nodeValue).length!=0){if(o){g.setStart(m,0)}else{g.setEnd(m,m.nodeValue.length)}return}if(m.nodeName=="BR"){if(o){g.setStartBefore(m)}else{g.setEndBefore(m)}return}}while(m=(o?n.next():n.prev()))}h(k,1);h(k)}i.setRng(g);return k},isCollapsed:function(){var f=this,h=f.getRng(),g=f.getSel();if(!h||h.item){return false}if(h.compareEndPoints){return h.compareEndPoints("StartToEnd",h)===0}return !g||h.collapsed},collapse:function(f){var g=this,h=g.getRng(),i;if(h.item){i=h.item(0);h=this.win.document.body.createTextRange();h.moveToElementText(i)}h.collapse(!!f);g.setRng(h)},getSel:function(){var g=this,f=this.win;return f.getSelection?f.getSelection():f.document.selection},getRng:function(l){var g=this,h,i,k,j=g.win.document;if(l&&g.tridentSel){return g.tridentSel.getRangeAt(0)}try{if(h=g.getSel()){i=h.rangeCount>0?h.getRangeAt(0):(h.createRange?h.createRange():j.createRange())}}catch(f){}if(a.isIE&&i.setStart&&j.selection.createRange().item){k=j.selection.createRange().item(0);i=j.createRange();i.setStartBefore(k);i.setEndAfter(k)}if(!i){i=j.createRange?j.createRange():j.body.createTextRange()}if(g.selectedRange&&g.explicitRange){if(i.compareBoundaryPoints(i.START_TO_START,g.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,g.selectedRange)===0){i=g.explicitRange}else{g.selectedRange=null;g.explicitRange=null}}return i},setRng:function(i){var h,g=this;if(!g.tridentSel){h=g.getSel();if(h){g.explicitRange=i;h.removeAllRanges();h.addRange(i);g.selectedRange=h.getRangeAt(0)}}else{if(i.cloneRange){g.tridentSel.addRange(i);return}try{i.select()}catch(f){}}},setNode:function(g){var f=this;f.setContent(f.dom.getOuterHTML(g));return g},getNode:function(){var h=this,g=h.getRng(),i=h.getSel(),l,k=g.startContainer,f=g.endContainer;if(g.setStart){if(!g){return h.dom.getRoot()}l=g.commonAncestorContainer;if(!g.collapsed){if(g.startContainer==g.endContainer){if(g.startOffset-g.endOffset<2){if(g.startContainer.hasChildNodes()){l=g.startContainer.childNodes[g.startOffset]}}}if(a.isWebKit&&i.anchorNode&&i.anchorNode.nodeType==1){return i.anchorNode.childNodes[i.anchorOffset]}if(k.nodeType===3&&f.nodeType===3){function j(p,m){var o=p;while(p&&p.nodeType===3&&p.length===0){p=m?p.nextSibling:p.previousSibling}return p||o}if(k.length===g.startOffset){k=j(k.nextSibling,true)}else{k=k.parentNode}if(g.endOffset===0){f=j(f.previousSibling,false)}else{f=f.parentNode}if(k&&k===f){return k}}}if(l&&l.nodeType==3){return l.parentNode}return l}return g.item?g.item(0):g.parentElement()},getSelectedBlocks:function(g,f){var i=this,j=i.dom,m,h,l,k=[];m=j.getParent(g||i.getStart(),j.isBlock);h=j.getParent(f||i.getEnd(),j.isBlock);if(m){k.push(m)}if(m&&h&&m!=h){l=m;while((l=l.nextSibling)&&l!=h){if(j.isBlock(l)){k.push(l)}}}if(h&&m!=h){k.push(h)}return k},destroy:function(g){var f=this;f.win=null;if(f.tridentSel){f.tridentSel.destroy()}if(!g){a.removeUnload(f.destroy)}},_fixIESelection:function(){var m=this.dom,l=m.doc,f=l.body,i,h;l.documentElement.unselectable=true;function k(n,q){var o=f.createTextRange();try{o.moveToPoint(n,q)}catch(p){o=null}return o}function g(o){var n;if(o.button){n=k(o.x,o.y);if(n){if(n.compareEndPoints("StartToStart",h)>0){n.setEndPoint("StartToStart",h)}else{n.setEndPoint("EndToEnd",h)}n.select()}}else{j()}}function j(){m.unbind(l,"mouseup",j);m.unbind(l,"mousemove",g);i=0}m.bind(l,"mousedown",function(n){if(n.target.nodeName==="HTML"){if(i){j()}i=1;h=k(n.x,n.y);if(h){m.bind(l,"mouseup",j);m.bind(l,"mousemove",g);m.win.focus();h.select()}}})}})})(tinymce);(function(a){a.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(c){function b(){var e=document.implementation;if(!e||!e.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(d){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(d){}}else{return e.createDocument("","",null)}}this.doc=b();this.valid=a.isOpera||a.isWebKit;this.reset()},reset:function(){var b=this,c=b.doc;if(c.firstChild){c.removeChild(c.firstChild)}b.node=c.appendChild(c.createElement("html"))},writeStartElement:function(c){var b=this;b.node=b.node.appendChild(b.doc.createElement(c))},writeAttribute:function(c,b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.setAttribute(c,b)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var b=this,c=b.node;c.appendChild(b.doc.createTextNode(""));b.node=c.parentNode},writeText:function(b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.appendChild(this.doc.createTextNode(b))},writeCDATA:function(b){this.node.appendChild(this.doc.createCDATASection(b))},writeComment:function(b){if(a.isIE){b=b.replace(/^\-|\-$/g," ")}this.node.appendChild(this.doc.createComment(b.replace(/\-\-/g," ")))},getContent:function(){var b;b=this.doc.xml||new XMLSerializer().serializeToString(this.doc);b=b.replace(/<\?[^?]+\?>|<html[^>]*>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");b=b.replace(/ ?\/>/g," />");if(this.valid){b=b.replace(/\%MCGT%/g,"&gt;")}return b}})})(tinymce);(function(a){var d=/[&\"<>]/g,b=/[<>&]/g,c={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};a.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(e){this.settings=a.extend({indent_char:" ",indentation:0},e);this.reset()},reset:function(){this.indent="";this.str="";this.tags=[];this.count=0},writeStartElement:function(e){this._writeAttributesEnd();this.writeRaw("<"+e);this.tags.push(e);this.inAttr=true;this.count++;this.elementCount=this.count;this.attrs={}},writeAttribute:function(g,e){var f=this;if(!f.attrs[g]){f.writeRaw(" "+f.encode(g,true)+'="'+f.encode(e,true)+'"');f.attrs[g]=e}},writeEndElement:function(){var e;if(this.tags.length>0){e=this.tags.pop();if(this._writeAttributesEnd(1)){this.writeRaw("</"+e+">")}if(this.settings.indentation>0){this.writeRaw("\n")}}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");if(this.settings.indentation>0){this.writeRaw("\n")}}},writeText:function(e){this._writeAttributesEnd();this.writeRaw(this.encode(e));this.count++},writeCDATA:function(e){this._writeAttributesEnd();this.writeRaw("<![CDATA["+e+"]]>");this.count++},writeComment:function(e){this._writeAttributesEnd();this.writeRaw("<!--"+e+"-->");this.count++},writeRaw:function(e){this.str+=e},encode:function(f,e){return f.replace(e?d:b,function(g){return c[g]})},getContent:function(){return this.str},_writeAttributesEnd:function(e){if(!this.inAttr){return}this.inAttr=false;if(e&&this.elementCount==this.count){this.writeRaw(" />");return false}this.writeRaw(">");return true}})})(tinymce);(function(c){var g=c.extend,f=c.each,b=c.util.Dispatcher,e=c.isIE,a=c.isGecko;function d(h){return h.replace(/([?+*])/g,".$1")}c.create("tinymce.dom.Serializer",{Serializer:function(j){var i=this;i.key=0;i.onPreProcess=new b(i);i.onPostProcess=new b(i);try{i.writer=new c.dom.XMLWriter()}catch(h){i.writer=new c.dom.StringWriter()}if(c.isIE&&document.documentMode>8){i.writer=new c.dom.StringWriter()}i.settings=j=g({dom:c.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(_mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",valid_elements:"*[*]",extended_valid_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},j);i.dom=j.dom;i.schema=j.schema;if(j.entity_encoding=="named"&&!j.entities){j.entity_encoding="raw"}if(j.remove_redundant_brs){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(n,m,o){if(/^<br \/>\s*<\//.test(n)){return"</"+o+">"}return n})})}if(j.element_format=="html"){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/<([^>]+) \/>/g,"<$1>")})}if(j.fix_list_elements){i.onPreProcess.add(function(v,q){var l,z,A=["ol","ul"],u,s,m,k=/^(OL|UL)$/,B;function y(r,x){var o=x.split(","),p;while((r=r.previousSibling)!=null){for(p=0;p<o.length;p++){if(r.nodeName==o[p]){return r}}}return null}for(z=0;z<A.length;z++){l=i.dom.select(A[z],q.node);for(u=0;u<l.length;u++){s=l[u];m=s.parentNode;if(k.test(m.nodeName)){B=y(s,"LI");if(!B){B=i.dom.create("li");B.innerHTML="&nbsp;";B.appendChild(s);m.insertBefore(B,m.firstChild)}else{B.appendChild(s)}}}}})}if(j.fix_table_elements){i.onPreProcess.add(function(k,l){if(!c.isOpera||opera.buildNumber()>=1767){f(i.dom.select("p table",l.node).reverse(),function(p){var m=i.dom.getParent(p.parentNode,"table,p");if(m.nodeName!="TABLE"){try{i.dom.split(m,p)}catch(o){}}})}})}},setEntities:function(o){var n=this,j,m,h={},k;if(n.entityLookup){return}j=o.split(",");for(m=0;m<j.length;m+=2){k=j[m];if(k==34||k==38||k==60||k==62){continue}h[String.fromCharCode(j[m])]=j[m+1];k=parseInt(j[m]).toString(16)}n.entityLookup=h},setRules:function(i){var h=this;h._setup();h.rules={};h.wildRules=[];h.validElements={};return h.addRules(i)},addRules:function(i){var h=this,j;if(!i){return}h._setup();f(i.split(","),function(m){var q=m.split(/\[|\]/),l=q[0].split("/"),r,k,o,n=[];if(j){k=c.extend([],j.attribs)}if(q.length>1){f(q[1].split("|"),function(v){var p={},u;k=k||[];v=v.replace(/::/g,"~");v=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(v);v[2]=v[2].replace(/~/g,":");if(v[1]=="!"){r=r||[];r.push(v[2])}if(v[1]=="-"){for(u=0;u<k.length;u++){if(k[u].name==v[2]){k.splice(u,1);return}}}switch(v[3]){case"=":p.defaultVal=v[4]||"";break;case":":p.forcedVal=v[4];break;case"<":p.validVals=v[4].split("?");break}if(/[*.?]/.test(v[2])){o=o||[];p.nameRE=new RegExp("^"+d(v[2])+"$");o.push(p)}else{p.name=v[2];k.push(p)}n.push(v[2])})}f(l,function(y,v){var z=y.charAt(0),u=1,p={};if(j){if(j.noEmpty){p.noEmpty=j.noEmpty}if(j.fullEnd){p.fullEnd=j.fullEnd}if(j.padd){p.padd=j.padd}}switch(z){case"-":p.noEmpty=true;break;case"+":p.fullEnd=true;break;case"#":p.padd=true;break;default:u=0}l[v]=y=y.substring(u);h.validElements[y]=1;if(/[*.?]/.test(l[0])){p.nameRE=new RegExp("^"+d(l[0])+"$");h.wildRules=h.wildRules||{};h.wildRules.push(p)}else{p.name=l[0];if(l[0]=="@"){j=p}h.rules[y]=p}p.attribs=k;if(r){p.requiredAttribs=r}if(o){y="";f(n,function(s){if(y){y+="|"}y+="("+d(s)+")"});p.validAttribsRE=new RegExp("^"+y.toLowerCase()+"$");p.wildAttribs=o}})});i="";f(h.validElements,function(m,l){if(i){i+="|"}if(l!="@"){i+=l}});h.validElementsRE=new RegExp("^("+d(i.toLowerCase())+")$")},findRule:function(m){var j=this,l=j.rules,h,k;j._setup();k=l[m];if(k){return k}l=j.wildRules;for(h=0;h<l.length;h++){if(l[h].nameRE.test(m)){return l[h]}}return null},findAttribRule:function(h,l){var j,k=h.wildAttribs;for(j=0;j<k.length;j++){if(k[j].nameRE.test(l)){return k[j]}}return null},serialize:function(r,q){var l,j=this,p,m,i,k;j._setup();q=q||{};q.format=q.format||"html";j.processObj=q;if(e){k=[];f(r.getElementsByTagName("option"),function(o){var h=j.dom.getAttrib(o,"selected");k.push(h?h:null)})}r=r.cloneNode(true);if(e){f(r.getElementsByTagName("option"),function(o,h){j.dom.setAttrib(o,"selected",k[h])})}i=r.ownerDocument.implementation;if(i.createHTMLDocument&&(c.isOpera&&opera.buildNumber()>=1767)){p=i.createHTMLDocument("");f(r.nodeName=="BODY"?r.childNodes:[r],function(h){p.body.appendChild(p.importNode(h,true))});if(r.nodeName!="BODY"){r=p.body.firstChild}else{r=p.body}m=j.dom.doc;j.dom.doc=p}j.key=""+(parseInt(j.key)+1);if(!q.no_events){q.node=r;j.onPreProcess.dispatch(j,q)}j.writer.reset();j._info=q;j._serializeNode(r,q.getInner);q.content=j.writer.getContent();if(m){j.dom.doc=m}if(!q.no_events){j.onPostProcess.dispatch(j,q)}j._postProcess(q);q.node=null;return c.trim(q.content)},_postProcess:function(n){var i=this,k=i.settings,j=n.content,m=[],l;if(n.format=="html"){l=i._protect({content:j,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]});j=l.content;if(k.entity_encoding!=="raw"){j=i._encode(j)}if(!n.set){j=c._replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,k.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>",j);if(k.remove_linebreaks){j=j.replace(/\r?\n|\r/g," ");j=c._replace(/(<[^>]+>)\s+/g,"$1 ",j);j=c._replace(/\s+(<\/[^>]+>)/g," $1",j);j=c._replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>",j);j=c._replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>",j);j=c._replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>",j)}if(k.apply_source_formatting&&k.indent_mode=="simple"){j=c._replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n",j);j=c._replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>",j);j=c._replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n",j);j=j.replace(/\n\n/g,"\n")}}j=i._unprotect(j,l);j=c._replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>",j);if(k.entity_encoding=="raw"){j=c._replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>",j)}j=j.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(h,p,o){return"<noscript"+p+">"+i.dom.decode(o.replace(/<!--|-->/g,""))+"</noscript>"})}n.content=j},_serializeNode:function(E,J){var A=this,C=A.settings,y=A.writer,p,h,r,G,F,I,B,j,z,k,q,D,o,x,H,m,u;if(!C.node_filter||C.node_filter(E)){switch(E.nodeType){case 1:if(E.hasAttribute?E.hasAttribute("_mce_bogus"):E.getAttribute("_mce_bogus")){return}o=H=false;p=E.hasChildNodes();k=E.getAttribute("_mce_name")||E.nodeName.toLowerCase();m=E.getAttribute("_mce_type");if(m){if(!A._info.cleanup){o=true;return}else{H=1}}if(e){u=E.scopeName;if(u&&u!=="HTML"&&u!=="html"){k=u+":"+k}}if(k.indexOf("mce:")===0){k=k.substring(4)}if(!H){if(!A.validElementsRE||!A.validElementsRE.test(k)||(A.invalidElementsRE&&A.invalidElementsRE.test(k))||J){o=true;break}}if(e){if(C.fix_content_duplication){if(E._mce_serialized==A.key){return}E._mce_serialized=A.key}if(k.charAt(0)=="/"){k=k.substring(1)}}else{if(a){if(E.nodeName==="BR"&&E.getAttribute("type")=="_moz"){return}}}if(C.validate_children){if(A.elementName&&!A.schema.isValid(A.elementName,k)){o=true;break}A.elementName=k}q=A.findRule(k);if(!q){o=true;break}k=q.name||k;x=C.closed.test(k);if((!p&&q.noEmpty)||(e&&!k)){o=true;break}if(q.requiredAttribs){I=q.requiredAttribs;for(G=I.length-1;G>=0;G--){if(this.dom.getAttrib(E,I[G])!==""){break}}if(G==-1){o=true;break}}y.writeStartElement(k);if(q.attribs){for(G=0,B=q.attribs,F=B.length;G<F;G++){I=B[G];z=A._getAttrib(E,I);if(z!==null){y.writeAttribute(I.name,z)}}}if(q.validAttribsRE){B=A.dom.getAttribs(E);for(G=B.length-1;G>-1;G--){j=B[G];if(j.specified){I=j.nodeName.toLowerCase();if(C.invalid_attrs.test(I)||!q.validAttribsRE.test(I)){continue}D=A.findAttribRule(q,I);z=A._getAttrib(E,D,I);if(z!==null){y.writeAttribute(I,z)}}}}if(m&&H){y.writeAttribute("_mce_type",m)}if(k==="script"&&c.trim(E.innerHTML)){y.writeText("// ");y.writeCDATA(E.innerHTML.replace(/<!--|-->|<\[CDATA\[|\]\]>/g,""));p=false;break}if(q.padd){if(p&&(r=E.firstChild)&&r.nodeType===1&&E.childNodes.length===1){if(r.hasAttribute?r.hasAttribute("_mce_bogus"):r.getAttribute("_mce_bogus")){y.writeText("\u00a0")}}else{if(!p){y.writeText("\u00a0")}}}break;case 3:if(C.validate_children&&A.elementName&&!A.schema.isValid(A.elementName,"#text")){return}return y.writeText(E.nodeValue);case 4:return y.writeCDATA(E.nodeValue);case 8:return y.writeComment(E.nodeValue)}}else{if(E.nodeType==1){p=E.hasChildNodes()}}if(p&&!x){r=E.firstChild;while(r){A._serializeNode(r);A.elementName=k;r=r.nextSibling}}if(!o){if(!x){y.writeFullEndElement()}else{y.writeEndElement()}}},_protect:function(j){var i=this;j.items=j.items||[];function h(l){return l.replace(/[\r\n\\]/g,function(m){if(m==="\n"){return"\\n"}else{if(m==="\\"){return"\\\\"}}return"\\r"})}function k(l){return l.replace(/\\[\\rn]/g,function(m){if(m==="\\n"){return"\n"}else{if(m==="\\\\"){return"\\"}}return"\r"})}f(j.patterns,function(l){j.content=k(h(j.content).replace(l.pattern,function(n,o,m,p){m=k(m);if(l.encode){m=i._encode(m)}j.items.push(m);return o+"<!--mce:"+(j.items.length-1)+"-->"+p}))});return j},_unprotect:function(i,j){i=i.replace(/\<!--mce:([0-9]+)--\>/g,function(k,h){return j.items[parseInt(h)]});j.items=[];return i},_encode:function(m){var j=this,k=j.settings,i;if(k.entity_encoding!=="raw"){if(k.entity_encoding.indexOf("named")!=-1){j.setEntities(k.entities);i=j.entityLookup;m=m.replace(/[\u007E-\uFFFF]/g,function(h){var l;if(l=i[h]){h="&"+l+";"}return h})}if(k.entity_encoding.indexOf("numeric")!=-1){m=m.replace(/[\u007E-\uFFFF]/g,function(h){return"&#"+h.charCodeAt(0)+";"})}}return m},_setup:function(){var h=this,i=this.settings;if(h.done){return}h.done=1;h.setRules(i.valid_elements);h.addRules(i.extended_valid_elements);if(i.invalid_elements){h.invalidElementsRE=new RegExp("^("+d(i.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")}if(i.attrib_value_filter){h.attribValueFilter=i.attribValueFilter}},_getAttrib:function(m,j,h){var l,k;h=h||j.name;if(j.forcedVal&&(k=j.forcedVal)){if(k==="{$uid}"){return this.dom.uniqueId()}return k}k=this.dom.getAttrib(m,h);switch(h){case"rowspan":case"colspan":if(k=="1"){k=""}break}if(this.attribValueFilter){k=this.attribValueFilter(h,k,m)}if(j.validVals){for(l=j.validVals.length-1;l>=0;l--){if(k==j.validVals[l]){break}}if(l==-1){return null}}if(k===""&&typeof(j.defaultVal)!="undefined"){k=j.defaultVal;if(k==="{$uid}"){return this.dom.uniqueId()}return k}else{if(h=="class"&&this.processObj.get){k=k.replace(/\s?mceItem\w+\s?/g,"")}}if(k===""){return null}return k}})})(tinymce);(function(a){a.dom.ScriptLoader=function(e){var k=0,j=1,f=2,l={},h=[],c={},b=[],d=0,g;function i(m,v){var x=this,q=a.DOM,s,o,r,n;function p(){q.remove(n);if(s){s.onreadystatechange=s.onload=s=null}v()}function u(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+m)}p()}n=q.uniqueId();if(a.isIE6){o=new a.util.URI(m);r=location;if(o.host==r.hostname&&o.port==r.port&&(o.protocol+":")==r.protocol){a.util.XHR.send({url:a._addVer(o.getURI()),success:function(z){var y=q.create("script",{type:"text/javascript"});y.text=z;document.getElementsByTagName("head")[0].appendChild(y);q.remove(y);p()},error:u});return}}s=q.create("script",{id:n,type:"text/javascript",src:a._addVer(m)});if(!a.isIE){s.onload=p}s.onerror=u;s.onreadystatechange=function(){var y=s.readyState;if(y=="complete"||y=="loaded"){p()}};(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}this.isDone=function(m){return l[m]==f};this.markDone=function(m){l[m]=f};this.add=this.load=function(m,q,n){var o,p=l[m];if(p==g){h.push(m);l[m]=k}if(q){if(!c[m]){c[m]=[]}c[m].push({func:q,scope:n||this})}};this.loadQueue=function(n,m){this.loadScripts(h,n,m)};this.loadScripts=function(m,q,p){var o;function n(r){a.each(c[r],function(s){s.func.call(s.scope)});c[r]=g}b.push({func:q,scope:p||this});o=function(){var r=a.grep(m);m.length=0;a.each(r,function(s){if(l[s]==f){n(s);return}if(l[s]!=j){l[s]=j;d++;i(s,function(){l[s]=f;d--;n(s);o()})}});if(!d){a.each(b,function(s){s.func.call(s.scope)});b.length=0}};o()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(b,a){var c=b;function d(h,g,j,i){var f,e;if(h){if(!i&&h[g]){return h[g]}if(h!=a){f=h[j];if(f){return f}for(e=h.parentNode;e&&e!=a;e=e.parentNode){f=e[j];if(f){return f}}}}}this.current=function(){return c};this.next=function(e){return(c=d(c,"firstChild","nextSibling",e))};this.prev=function(e){return(c=d(c,"lastChild","lastSibling",e))}};(function(){var b={};function a(f,e){var d;function c(g){return g.replace(/[A-Z]+/g,function(h){return c(f[h])})}for(d in f){if(f.hasOwnProperty(d)){f[d]=c(f[d])}}c(e).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]/g,function(l,g,j){var h,k={};j=j.split(/\|/);for(h=j.length-1;h>=0;h--){k[j[h]]=1}b[g]=k})}a({Z:"#|H|K|N|O|P",Y:"#|X|form|R|Q",X:"p|T|div|U|W|isindex|fieldset|table",W:"pre|hr|blockquote|address|center|noframes",U:"ul|ol|dl|menu|dir",ZC:"#|p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"#|X|S|Q",S:"R|P",ZA:"#|a|G|J|M|O|P",R:"#|a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe"},"script[]style[]object[#|param|X|form|a|H|K|N|O|Q]param[]p[S]a[Z]br[]span[S]bdo[S]applet[#|param|X|form|a|H|K|N|O|Q]h1[S]img[]map[X|form|Q|area]h2[S]iframe[#|X|form|a|H|K|N|O|Q]h3[S]tt[S]i[S]b[S]u[S]s[S]strike[S]big[S]small[S]font[S]basefont[]em[S]strong[S]dfn[S]code[S]q[S]samp[S]kbd[S]var[S]cite[S]abbr[S]acronym[S]sub[S]sup[S]input[]select[optgroup|option]optgroup[option]option[]textarea[]label[S]button[#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[S]ins[#|X|form|a|H|K|N|O|Q]h5[S]del[#|X|form|a|H|K|N|O|Q]h6[S]div[#|X|form|a|H|K|N|O|Q]ul[li]li[#|X|form|a|H|K|N|O|Q]ol[li]dl[dt|dd]dt[S]dd[#|X|form|a|H|K|N|O|Q]menu[li]dir[li]pre[ZA]hr[]blockquote[#|X|form|a|H|K|N|O|Q]address[S|p]center[#|X|form|a|H|K|N|O|Q]noframes[#|X|form|a|H|K|N|O|Q]isindex[]fieldset[#|legend|X|form|a|H|K|N|O|Q]legend[S]table[caption|col|colgroup|thead|tfoot|tbody|tr]caption[S]col[]colgroup[col]thead[tr]tr[th|td]th[#|X|form|a|H|K|N|O|Q]form[#|X|a|H|K|N|O|Q]noscript[#|X|form|a|H|K|N|O|Q]td[#|X|form|a|H|K|N|O|Q]tfoot[tr]tbody[tr]area[]base[]body[#|X|form|a|H|K|N|O|Q]");tinymce.dom.Schema=function(){var d=this,c=b;d.isValid=function(g,e){var f=c[g];return !!(f&&(!e||f[e]))}}})();(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,r){var j=d.startContainer,f=d.startOffset,o=d.endContainer,l=d.endOffset,i,k,n,h,s,q,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(u){r([u])});return}function p(x,v,u){var y=[];for(;x&&x!=u;x=x[v]){y.push(x)}return y}function m(v,u){do{if(v.parentNode==u){return v}v=v.parentNode}while(v)}function g(x,v,y){var u=y?"nextSibling":"previousSibling";for(h=x,s=h.parentNode;h&&h!=v;h=s){s=h.parentNode;q=p(h==x?h:h[u],u);if(q.length){if(!y){q.reverse()}r(q)}}}if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[f]}if(o.nodeType==1&&o.hasChildNodes()){o=o.childNodes[Math.min(l-1,o.childNodes.length-1)]}i=c.findCommonAncestor(j,o);if(j==o){return r([j])}for(h=j;h;h=h.parentNode){if(h==o){return g(j,i,true)}if(h==i){break}}for(h=o;h;h=h.parentNode){if(h==j){return g(o,i)}if(h==i){break}}k=m(j,i)||j;n=m(o,i)||o;g(j,k,true);q=p(k==j?k:k.nextSibling,"nextSibling",n==o?n.nextSibling:n);if(q.length){r(q)}g(o,n)}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(h,i){var p=this,m=h.root,k=h.items,o=h.enableUpDown,g=h.enableLeftRight||!h.enableUpDown,l=h.excludeFromTabOrder,j,f,n,d,e;i=i||b.DOM;j=function(q){e=q.target.id};f=function(q){i.setAttrib(q.target.id,"tabindex","-1")};d=function(q){var r=i.get(e);i.setAttrib(r,"tabindex","0");r.focus()};p.focus=function(){i.get(e).focus()};p.destroy=function(){c(k,function(q){i.unbind(i.get(q.id),"focus",j);i.unbind(i.get(q.id),"blur",f)});i.unbind(i.get(m),"focus",d);i.unbind(i.get(m),"keydown",n);k=i=m=p.focus=j=f=n=d=null;p.destroy=function(){}};p.moveFocus=function(u,r){var q=-1,v=p.controls,s;if(!e){return}c(k,function(y,x){if(y.id===e){q=x;return false}});q+=u;if(q<0){q=k.length-1}else{if(q>=k.length){q=0}}s=k[q];i.setAttrib(e,"tabindex","-1");i.setAttrib(s.id,"tabindex","0");i.get(s.id).focus();if(h.actOnFocus){h.onAction(s.id)}if(r){a.cancel(r)}};n=function(z){var r=37,s=39,y=38,A=40,v=27,u=14,x=13,q=32;switch(z.keyCode){case r:if(g){p.moveFocus(-1)}break;case s:if(g){p.moveFocus(1)}break;case y:if(o){p.moveFocus(-1)}break;case A:if(o){p.moveFocus(1)}break;case v:if(h.onCancel){h.onCancel();a.cancel(z)}break;case u:case x:case q:if(h.onAction){h.onAction(e);a.cancel(z)}break}};c(k,function(s,q){var r;if(!s.id){s.id=i.uniqueId("_mce_item_")}if(l){i.bind(s.id,"blur",f);r="-1"}else{r=(q===0?"0":"-1")}i.setAttrib(s.id,"tabindex",r);i.bind(i.get(s.id),"focus",j)});e=k[0].id;i.setAttrib(m,"tabindex","-1");i.bind(i.get(m),"focus",d);i.bind(i.get(m),"keydown",n)}})})(tinymce);(function(a){var c=a.DOM,b=a.is;a.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new a.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(d,f){var e=c.get(this.id+"_aria")||c.get(this.id);if(e){c.setAttrib(e,"aria-"+d,!!f)}},focus:function(){c.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty("disabled",d);this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;this.setAriaProperty("pressed",d)}},isActive:function(){return this.active},setState:function(f,d){var e=c.get(this.id);f=this.classPrefix+f;if(d){c.addClass(e,f)}else{c.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){c.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(b(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(b(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){c.remove(this.id);this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(b){var d=b.is,c=b.DOM,e=b.each,a=b.walk;b.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.setAriaProperty("checked",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(d(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(b){var d=b.is,c=b.DOM,e=b.each,a=b.walk;b.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new b.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new b.ui.MenuItem(f.id||c.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new b.ui.Menu(g.id||c.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(b){var e=b.is,d=b.DOM,f=b.each,a=b.dom.Event,c=b.dom.Element;b.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||d.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(e(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new b.util.Dispatcher(this);this.onHideMenu=new b.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j["class"]=j["class"]||i["class"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;j.keyboard_focus=i.keyboard_focus;g=new b.ui.DropMenu(j.id||d.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var i=this,j=i.settings,g=d.get("menu_"+i.id+"_tbl"),l=d.get("menu_"+i.id+"_co"),h,k;h=j.max_width?Math.min(g.clientWidth,j.max_width):g.clientWidth;k=j.max_height?Math.min(g.clientHeight,j.max_height):g.clientHeight;if(!d.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){d.setStyle(l,"width",h)}if(j.max_height){d.setStyle(l,"height",k);if(g.clientHeight<j.max_height){d.setStyle(l,"overflow","hidden")}}},showMenu:function(p,o,u){var z=this,A=z.settings,n,g=d.getViewPort(),r,l,v,q,i=2,k,j,m=z.classPrefix;z.collapse(1);if(z.isMenuVisible){return}if(!z.rendered){n=d.add(z.settings.container,z.renderNode());f(z.items,function(h){h.postRender()});z.element=new c("menu_"+z.id,{blocker:1,container:A.container})}else{n=d.get("menu_"+z.id)}if(!b.isOpera){d.setStyles(n,{left:-65535,top:-65535})}d.show(n);z.update();p+=A.offset_x||0;o+=A.offset_y||0;g.w-=4;g.h-=4;if(A.constrain){r=n.clientWidth-i;l=n.clientHeight-i;v=g.x+g.w;q=g.y+g.h;if((p+A.vp_offset_x+r)>v){p=u?u-r:Math.max(0,(v-A.vp_offset_x)-r)}if((o+A.vp_offset_y+l)>q){o=Math.max(0,(q-A.vp_offset_y)-l)}}d.setStyles(n,{left:p,top:o});z.element.update();z.isMenuVisible=1;z.mouseClickFunc=a.add(n,"click",function(s){var h;s=s.target;if(s&&(s=d.getParent(s,"tr"))&&!d.hasClass(s,m+"ItemSub")){h=z.items[s.id];if(h.isDisabled()){return}k=z;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(z.hasMenus()){z.mouseOverFunc=a.add(n,"mouseover",function(y){var h,x,s;y=y.target;if(y&&(y=d.getParent(y,"tr"))){h=z.items[y.id];if(z.lastMenu){z.lastMenu.collapse(1)}if(h.isDisabled()){return}if(y&&d.hasClass(y,m+"ItemSub")){x=d.getRect(y);h.showMenu((x.x+x.w-i),x.y-i,x.x);z.lastMenu=h;d.addClass(d.get(h.id).firstChild,m+"ItemActive")}}})}a.add(n,"keydown",z._keyHandler,z);z.onShowMenu.dispatch(z);if(A.keyboard_focus){z.keyboardNav=new b.ui.KeyboardNavigation({root:"menu_"+z.id,items:d.select("a[role=option]","menu_"+z.id),onCancel:function(){z.hideMenu()},enableUpDown:true});d.select("a[role=option]","menu_"+z.id)[0].focus()}},hideMenu:function(j){var g=this,i=d.get("menu_"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(i,"mouseover",g.mouseOverFunc);a.remove(i,"click",g.mouseClickFunc);a.remove(i,"keydown",g._keyHandler);d.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=d.get(g.id)){d.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=d.get("menu_"+g.id))){g._add(d.select("tbody",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){d.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=d.get("menu_"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,"mouseover",g.mouseOverFunc);a.remove(d.select("a",h),"focus",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);a.remove(h,"keydown",g._keyHandler);if(g.element){g.element.remove()}d.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;g=d.create("div",{role:"listbox",id:"menu_"+i.id,"class":j["class"],style:"position:absolute;left:0;top:0;z-index:200000"});if(i.settings.parent){d.setAttrib(g,"aria-parent","menu_"+i.settings.parent.id)}k=d.add(g,"div",{role:"presentation",id:"menu_"+i.id+"_co","class":i.classPrefix+(j["class"]?" "+j["class"]:"")});i.element=new c("menu_"+i.id,{blocker:1,container:j.container});if(j.menu_line){d.add(k,"span",{"class":i.classPrefix+"Line"})}l=d.add(k,"table",{role:"presentation",id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=d.add(l,"tbody");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_keyHandler:function(g){var h=this,i;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=d.add(j,"tr",{id:h.id,"class":m+"ItemSeparator",role:"presentation"});d.add(l,"td",{"class":m+"ItemSeparator",role:"presentation"});if(i=l.previousSibling){d.addClass(i,"mceLast")}return}i=l=d.add(j,"tr",{role:"presentation",id:h.id,"class":m+"Item "+m+"ItemEnabled"});i=k=d.add(i,q.titleItem?"th":"td",{role:"presentation"});i=p=d.add(i,"a",{id:h.id+"_aria",role:q.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(q.parent){d.setAttrib(p,"aria-haspopup","true");d.setAttrib(p,"aria-owns","menu_"+h.id)}d.addClass(k,q["class"]);g=d.add(i,"span",{"class":"mceIcon"+(q.icon?" mce_"+q.icon:"")});if(q.icon_src){d.add(g,"img",{src:q.icon_src})}i=d.add(i,q.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){d.setAttrib(i,"style",h.settings.style)}if(j.childNodes.length==1){d.addClass(l,"mceFirst")}if((i=l.previousSibling)&&d.hasClass(i,m+"ItemSeparator")){d.addClass(l,"mceFirst")}if(h.collapse){d.addClass(l,m+"ItemSub")}if(i=l.previousSibling){d.removeClass(i,"mceLast")}d.addClass(l,"mceLast")}})})(tinymce);(function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=b.encode(e.label||"");d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(e.title)+'">';if(e.image){d+='<img class="mceIcon" src="'+e.image+'" />'+c}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>";d+="</a>";return d},postRender:function(){var c=this,d=c.settings;a.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){return d.onclick.call(d.scope,f)}})}})})(tinymce);(function(c){var d=c.DOM,b=c.dom.Event,e=c.each,a=c.util.Dispatcher;c.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(i,h,f){var g=this;g.parent(i,h,f);g.items=[];g.onChange=new a(g);g.onPostRender=new a(g);g.onAdd=new a(g);g.onRenderMenu=new c.util.Dispatcher(this);g.classPrefix="mceListBox"},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){var g=this,h,i;if(f!=g.selectedIndex){h=d.get(g.id+"_text");i=g.items[f];if(i){g.selectedValue=i.value;g.selectedIndex=f;d.setHTML(h,d.encode(i.title));d.removeClass(h,"mceTitle");d.setAttrib(g.id,"aria-valuenow",i.title)}else{d.setHTML(h,d.encode(g.settings.title));d.addClass(h,"mceTitle");g.selectedValue=g.selectedIndex=null;d.setAttrib(g.id,"aria-valuenow",g.settings.title)}h=0}},add:function(i,f,h){var g=this;h=h||{};h=c.extend(h,{title:i,value:f});g.items.push(h);g.onAdd.dispatch(g,h)},getLength:function(){return this.items.length},renderHTML:function(){var i="",f=this,g=f.settings,j=f.classPrefix;i='<table role="button" aria-haspopup="true" aria-labelledby="'+f.id+'_text" aria-describedby="'+f.id+'_voiceDesc" tabindex="0" id="'+f.id+'" cellpadding="0" cellspacing="0" class="'+j+" "+j+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr role="presentation">';i+='<td role="presentation">'+d.createHTML("span",{id:f.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},f.settings.title);i+=d.createHTML("a",{id:f.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},d.encode(f.settings.title))+"</td>";i+='<td role="presentation">'+d.createHTML("a",{id:f.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";i+="</tr></tbody></table>";return i},showMenu:function(){var g=this,j,i,h=d.get(this.id),f;if(g.isDisabled()||g.items.length==0){return}if(g.menu&&g.menu.isMenuVisible){return g.hideMenu()}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}j=d.getPos(this.settings.menu_container);i=d.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.keyboard_focus=!c.isOpera;if(g.oldID){f.items[g.oldID].setSelected(0)}e(g.items,function(k){if(k.value===g.selectedValue){f.items[k.id].setSelected(1);g.oldID=k.id}});f.showMenu(0,h.clientHeight);b.add(d.doc,"mousedown",g.hideMenu,g);d.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(g){var f=this;if(f.menu&&f.menu.isMenuVisible){if(g&&g.type=="mousedown"&&(g.target.id==f.id+"_text"||g.target.id==f.id+"_open")){return}if(!g||!d.getParent(g.target,".mceMenu")){d.removeClass(f.id,f.classPrefix+"Selected");b.remove(d.doc,"mousedown",f.hideMenu,f);f.menu.hideMenu()}}f.focus()},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(g.hideMenu,g);f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}})}else{h.id=d.uniqueId();h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value)}};f.add(h)}});g.onRenderMenu.dispatch(g,f);g.menu=f},postRender:function(){var f=this,g=f.classPrefix;b.add(f.id,"click",f.showMenu,f);b.add(f.id,"keydown",function(h){if(h.keyCode==32){f.showMenu(h);b.cancel(h)}});b.add(f.id,"focus",function(){if(!f._focused){f.keyDownHandler=b.add(f.id,"keydown",function(h){if(h.keyCode==40){f.showMenu();b.cancel(h)}});f.keyPressHandler=b.add(f.id,"keypress",function(i){var h;if(i.keyCode==13){h=f.selectedValue;f.selectedValue=null;b.cancel(i);f.settings.onselect(h)}})}f._focused=1});b.add(f.id,"blur",function(){b.remove(f.id,"keydown",f.keyDownHandler);b.remove(f.id,"keypress",f.keyPressHandler);f._focused=0});if(c.isIE6||!d.boxModel){b.add(f.id,"mouseover",function(){if(!d.hasClass(f.id,g+"Disabled")){d.addClass(f.id,g+"Hover")}});b.add(f.id,"mouseout",function(){if(!d.hasClass(f.id,g+"Disabled")){d.removeClass(f.id,g+"Hover")}})}f.onPostRender.dispatch(f,d.get(f.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(c){var d=c.DOM,b=c.dom.Event,e=c.each,a=c.util.Dispatcher;c.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(g,f){this.parent(g,f);this.classPrefix="mceNativeListBox"},setDisabled:function(f){d.get(this.id).disabled=f;this.setAriaProperty("disabled",f)},isDisabled:function(){return d.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){d.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null},add:function(j,g,f){var i,h=this;f=f||{};f.value=g;if(h.isRendered()){d.add(d.get(this.id),"option",f,j)}i={title:j,value:g,attribs:f};h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var g,f=this;g=d.createHTML("option",{value:""},"-- "+f.settings.title+" --");e(f.items,function(h){g+=d.createHTML("option",{value:h.value},h.title)});g=d.createHTML("select",{id:f.id,"class":"mceNativeListBox","aria-labelledby":f.id+"_aria"},g);g+=d.createHTML("span",{id:f.id+"_aria",style:"display: none"},f.settings.title);return g},postRender:function(){var g=this,h,i=true;g.rendered=true;function f(k){var j=g.items[k.target.selectedIndex-1];if(j&&(j=j.value)){g.onChange.dispatch(g,j);if(g.settings.onselect){g.settings.onselect(j)}}}b.add(g.id,"change",f);b.add(g.id,"keydown",function(k){var j;b.remove(g.id,"change",h);i=false;j=b.add(g.id,"blur",function(){if(i){return}i=true;b.add(g.id,"change",f);b.remove(g.id,"blur",j)});if(k.keyCode==13||k.keyCode==32){f(k);return b.cancel(k)}});g.onPostRender.dispatch(g,d.get(g.id))}})})(tinymce);(function(b){var c=b.DOM,a=b.dom.Event,d=b.each;b.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new b.util.Dispatcher(this);f.menu_container=f.menu_container||c.doc.body},showMenu:function(){var g=this,j,i,h=c.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=c.getPos(g.settings.menu_container);i=c.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(c.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(f.hideMenu,f);f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(c.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0;f.focus()},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(b){var c=b.DOM,a=b.dom.Event,d=b.each;b.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var i,f=this,g=f.settings,e;i='<tbody><tr role="presentation">';if(g.image){e=c.createHTML("img ",{src:g.image,role:"presentation","class":"mceAction "+g["class"]})}else{e=c.createHTML("span",{"class":"mceAction "+g["class"]},"")}e+=c.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title);i+='<td role="presentation">'+c.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=c.createHTML("span",{"class":"mceOpen "+g["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');i+='<td role="presentation">'+c.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";i+="</tr></tbody>";return c.createHTML("table",{id:f.id,role:"button",tabindex:"0","aria-labelledby":f.id+"_voice","aria-haspopup":"true","class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",title:g.title},i)},postRender:function(){var f=this,g=f.settings,e;if(g.onclick){e=function(h){if(!f.isDisabled()){g.onclick(f.value);a.cancel(h)}};a.add(f.id+"_action","click",e);a.add(f.id,["click","keydown"],function(h){var m=32,k=14,i=13,j=38,l=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){e();a.cancel(h)}else{if(h.type==="click"||h.keyCode===l){f.showMenu();a.cancel(h)}}})}a.add(f.id+"_open","click",function(h){f.showMenu();a.cancel(h)});a.add([f.id,f.id+"_open"],"focus",function(){f._focused=1});a.add([f.id,f.id+"_open"],"blur",function(){f._focused=0});if(b.isIE6||!c.boxModel){a.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,"mceSplitButtonDisabled")){c.addClass(f.id,"mceSplitButtonHover")}});a.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,"mceSplitButtonDisabled")){c.removeClass(f.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(b){var d=b.DOM,a=b.dom.Event,c=b.is,e=b.each;b.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(i,h,f){var g=this;g.parent(i,h,f);g.settings=h=b.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new b.util.Dispatcher(g);g.onHideMenu=new b.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=d.get(f.id);d.show(f.id+"_menu");d.addClass(i,"mceSplitButtonSelected");h=d.getPos(i);d.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.clientHeight,zIndex:200000});i=0;a.add(d.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(k){if(k.keyCode==27){f.hideMenu()}});d.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&d.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!d.getParent(g.target,".mceSplitButtonMenu")){d.removeClass(f.id,"mceSplitButtonSelected");a.remove(d.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);d.hide(f.id+"_menu")}f.onHideMenu.dispatch(f);f.isMenuVisible=0;f.editor.focus()},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=d.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu","class":q.menu_class+" "+q["class"],style:"position:absolute;left:0;top:-1000px;"});h=d.add(o,"div",{"class":q["class"]+" mceSplitButtonMenu"});d.add(h,"span",{"class":"mceMenuLine"});g=d.add(h,"table",{role:"presentation","class":"mceColorSplitMenu"});j=d.add(g,"tbody");k=0;e(c(q.colors,"array")?q.colors:q.colors.split(","),function(i){i=i.replace(/^#/,"");if(!k--){l=d.add(j,"tr",{role:"presentation"});k=q.grid_width-1}g=d.add(l,"td",{role:"presentation"});g=d.add(g,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+i},title:p.editor.getLang("colors."+i,i),_mce_color:"#"+i});if(p.editor.forcedHighContrastMode){g=d.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"});if(g.getContext&&(f=g.getContext("2d"))){f.fillStyle="#"+i;f.fillRect(0,0,16,16)}else{d.remove(g)}}});if(q.more_colors_func){g=d.add(j,"tr",{role:"presentation"});g=d.add(g,"td",{role:"presentation",colspan:q.grid_width,"class":"mceMoreColors"});g=d.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},q.more_colors_title);a.add(g,"click",function(i){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(i)})}d.addClass(h,"mceColorSplitMenu");new b.ui.KeyboardNavigation({root:p.id+"_menu",items:d.select("a",p.id+"_menu"),onCancel:function(){p.hideMenu();p.focus()}});a.add(p.id+"_menu","click",function(i){var m;i=d.getParent(i.target,"a",j);if(i&&(m=i.getAttribute("_mce_color"))){p.setColor(m)}return a.cancel(i)});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;d.setStyle(f.id+"_preview","backgroundColor",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();d.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});d.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");d.remove(this.id+"_menu")}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var e=this,i=[],g=e.controls,j=b.each,f=e.settings;i.push('<div id="'+e.id+'" role="group" aria-labelledby="'+e.id+'_voice">');i.push('<span id="'+e.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(f.name)+"</span>");j(g,function(h){i.push(h.renderHTML())});i.push("</div>");return i.join("")},focus:function(){this.keyNav.focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){this.parent();t.keyNav.destroy();a.clear(t.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,n=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=c.createHTML("td",{"class":j,role:"presentation"},c.createHTML("span",null,"<!-- IE -->"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarEnd",role:"presentation"},c.createHTML("span",null,"<!-- IE -->"))}}if(c.stdMode){f+='<td style="position: relative" role="presentation">'+k.renderHTML()+"</td>"}else{f+='<td role="presentation">'+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarStart",role:"presentation"},c.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=c.createHTML("td",{"class":j,role:"presentation"},c.createHTML("span",null,"<!-- IE -->"));return c.createHTML("table",{id:m.id,"class":"mceToolbar"+(n["class"]?" "+n["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},'<tbody><tr role="presentation">'+f+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){return this.lookup[d]},requireLangPack:function(e){var d=b.settings;if(d&&d.language){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(e,d){this.items.push(d);this.lookup[e]=d;this.onAdd.dispatch(this,e,d);return d},load:function(h,e,d,g){var f=this;if(f.urls[h]){return}if(e.indexOf("/")!=0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}f.urls[h]=e.substring(0,e.lastIndexOf("/"));if(!f.lookup[h]){b.ScriptLoader.add(e,d,g)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(h){var g=h.each,b=h.extend,k=h.DOM,j=h.dom.Event,f=h.ThemeManager,d=h.PluginManager,a=h.explode,i=h.util.Dispatcher,e,c=0;h.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(h.documentBaseURL)){h.documentBaseURL+="/"}h.baseURL=new h.util.URI(h.documentBaseURL).toAbsolute(h.baseURL);h.baseURI=new h.util.URI(h.baseURL);h.onBeforeUnload=new i(h);j.add(window,"beforeunload",function(l){h.onBeforeUnload.dispatch(h,l)});h.onAddEditor=new i(h);h.onRemoveEditor=new i(h);h.EditorManager=b(h,{editors:[],i18n:{},activeEditor:null,init:function(r){var o=this,q,m=h.ScriptLoader,u,p=[],n;function l(y,z,v){var x=y[z];if(!x){return}if(h.is(x,"string")){v=x.replace(/\.\w+$/,"");v=v?h.resolve(v):0;x=h.resolve(x)}return x.apply(v||this,Array.prototype.slice.call(arguments,2))}r=b({theme:"simple",language:"en"},r);o.settings=r;j.add(document,"init",function(){var s,x;l(r,"onpageload");switch(r.mode){case"exact":s=r.elements||"";if(s.length>0){g(a(s),function(y){if(k.get(y)){n=new h.Editor(y,r);p.push(n);n.render(1)}else{g(document.forms,function(z){g(z.elements,function(A){if(A.name===y){y="mce_editor_"+c++;k.setAttrib(A,"id",y);n=new h.Editor(y,r);p.push(n);n.render(1)}})})}})}break;case"textareas":case"specific_textareas":function v(z,y){return y.constructor===RegExp?y.test(z.className):k.hasClass(z,y)}g(k.select("textarea"),function(y){if(r.editor_deselector&&v(y,r.editor_deselector)){return}if(!r.editor_selector||v(y,r.editor_selector)){u=k.get(y.name);if(!y.id&&!u){y.id=y.name}if(!y.id||o.get(y.id)){y.id=k.uniqueId()}n=new h.Editor(y.id,r);p.push(n);n.render(1)}});break}if(r.oninit){s=x=0;g(p,function(y){x++;if(!y.initialized){y.onInit.add(function(){s++;if(s==x){l(r,"oninit")}})}else{s++}if(s==x){l(r,"oninit")}})}})},get:function(l){if(l===e){return this.editors}return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(n){var m=this,l=m.editors;l[n.id]=n;l.push(n);m._setActive(n);m.onAddEditor.dispatch(m,n);return n},remove:function(m){var o=this,n,l=o.editors;if(!l[m.id]){return null}delete l[m.id];for(n=0;n<l.length;n++){if(l[n]==m){l.splice(n,1);break}}if(o.activeEditor==m){o._setActive(l[0])}m.destroy();o.onRemoveEditor.dispatch(o,m);return m},execCommand:function(r,p,o){var q=this,n=q.get(o),l;switch(r){case"mceFocus":n.focus();return true;case"mceAddEditor":case"mceAddControl":if(!q.get(o)){new h.Editor(o,q.settings).render()}return true;case"mceAddFrameControl":l=o.window;l.tinyMCE=tinyMCE;l.tinymce=h;h.DOM.doc=l.document;h.DOM.win=l;n=new h.Editor(o.element_id,o);n.render();if(h.isIE){function m(){n.destroy();l.detachEvent("onunload",m);l=l.tinyMCE=l.tinymce=null}l.attachEvent("onunload",m)}o.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(n){n.remove()}return true;case"mceToggleEditor":if(!n){q.execCommand("mceAddControl",0,o);return true}if(n.isHidden()){n.show()}else{n.hide()}return true}if(q.activeEditor){return q.activeEditor.execCommand(r,p,o)}return false},execInstanceCommand:function(p,o,n,m){var l=this.get(p);if(l){return l.execCommand(o,n,m)}return false},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(n,q){var l,m=this.i18n;if(!h.is(n,"string")){g(n,function(r,p){g(r,function(u,s){g(u,function(x,v){if(s==="common"){m[p+"."+v]=x}else{m[p+"."+s+"."+v]=x}})})})}else{g(q,function(r,p){m[n+"."+p]=r})}},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);(function(j){var n=j.DOM,l=j.dom.Event,c=j.extend,k=j.util.Dispatcher,i=j.each,b=j.isGecko,d=j.isIE,e=j.isWebKit,g=j.is,h=j.ThemeManager,f=j.PluginManager,o=j.inArray,m=j.grep,a=j.explode;j.create("tinymce.Editor",{Editor:function(r,q){var p=this;p.id=p.editorId=r;p.execCommands={};p.queryStateCommands={};p.queryValueCommands={};p.isNotDirty=false;p.plugins={};i(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(s){p[s]=new k(p)});p.settings=q=c({id:r,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:j.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:j.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true},q);p.documentBaseURI=new j.util.URI(q.document_base_url||j.documentBaseURL,{base_uri:tinyMCE.baseURI});p.baseURI=j.baseURI;p.execCallback("setup",p)},render:function(r){var u=this,v=u.settings,x=u.id,p=j.ScriptLoader;if(!l.domLoaded){l.add(document,"init",function(){u.render()});return}tinyMCE.settings=v;if(!u.getElement()){return}if(j.isIDevice){return}if(!/TEXTAREA|INPUT/i.test(u.getElement().nodeName)&&v.hidden_input&&n.getParent(x,"form")){n.insertAfter(n.create("input",{type:"hidden",name:x}),x)}if(j.WindowManager){u.windowManager=new j.WindowManager(u)}if(v.encoding=="xml"){u.onGetContent.add(function(s,y){if(y.save){y.content=n.encode(y.content)}})}if(v.add_form_submit_trigger){u.onSubmit.addToTop(function(){if(u.initialized){u.save();u.isNotDirty=1}})}if(v.add_unload_trigger){u._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(u.initialized&&!u.destroyed&&!u.isHidden()){u.save({format:"raw",no_events:true})}})}j.addUnload(u.destroy,u);if(v.submit_patch){u.onBeforeRenderUI.add(function(){var s=u.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){u.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){j.triggerSave();u.isNotDirty=1;return u.formElement._mceOldSubmit(u.formElement)}}s=null})}function q(){if(v.language){p.add(j.baseURL+"/langs/"+v.language+".js")}if(v.theme&&v.theme.charAt(0)!="-"&&!h.urls[v.theme]){h.load(v.theme,"themes/"+v.theme+"/editor_template"+j.suffix+".js")}i(a(v.plugins),function(s){if(s&&s.charAt(0)!="-"&&!f.urls[s]){if(s=="safari"){return}f.load(s,"plugins/"+s+"/editor_plugin"+j.suffix+".js")}});p.loadQueue(function(){if(!u.removed){u.init()}})}q()},init:function(){var r,E=this,F=E.settings,B,y,A=E.getElement(),q,p,C,x,z,D;j.add(E);F.aria_label=F.aria_label||n.getAttrib(A,"aria-label",E.getLang("aria.rich_text_area"));if(F.theme){F.theme=F.theme.replace(/-/,"");q=h.get(F.theme);E.theme=new q();if(E.theme.init&&F.init_theme){E.theme.init(E,h.urls[F.theme]||j.documentBaseURL.replace(/\/$/,""))}}i(a(F.plugins.replace(/\-/g,"")),function(H){var I=f.get(H),G=f.urls[H]||j.documentBaseURL.replace(/\/$/,""),s;if(I){s=new I(E,G);E.plugins[H]=s;if(s.init){s.init(E,G)}}});if(F.popup_css!==false){if(F.popup_css){F.popup_css=E.documentBaseURI.toAbsolute(F.popup_css)}else{F.popup_css=E.baseURI.toAbsolute("themes/"+F.theme+"/skins/"+F.skin+"/dialog.css")}}if(F.popup_css_add){F.popup_css+=","+E.documentBaseURI.toAbsolute(F.popup_css_add)}E.controlManager=new j.ControlManager(E);if(F.custom_undo_redo){E.onBeforeExecCommand.add(function(u,H,G,I,s){if(H!="Undo"&&H!="Redo"&&H!="mceRepaint"&&(!s||!s.skip_undo)){if(!E.undoManager.hasUndo()){E.undoManager.add()}}});E.onExecCommand.add(function(u,H,G,I,s){if(H!="Undo"&&H!="Redo"&&H!="mceRepaint"&&(!s||!s.skip_undo)){E.undoManager.add()}})}E.onExecCommand.add(function(s,u){if(!/^(FontName|FontSize)$/.test(u)){E.nodeChanged()}});if(b){function v(s,u){if(!u||!u.initial){E.execCommand("mceRepaint")}}E.onUndo.add(v);E.onRedo.add(v);E.onSetContent.add(v)}E.onBeforeRenderUI.dispatch(E,E.controlManager);if(F.render_ui){B=F.width||A.style.width||A.offsetWidth;y=F.height||A.style.height||A.offsetHeight;E.orgDisplay=A.style.display;D=/^[0-9\.]+(|px)$/i;if(D.test(""+B)){B=Math.max(parseInt(B)+(q.deltaWidth||0),100)}if(D.test(""+y)){y=Math.max(parseInt(y)+(q.deltaHeight||0),100)}q=E.theme.renderUI({targetNode:A,width:B,height:y,deltaWidth:F.delta_width,deltaHeight:F.delta_height});E.editorContainer=q.editorContainer}if(document.domain&&location.hostname!=document.domain){j.relaxedDomain=document.domain}n.setStyles(q.sizeContainer||q.editorContainer,{width:B,height:y});y=(q.iframeHeight||y)+(typeof(y)=="number"?(q.deltaHeight||0):"");if(y<100){y=100}E.iframeHTML=F.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(F.document_base_url!=j.documentBaseURL){E.iframeHTML+='<base href="'+E.documentBaseURI.getURI()+'" />'}E.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(j.relaxedDomain){E.iframeHTML+='<script type="text/javascript">document.domain = "'+j.relaxedDomain+'";<\/script>'}x=F.body_id||"tinymce";if(x.indexOf("=")!=-1){x=E.getParam("body_id","","hash");x=x[E.id]||x}z=F.body_class||"";if(z.indexOf("=")!=-1){z=E.getParam("body_class","","hash");z=z[E.id]||""}E.iframeHTML+='</head><body id="'+x+'" class="mceContentBody '+z+'"></body></html>';if(j.relaxedDomain){if(d||(j.isOpera&&parseFloat(opera.version())>=9.5)){C='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+E.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}else{if(j.isOpera){C='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()'}}}r=n.add(q.iframeContainer,"iframe",{id:E.id+"_ifr",src:C||'javascript:""',frameBorder:"0",title:F.aria_label,style:{width:"100%",height:y}});E.contentAreaContainer=q.iframeContainer;n.get(q.editorContainer).style.display=E.orgDisplay;n.get(E.id).style.display="none";n.setAttrib(E.id,"aria-hidden",true);if(!d||!j.relaxedDomain){E.setupIframe()}A=r=q=null},setupIframe:function(){var z=this,A=z.settings,q=n.get(z.id),v=z.getDoc(),p,x;if(!d||!j.relaxedDomain){v.open();v.write(z.iframeHTML);v.close()}if(!d){try{if(!A.readonly){v.designMode="On"}}catch(u){}}if(d){x=z.getBody();n.hide(x);if(!A.readonly){x.contentEditable=true}n.show(x)}z.dom=new j.dom.DOMUtils(z.getDoc(),{keep_values:true,url_converter:z.convertURL,url_converter_scope:z,hex_colors:A.force_hex_style_colors,class_filter:A.class_filter,update_styles:1,fix_ie_paragraphs:1,valid_styles:A.valid_styles});z.schema=new j.dom.Schema();z.serializer=new j.dom.Serializer(c(A,{valid_elements:A.verify_html===false?"*[*]":A.valid_elements,dom:z.dom,schema:z.schema}));z.selection=new j.dom.Selection(z.dom,z.getWin(),z.serializer);z.formatter=new j.Formatter(this);z.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b"}],italic:[{inline:"em"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"u"}],forecolor:{inline:"span",styles:{color:"%value"}},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"}},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});i("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(s){z.formatter.register(s,{block:s,remove:"all"})});z.formatter.register(z.settings.formats);z.undoManager=new j.UndoManager(z);z.undoManager.onAdd.add(function(B,s){if(!s.initial){return z.onChange.dispatch(z,s,B)}});z.undoManager.onUndo.add(function(B,s){return z.onUndo.dispatch(z,s,B)});z.undoManager.onRedo.add(function(B,s){return z.onRedo.dispatch(z,s,B)});z.forceBlocks=new j.ForceBlocks(z,{forced_root_block:A.forced_root_block});z.editorCommands=new j.EditorCommands(z);z.serializer.onPreProcess.add(function(s,B){return z.onPreProcess.dispatch(z,B,s)});z.serializer.onPostProcess.add(function(s,B){return z.onPostProcess.dispatch(z,B,s)});z.onPreInit.dispatch(z);if(!A.gecko_spellcheck){z.getBody().spellcheck=0}if(!A.readonly){z._addEvents()}z.controlManager.onPostRender.dispatch(z,z.controlManager);z.onPostRender.dispatch(z);if(A.directionality){z.getBody().dir=A.directionality}if(A.nowrap){z.getBody().style.whiteSpace="nowrap"}if(A.custom_elements){function y(s,B){i(a(A.custom_elements),function(C){var D;if(C.indexOf("~")===0){C=C.substring(1);D="span"}else{D="div"}B.content=B.content.replace(new RegExp("<("+C+")([^>]*)>","g"),"<"+D+' _mce_name="$1"$2>');B.content=B.content.replace(new RegExp("</("+C+")>","g"),"</"+D+">")})}z.onBeforeSetContent.add(y);z.onPostProcess.add(function(s,B){if(B.set){y(s,B)}})}if(A.handle_node_change_callback){z.onNodeChange.add(function(B,s,C){z.execCallback("handle_node_change_callback",z.id,C,-1,-1,true,z.selection.isCollapsed())})}if(A.save_callback){z.onSaveContent.add(function(s,C){var B=z.execCallback("save_callback",z.id,C.content,z.getBody());if(B){C.content=B}})}if(A.onchange_callback){z.onChange.add(function(B,s){z.execCallback("onchange_callback",z,s)})}if(A.convert_newlines_to_brs){z.onBeforeSetContent.add(function(s,B){if(B.initial){B.content=B.content.replace(/\r?\n/g,"<br />")}})}if(A.fix_nesting&&d){z.onBeforeSetContent.add(function(s,B){B.content=z._fixNesting(B.content)})}if(A.preformatted){z.onPostProcess.add(function(s,B){B.content=B.content.replace(/^\s*<pre.*?>/,"");B.content=B.content.replace(/<\/pre>\s*$/,"");if(B.set){B.content='<pre class="mceItemHidden">'+B.content+"</pre>"}})}if(A.verify_css_classes){z.serializer.attribValueFilter=function(E,C){var D,B;if(E=="class"){if(!z.classesRE){B=z.dom.getClasses();if(B.length>0){D="";i(B,function(s){D+=(D?"|":"")+s["class"]});z.classesRE=new RegExp("("+D+")","gi")}}return !z.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(C)||z.classesRE.test(C)?C:""}return C}}if(A.cleanup_callback){z.onBeforeSetContent.add(function(s,B){B.content=z.execCallback("cleanup_callback","insert_to_editor",B.content,B)});z.onPreProcess.add(function(s,B){if(B.set){z.execCallback("cleanup_callback","insert_to_editor_dom",B.node,B)}if(B.get){z.execCallback("cleanup_callback","get_from_editor_dom",B.node,B)}});z.onPostProcess.add(function(s,B){if(B.set){B.content=z.execCallback("cleanup_callback","insert_to_editor",B.content,B)}if(B.get){B.content=z.execCallback("cleanup_callback","get_from_editor",B.content,B)}})}if(A.save_callback){z.onGetContent.add(function(s,B){if(B.save){B.content=z.execCallback("save_callback",z.id,B.content,z.getBody())}})}if(A.handle_event_callback){z.onEvent.add(function(s,B,C){if(z.execCallback("handle_event_callback",B,s,C)===false){l.cancel(B)}})}z.onSetContent.add(function(){z.addVisual(z.getBody())});if(A.padd_empty_editor){z.onPostProcess.add(function(s,B){B.content=B.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(b){function r(s,B){i(s.dom.select("a"),function(D){var C=D.parentNode;if(s.dom.isBlock(C)&&C.lastChild===D){s.dom.add(C,"br",{_mce_bogus:1})}})}z.onExecCommand.add(function(s,B){if(B==="CreateLink"){r(s)}});z.onSetContent.add(z.selection.onSetContent.add(r));if(!A.readonly){try{v.designMode="Off";v.designMode="On"}catch(u){}}}setTimeout(function(){if(z.removed){return}z.load({initial:true,format:(A.cleanup_on_startup?"html":"raw")});z.startContent=z.getContent({format:"raw"});z.initialized=true;z.onInit.dispatch(z);z.execCallback("setupcontent_callback",z.id,z.getBody(),z.getDoc());z.execCallback("init_instance_callback",z);z.focus(true);z.nodeChanged({initial:1});if(A.content_css){j.each(a(A.content_css),function(s){z.dom.loadCSS(z.documentBaseURI.toAbsolute(s))})}if(A.auto_focus){setTimeout(function(){var s=j.get(A.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getWin().focus()},100)}},1);q=null},focus:function(s){var x,q=this,v=q.settings.content_editable,r,p,u=q.getDoc();if(!s){r=q.selection.getRng();if(r.item){p=r.item(0)}if(!v){if(q.getWin().frameElement){q.getWin().frameElement.focus()}q.getWin().focus()}if(p&&p.ownerDocument==u){r=u.body.createControlRange();r.addElement(p);r.select()}}if(j.activeEditor!=q){if((x=j.activeEditor)!=null){x.onDeactivate.dispatch(x,q)}q.onActivate.dispatch(q,x)}j._setActive(q)},execCallback:function(u){var p=this,r=p.settings[u],q;if(!r){return}if(p.callbackLookup&&(q=p.callbackLookup[u])){r=q.func;q=q.scope}if(g(r,"string")){q=r.replace(/\.\w+$/,"");q=q?j.resolve(q):0;r=j.resolve(r);p.callbackLookup=p.callbackLookup||{};p.callbackLookup[u]={func:r,scope:q}}return r.apply(q||p,Array.prototype.slice.call(arguments,1))},translate:function(p){var r=this.settings.language||"en",q=j.i18n;if(!p){return""}return q[r+"."+p]||p.replace(/{\#([^}]+)\}/g,function(u,s){return q[r+"."+s]||"{#"+s+"}"})},getLang:function(q,p){return j.i18n[(this.settings.language||"en")+"."+q]||(g(p)?p:"{#"+q+"}")},getParam:function(x,r,p){var s=j.trim,q=g(this.settings[x])?this.settings[x]:r,u;if(p==="hash"){u={};if(g(q,"string")){i(q.indexOf("=")>0?q.split(/[;,](?![^=;,]*(?:[;,]|$))/):q.split(","),function(y){y=y.split("=");if(y.length>1){u[s(y[0])]=s(y[1])}else{u[s(y[0])]=s(y)}})}else{u=q}return u}return q},nodeChanged:function(r){var p=this,q=p.selection,u=(d?q.getNode():q.getStart())||p.getBody();if(p.initialized){r=r||{};u=d&&u.ownerDocument!=p.getDoc()?p.getBody():u;r.parents=[];p.dom.getParent(u,function(s){if(s.nodeName=="BODY"){return true}r.parents.push(s)});p.onNodeChange.dispatch(p,r?r.controlManager||p.controlManager:p.controlManager,u,q.isCollapsed(),r)}},addButton:function(r,q){var p=this;p.buttons=p.buttons||{};p.buttons[r]=q},addCommand:function(r,q,p){this.execCommands[r]={func:q,scope:p||this}},addQueryStateHandler:function(r,q,p){this.queryStateCommands[r]={func:q,scope:p||this}},addQueryValueHandler:function(r,q,p){this.queryValueCommands[r]={func:q,scope:p||this}},addShortcut:function(r,u,p,s){var q=this,v;if(!q.settings.custom_shortcuts){return false}q.shortcuts=q.shortcuts||{};if(g(p,"string")){v=p;p=function(){q.execCommand(v,false,null)}}if(g(p,"object")){v=p;p=function(){q.execCommand(v[0],v[1],v[2])}}i(a(r),function(x){var y={func:p,scope:s||this,desc:u,alt:false,ctrl:false,shift:false};i(a(x,"+"),function(z){switch(z){case"alt":case"ctrl":case"shift":y[z]=true;break;default:y.charCode=z.charCodeAt(0);y.keyCode=z.toUpperCase().charCodeAt(0)}});q.shortcuts[(y.ctrl?"ctrl":"")+","+(y.alt?"alt":"")+","+(y.shift?"shift":"")+","+y.keyCode]=y});return true},execCommand:function(x,v,z,p){var r=this,u=0,y,q;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(x)&&(!p||!p.skip_focus)){r.focus()}y={};r.onBeforeExecCommand.dispatch(r,x,v,z,y);if(y.terminate){return false}if(r.execCallback("execcommand_callback",r.id,r.selection.getNode(),x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(y=r.execCommands[x]){q=y.func.call(y.scope,v,z);if(q!==true){r.onExecCommand.dispatch(r,x,v,z,p);return q}}i(r.plugins,function(s){if(s.execCommand&&s.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);u=1;return false}});if(u){return true}if(r.theme&&r.theme.execCommand&&r.theme.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(j.GlobalCommands.execCommand(r,x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(r.editorCommands.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}r.getDoc().execCommand(x,v,z);r.onExecCommand.dispatch(r,x,v,z,p)},queryCommandState:function(u){var q=this,v,r;if(q._isHidden()){return}if(v=q.queryStateCommands[u]){r=v.func.call(v.scope);if(r!==true){return r}}v=q.editorCommands.queryCommandState(u);if(v!==-1){return v}try{return this.getDoc().queryCommandState(u)}catch(p){}},queryCommandValue:function(v){var q=this,u,r;if(q._isHidden()){return}if(u=q.queryValueCommands[v]){r=u.func.call(u.scope);if(r!==true){return r}}u=q.editorCommands.queryCommandValue(v);if(g(u)){return u}try{return this.getDoc().queryCommandValue(v)}catch(p){}},show:function(){var p=this;n.show(p.getContainer());n.hide(p.id);p.load()},hide:function(){var p=this,q=p.getDoc();if(d&&q){q.execCommand("SelectAll")}p.save();n.hide(p.getContainer());n.setStyle(p.id,"display",p.orgDisplay)},isHidden:function(){return !n.isHidden(this.id)},setProgressState:function(p,q,r){this.onSetProgressState.dispatch(this,p,q,r);return p},load:function(s){var p=this,r=p.getElement(),q;if(r){s=s||{};s.load=true;q=p.setContent(g(r.value)?r.value:r.innerHTML,s);s.element=r;if(!s.no_events){p.onLoadContent.dispatch(p,s)}s.element=r=null;return q}},save:function(u){var p=this,s=p.getElement(),q,r;if(!s||!p.initialized){return}u=u||{};u.save=true;if(!u.no_events){p.undoManager.typing=0;p.undoManager.add()}u.element=s;q=u.content=p.getContent(u);if(!u.no_events){p.onSaveContent.dispatch(p,u)}q=u.content;if(!/TEXTAREA|INPUT/i.test(s.nodeName)){s.innerHTML=q;if(r=n.getParent(p.id,"form")){i(r.elements,function(v){if(v.name==p.id){v.value=q;return false}})}}else{s.value=q}u.element=s=null;return q},setContent:function(q,r){var p=this;r=r||{};r.format=r.format||"html";r.set=true;r.content=q;if(!r.no_events){p.onBeforeSetContent.dispatch(p,r)}if(!j.isIE&&(q.length===0||/^\s+$/.test(q))){r.content=p.dom.setHTML(p.getBody(),'<br _mce_bogus="1" />');r.format="raw"}r.content=p.dom.setHTML(p.getBody(),j.trim(r.content));if(r.format!="raw"&&p.settings.cleanup){r.getInner=true;r.content=p.dom.setHTML(p.getBody(),p.serializer.serialize(p.getBody(),r))}if(!r.no_events){p.onSetContent.dispatch(p,r)}return r.content},getContent:function(r){var p=this,q;r=r||{};r.format=r.format||"html";r.get=true;if(!r.no_events){p.onBeforeGetContent.dispatch(p,r)}if(r.format!="raw"&&p.settings.cleanup){r.getInner=true;q=p.serializer.serialize(p.getBody(),r)}else{q=p.getBody().innerHTML}q=q.replace(/^\s*|\s*$/g,"");r.content=q;if(!r.no_events){p.onGetContent.dispatch(p,r)}return r.content},isDirty:function(){var p=this;return j.trim(p.startContent)!=j.trim(p.getContent({format:"raw",no_events:1}))&&!p.isNotDirty},getContainer:function(){var p=this;if(!p.container){p.container=n.get(p.editorContainer||p.id+"_parent")}return p.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return n.get(this.settings.content_element||this.id)},getWin:function(){var p=this,q;if(!p.contentWindow){q=n.get(p.id+"_ifr");if(q){p.contentWindow=q.contentWindow}}return p.contentWindow},getDoc:function(){var q=this,p;if(!q.contentDocument){p=q.getWin();if(p){q.contentDocument=p.document}}return q.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(p,x,v){var q=this,r=q.settings;if(r.urlconverter_callback){return q.execCallback("urlconverter_callback",p,v,true,x)}if(!r.convert_urls||(v&&v.nodeName=="LINK")||p.indexOf("file:")===0){return p}if(r.relative_urls){return q.documentBaseURI.toRelative(p)}p=q.documentBaseURI.toAbsolute(p,r.remove_script_host);return p},addVisual:function(r){var p=this,q=p.settings;r=r||p.getBody();if(!g(p.hasVisual)){p.hasVisual=q.visual}i(p.dom.select("table,a",r),function(u){var s;switch(u.nodeName){case"TABLE":s=p.dom.getAttrib(u,"border");if(!s||s=="0"){if(p.hasVisual){p.dom.addClass(u,q.visual_table_class)}else{p.dom.removeClass(u,q.visual_table_class)}}return;case"A":s=p.dom.getAttrib(u,"name");if(s){if(p.hasVisual){p.dom.addClass(u,"mceItemAnchor")}else{p.dom.removeClass(u,"mceItemAnchor")}}return}});p.onVisualAid.dispatch(p,r,p.hasVisual)},remove:function(){var p=this,q=p.getContainer();p.removed=1;p.hide();p.execCallback("remove_instance_callback",p);p.onRemove.dispatch(p);p.onExecCommand.listeners=[];j.remove(p);n.remove(q)},destroy:function(q){var p=this;if(p.destroyed){return}if(!q){j.removeUnload(p.destroy);tinyMCE.onBeforeUnload.remove(p._beforeUnload);if(p.theme&&p.theme.destroy){p.theme.destroy()}p.controlManager.destroy();p.selection.destroy();p.dom.destroy();if(!p.settings.content_editable){l.clear(p.getWin());l.clear(p.getDoc())}l.clear(p.getBody());l.clear(p.formElement)}if(p.formElement){p.formElement.submit=p.formElement._mceOldSubmit;p.formElement._mceOldSubmit=null}p.contentAreaContainer=p.formElement=p.container=p.settings.content_element=p.bodyElement=p.contentDocument=p.contentWindow=null;if(p.selection){p.selection=p.selection.win=p.selection.dom=p.selection.dom.doc=null}p.destroyed=1},_addEvents:function(){var A=this,r,C=A.settings,q=A.dom,v={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function p(D,E){var s=D.type;if(A.removed){return}if(A.onEvent.dispatch(A,D,E)!==false){A[v[D.fakeType||D.type]].dispatch(A,D,E)}}i(v,function(D,s){switch(s){case"contextmenu":if(j.isOpera){q.bind(A.getBody(),"mousedown",function(E){if(E.ctrlKey){E.fakeType="contextmenu";p(E)}})}else{q.bind(b?A.getDoc():A.getBody(),s,p)}break;case"paste":q.bind(A.getBody(),s,function(E){p(E)});break;case"submit":case"reset":q.bind(A.getElement().form||n.getParent(A.id,"form"),s,p);break;default:q.bind(C.content_editable?A.getBody():A.getDoc(),s,p)}});q.bind(C.content_editable?A.getBody():(b?A.getDoc():A.getWin()),"focus",function(s){A.focus(true)});if(j.isGecko){q.bind(A.getDoc(),"DOMNodeInserted",function(D){var s;D=D.target;if(D.nodeType===1&&D.nodeName==="IMG"&&(s=D.getAttribute("_mce_src"))){D.src=A.documentBaseURI.toAbsolute(s)}})}if(b){function u(){var E=this,G=E.getDoc(),F=E.settings;if(b&&!F.readonly){if(E._isHidden()){try{if(!F.content_editable){G.designMode="On"}}catch(D){}}try{G.execCommand("styleWithCSS",0,false)}catch(D){if(!E._isHidden()){try{G.execCommand("useCSS",0,true)}catch(D){}}}if(!F.table_inline_editing){try{G.execCommand("enableInlineTableEditing",false,false)}catch(D){}}if(!F.object_resizing){try{G.execCommand("enableObjectResizing",false,false)}catch(D){}}}}A.onBeforeExecCommand.add(u);A.onMouseDown.add(u)}if(j.isWebKit){A.onClick.add(function(s,D){D=D.target;if(D.nodeName=="IMG"||(D.nodeName=="A"&&q.hasClass(D,"mceItemAnchor"))){A.selection.getSel().setBaseAndExtent(D,0,D,1);A.nodeChanged()}})}A.onMouseUp.add(A.nodeChanged);A.onKeyUp.add(function(s,D){var E=D.keyCode;if((E>=33&&E<=36)||(E>=37&&E<=40)||E==13||E==45||E==46||E==8||(j.isMac&&(E==91||E==93))||D.ctrlKey){A.nodeChanged()}});A.onReset.add(function(){A.setContent(A.startContent,{format:"raw"})});if(C.custom_shortcuts){if(C.custom_undo_redo_keyboard_shortcuts){A.addShortcut("ctrl+z",A.getLang("undo_desc"),"Undo");A.addShortcut("ctrl+y",A.getLang("redo_desc"),"Redo")}A.addShortcut("ctrl+b",A.getLang("bold_desc"),"Bold");A.addShortcut("ctrl+i",A.getLang("italic_desc"),"Italic");A.addShortcut("ctrl+u",A.getLang("underline_desc"),"Underline");for(r=1;r<=6;r++){A.addShortcut("ctrl+"+r,"",["FormatBlock",false,"h"+r])}A.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);A.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);A.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function x(D){var s=null;if(!D.altKey&&!D.ctrlKey&&!D.metaKey){return s}i(A.shortcuts,function(E){if(j.isMac&&E.ctrl!=D.metaKey){return}else{if(!j.isMac&&E.ctrl!=D.ctrlKey){return}}if(E.alt!=D.altKey){return}if(E.shift!=D.shiftKey){return}if(D.keyCode==E.keyCode||(D.charCode&&D.charCode==E.charCode)){s=E;return false}});return s}A.onKeyUp.add(function(s,D){var E=x(D);if(E){return l.cancel(D)}});A.onKeyPress.add(function(s,D){var E=x(D);if(E){return l.cancel(D)}});A.onKeyDown.add(function(s,D){var E=x(D);if(E){E.func.call(E.scope);return l.cancel(D)}})}if(j.isIE){q.bind(A.getDoc(),"controlselect",function(E){var D=A.resizeInfo,s;E=E.target;if(E.nodeName!=="IMG"){return}if(D){q.unbind(D.node,D.ev,D.cb)}if(!q.hasClass(E,"mceItemNoResize")){ev="resizeend";s=q.bind(E,ev,function(G){var F;G=G.target;if(F=q.getStyle(G,"width")){q.setAttrib(G,"width",F.replace(/[^0-9%]+/g,""));q.setStyle(G,"width","")}if(F=q.getStyle(G,"height")){q.setAttrib(G,"height",F.replace(/[^0-9%]+/g,""));q.setStyle(G,"height","")}})}else{ev="resizestart";s=q.bind(E,"resizestart",l.cancel,l)}D=A.resizeInfo={node:E,ev:ev,cb:s}});A.onKeyDown.add(function(s,D){switch(D.keyCode){case 8:if(A.selection.getRng().item){s.dom.remove(A.selection.getRng().item(0));return l.cancel(D)}}})}if(j.isOpera){A.onClick.add(function(s,D){l.prevent(D)})}if(C.custom_undo_redo){function B(){A.undoManager.typing=0;A.undoManager.add()}q.bind(A.getDoc(),"focusout",function(s){if(!A.removed&&A.undoManager.typing){B()}});A.dom.bind(A.dom.getRoot(),"dragend",function(s){B()});A.onKeyUp.add(function(s,D){if((D.keyCode>=33&&D.keyCode<=36)||(D.keyCode>=37&&D.keyCode<=40)||D.keyCode==13||D.keyCode==45||D.ctrlKey){B()}});A.onKeyDown.add(function(E,H){var s,D,G;if(d&&H.keyCode==46){s=A.selection.getRng();if(s.parentElement){B();D=s.parentElement();if(H.ctrlKey){s.moveEnd("word",1);s.select()}A.selection.getSel().clear();if(s.parentElement()==D){G=A.selection.getBookmark();try{D.innerHTML=D.innerHTML}catch(F){}A.selection.moveToBookmark(G)}B();H.preventDefault();return}}if(H.keyCode==13&&A.undoManager.typing){B();A.undoManager.typing=1}if((H.keyCode>=33&&H.keyCode<=36)||(H.keyCode>=37&&H.keyCode<=40)||H.keyCode==45){if(A.undoManager.typing){B()}return}if(!A.undoManager.typing){A.undoManager.add();A.undoManager.typing=1}});A.onMouseDown.add(function(){if(A.undoManager.typing){B()}})}if(j.isGecko){function y(){A.undoManager.typing=0;A.undoManager.add();var s=A.dom.getAttribs(A.selection.getStart().cloneNode(false));return function(){var D=A.selection.getStart();A.dom.removeAllAttribs(D);i(s,function(E){D.setAttributeNode(E.cloneNode(true))});A.undoManager.typing=0;A.undoManager.add()}}function z(){var D=A.selection;return !D.isCollapsed()&&D.getStart()!=D.getEnd()}A.onKeyPress.add(function(s,E){if((E.keyCode==8||E.keyCode==46)&&z()){var D=y();A.getDoc().execCommand("delete",false,null);D();return l.cancel(E)}});A.dom.bind(A.getDoc(),"cut",function(D){if(z()){var s=y();A.onKeyUp.addToTop(l.cancel,l);setTimeout(function(){s();A.onKeyUp.remove(l.cancel,l)},0)}})}},_isHidden:function(){var p;if(!b){return 0}p=this.selection.getSel();return(!p||!p.rangeCount||p.rangeCount==0)},_fixNesting:function(q){var r=[],p;q=q.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(u,s,x){var v;if(s==="/"){if(!r.length){return""}if(x!==r[r.length-1].tag){for(p=r.length-1;p>=0;p--){if(r[p].tag===x){r[p].close=1;break}}return""}else{r.pop();if(r.length&&r[r.length-1].close){u=u+"</"+r[r.length-1].tag+">";r.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(x)){return u}if(/\/>$/.test(u)){return u}r.push({tag:x})}return u});for(p=r.length-1;p>=0;p--){q+="</"+r[p].tag+">"}return q}})})(tinymce);(function(a){var d=a.each,e,b=true,c=false;a.EditorCommands=function(f){var i=f.dom,u=f.selection,k={state:{},exec:{},value:{}},g=f.settings,m;function q(z,y,x){var v;z=z.toLowerCase();if(v=k.exec[z]){v(z,y,x);return b}return c}function h(x){var v;x=x.toLowerCase();if(v=k.state[x]){return v(x)}return -1}function l(x){var v;x=x.toLowerCase();if(v=k.value[x]){return v(x)}return c}function p(v,x){x=x||"exec";d(v,function(y,z){d(z.toLowerCase().split(","),function(A){k[x][A]=y})})}a.extend(this,{execCommand:q,queryCommandState:h,queryCommandValue:l,addCommands:p});function o(y,x,v){if(x===e){x=c}if(v===e){v=null}return f.getDoc().execCommand(y,x,v)}function s(v){return f.formatter.match(v)}function r(v,x){f.formatter.toggle(v,x?{value:x}:e)}function j(v){m=u.getBookmark(v)}function n(){u.moveToBookmark(m)}p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(z){var y=f.getDoc(),x;try{o(z)}catch(v){x=b}if(x||!y.queryCommandSupported(z)){if(a.isGecko){f.windowManager.confirm(f.getLang("clipboard_msg"),function(A){if(A){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{f.windowManager.alert(f.getLang("clipboard_no_support"))}}},unlink:function(v){if(u.isCollapsed()){u.select(u.getNode())}o(v);u.collapse(c)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){var x=v.substring(7);d("left,center,right,full".split(","),function(y){if(x!=y){f.formatter.remove("align"+y)}});r("align"+x);q("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(y){var v,x;o(y);v=i.getParent(u.getNode(),"ol,ul");if(v){x=v.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(x.nodeName)){j();i.split(x,v);n()}}},"Bold,Italic,Underline,Strikethrough":function(v){r(v)},"ForeColor,HiliteColor,FontName":function(y,x,v){r(y,v)},FontSize:function(A,y,x){var v,z;if(x>=1&&x<=7){z=a.explode(g.font_size_style_values);v=a.explode(g.font_size_classes);if(v){x=v[x-1]||x}else{x=z[x-1]||x}}r(A,x)},RemoveFormat:function(v){f.formatter.remove(v)},mceBlockQuote:function(v){r("blockquote")},FormatBlock:function(y,x,v){return r(v||"p")},mceCleanup:function(){var v=u.getBookmark();f.setContent(f.getContent({cleanup:b}),{cleanup:b});u.moveToBookmark(v)},mceRemoveNode:function(z,y,x){var v=x||u.getNode();if(v!=f.getBody()){j();f.dom.remove(v,b);n()}},mceSelectNodeDepth:function(z,y,x){var v=0;i.getParent(u.getNode(),function(A){if(A.nodeType==1&&v++==x){u.select(A);return c}},f.getBody())},mceSelectNode:function(y,x,v){u.select(v)},mceInsertContent:function(y,x,v){u.setContent(v)},mceInsertRawHTML:function(y,x,v){u.setContent("tiny_mce_marker");f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return v}))},mceSetContent:function(y,x,v){f.setContent(v)},"Indent,Outdent":function(z){var x,v,y;x=g.indentation;v=/[a-z%]+$/i.exec(x);x=parseInt(x);if(!h("InsertUnorderedList")&&!h("InsertOrderedList")){d(u.getSelectedBlocks(),function(A){if(z=="outdent"){y=Math.max(0,parseInt(A.style.paddingLeft||0)-x);i.setStyle(A,"paddingLeft",y?y+v:"")}else{i.setStyle(A,"paddingLeft",(parseInt(A.style.paddingLeft||0)+x)+v)}})}else{o(z)}},mceRepaint:function(){var x;if(a.isGecko){try{j(b);if(u.getSel()){u.getSel().selectAllChildren(f.getBody())}u.collapse(b);n()}catch(v){}}},mceToggleFormat:function(y,x,v){f.formatter.toggle(v)},InsertHorizontalRule:function(){var y,v,x;u.setContent('<hr id="_mce_inserted_hr" />');y=i.get("_mce_inserted_hr");v=y.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(v.nodeName)){i.split(v,y)}i.removeAllAttribs(y);if(y.nextSibling){x=i.createRng();x.setStart(y.nextSibling,0);x.setEnd(y.nextSibling,0);u.setRng(x)}else{u.moveAfterNode(y)}},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual;f.addVisual()},mceReplaceContent:function(y,x,v){u.setContent(v.replace(/\{\$selection\}/g,u.getContent({format:"text"})))},mceInsertLink:function(z,y,x){var v=i.getParent(u.getNode(),"a");if(a.is(x,"string")){x={href:x}}x.href=x.href.replace(" ","%20");if(!v){o("CreateLink",c,"javascript:mctmp(0);");d(i.select("a[href=javascript:mctmp(0);]"),function(A){i.setAttribs(A,x)})}else{if(x.href){i.setAttribs(v,x)}else{f.dom.remove(v,b)}}},selectAll:function(){var x=i.getRoot(),v=i.createRng();v.setStart(x,0);v.setEnd(x,x.childNodes.length);f.selection.setRng(v)}});p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){return s("align"+v.substring(7))},"Bold,Italic,Underline,Strikethrough":function(v){return s(v)},mceBlockQuote:function(){return s("blockquote")},Outdent:function(){var v;if(g.inline_styles){if((v=i.getParent(u.getStart(),i.isBlock))&&parseInt(v.style.paddingLeft)>0){return b}if((v=i.getParent(u.getEnd(),i.isBlock))&&parseInt(v.style.paddingLeft)>0){return b}}return h("InsertUnorderedList")||h("InsertOrderedList")||(!g.inline_styles&&!!i.getParent(u.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(v){return i.getParent(u.getNode(),v=="insertunorderedlist"?"UL":"OL")}},"state");p({"FontSize,FontName":function(y){var x=0,v;if(v=i.getParent(u.getNode(),"span")){if(y=="fontsize"){x=v.style.fontSize}else{x=v.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return x}},"value");if(g.custom_undo_redo){p({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(d){var c,e=0,g=[];function f(){return b.trim(d.getContent({format:"raw",no_events:1}))}return c={typing:0,onAdd:new a(c),onUndo:new a(c),onRedo:new a(c),add:function(l){var h,j=d.settings,k;l=l||{};l.content=f();k=g[e];if(k&&k.content==l.content){if(e>0||g.length==1){return null}}if(j.custom_undo_redo_levels){if(g.length>j.custom_undo_redo_levels){for(h=0;h<g.length-1;h++){g[h]=g[h+1]}g.length--;e=g.length}}l.bookmark=d.selection.getBookmark(2,true);if(e<g.length-1){if(e==0){g=[]}else{g.length=e+1}}g.push(l);e=g.length-1;c.onAdd.dispatch(c,l);d.isNotDirty=0;return l},undo:function(){var j,h;if(c.typing){c.add();c.typing=0}if(e>0){j=g[--e];d.setContent(j.content,{format:"raw"});d.selection.moveToBookmark(j.bookmark);c.onUndo.dispatch(c,j)}return j},redo:function(){var h;if(e<g.length-1){h=g[++e];d.setContent(h.content,{format:"raw"});d.selection.moveToBookmark(h.bookmark);c.onRedo.dispatch(c,h)}return h},clear:function(){g=[];e=c.typing=0},hasUndo:function(){return e>0||c.typing},hasRedo:function(){return e<g.length-1}}}})(tinymce);(function(l){var m=l.dom.Event,d=l.isIE,a=l.isGecko,c=l.isOpera,j=l.each,b=l.extend,e=true,i=false;function k(p){var q,o,n;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(p.nodeName)){if(q){o=p.cloneNode(false);o.appendChild(q);q=o}else{q=n=p.cloneNode(false)}q.removeAttribute("id")}}while(p=p.parentNode);if(q){return{wrapper:q,inner:n}}}function h(o,p){var n=p.ownerDocument.createRange();n.setStart(o.endContainer,o.endOffset);n.setEndAfter(p);return n.cloneContents().textContent.length==0}function g(o){o=o.innerHTML;o=o.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");o=o.replace(/<[^>]+>/g,"");return o.replace(/[ \u00a0\t\r\n]+/g,"")==""}function f(o,r,n){var p,q;if(g(n)){p=r.getParent(n,"ul,ol");if(!r.getParent(p.parentNode,"ul,ol")){r.split(p,n);q=r.create("p",0,'<br _mce_bogus="1" />');r.replace(q,n);o.select(q,1)}return i}return e}l.create("tinymce.ForceBlocks",{ForceBlocks:function(o){var p=this,q=o.settings,r;p.editor=o;p.dom=o.dom;r=(q.forced_root_block||"p").toLowerCase();q.element=r.toUpperCase();o.onPreInit.add(p.setup,p);p.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+r+">","gi");p.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,r),"gi");p.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,r),"gi");p.reNbsp2BR2=new RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,r),"gi");p.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,r),"gi");function n(s,u){if(c){u.content=u.content.replace(p.reOpera,"</"+r+">")}u.content=l._replace(p.rePadd,"<"+r+"$1$2$3$4$5$6>\u00a0</"+r+">",u.content);if(!d&&!c&&u.set){u.content=u.content.replace(p.reNbsp2BR1,"<"+r+"$1$2><br /></"+r+">");u.content=u.content.replace(p.reNbsp2BR2,"<"+r+"$1$2><br /></"+r+">")}else{u.content=l._replace(p.reBR2Nbsp,"<"+r+"$1$2>\u00a0</"+r+">",u.content)}}o.onBeforeSetContent.add(n);o.onPostProcess.add(n);if(q.forced_root_block){o.onInit.add(p.forceRoots,p);o.onSetContent.add(p.forceRoots,p);o.onBeforeGetContent.add(p.forceRoots,p)}},setup:function(){var p=this,o=p.editor,q=o.settings,u=o.dom,n=o.selection;if(q.forced_root_block){o.onBeforeExecCommand.add(p.forceRoots,p);o.onKeyUp.add(p.forceRoots,p);o.onPreProcess.add(p.forceRoots,p)}if(q.force_br_newlines){if(d){o.onKeyPress.add(function(s,v){var x;if(v.keyCode==13&&n.getNode().nodeName!="LI"){n.setContent('<br id="__" /> ',{format:"raw"});x=u.get("__");x.removeAttribute("id");n.select(x);n.collapse();return m.cancel(v)}})}}if(q.force_p_newlines){if(!d){o.onKeyPress.add(function(s,v){if(v.keyCode==13&&!v.shiftKey&&!p.insertPara(v)){m.cancel(v)}})}else{l.addUnload(function(){p._previousFormats=0});o.onKeyPress.add(function(s,v){p._previousFormats=0;if(v.keyCode==13&&!v.shiftKey&&s.selection.isCollapsed()&&q.keep_styles){p._previousFormats=k(s.selection.getStart())}});o.onKeyUp.add(function(x,y){if(y.keyCode==13&&!y.shiftKey){var v=x.selection.getStart(),s=p._previousFormats;if(!v.hasChildNodes()&&s){v=u.getParent(v,u.isBlock);if(v&&v.nodeName!="LI"){v.innerHTML="";if(p._previousFormats){v.appendChild(s.wrapper);s.inner.innerHTML="\uFEFF"}else{v.innerHTML="\uFEFF"}n.select(v,1);x.getDoc().execCommand("Delete",false,null);p._previousFormats=0}}}})}if(a){o.onKeyDown.add(function(s,v){if((v.keyCode==8||v.keyCode==46)&&!v.shiftKey){p.backspaceDelete(v,v.keyCode==8)}})}}if(l.isWebKit){function r(x){var v=n.getRng(),y,A=u.create("div",null," "),z,s=u.getViewPort(x.getWin()).h;v.insertNode(y=u.create("br"));v.setStartAfter(y);v.setEndAfter(y);n.setRng(v);if(n.getSel().focusNode==y.previousSibling){n.select(u.insertAfter(u.doc.createTextNode("\u00a0"),y));n.collapse(e)}u.insertAfter(A,y);z=u.getPos(A).y;u.remove(A);if(z>s){x.getWin().scrollTo(0,z)}}o.onKeyPress.add(function(s,v){if(v.keyCode==13&&(v.shiftKey||(q.force_br_newlines&&!u.getParent(n.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){r(s);m.cancel(v)}})}o.onPreProcess.add(function(s,v){j(u.select("p,h1,h2,h3,h4,h5,h6,div",v.node),function(x){if(g(x)){j(u.select("span,em,strong,b,i",v.node),function(y){if(!y.hasChildNodes()){y.appendChild(s.getDoc().createTextNode("\u00a0"));return i}})}})});if(d){if(q.element!="P"){o.onKeyPress.add(function(s,v){p.lastElm=n.getNode().nodeName});o.onKeyUp.add(function(v,x){var z,y=n.getNode(),s=v.getBody();if(s.childNodes.length===1&&y.nodeName=="P"){y=u.rename(y,q.element);n.select(y);n.collapse();v.nodeChanged()}else{if(x.keyCode==13&&!x.shiftKey&&p.lastElm!="P"){z=u.getParent(y,"p");if(z){u.rename(z,q.element);v.nodeChanged()}}}})}}},find:function(v,q,r){var p=this.editor,o=p.getDoc().createTreeWalker(v,4,null,i),u=-1;while(v=o.nextNode()){u++;if(q==0&&v==r){return u}if(q==1&&u==r){return v}}return -1},forceRoots:function(x,I){var z=this,x=z.editor,N=x.getBody(),J=x.getDoc(),P=x.selection,A=P.getSel(),B=P.getRng(),M=-2,v,G,o,q,L=-16777215;var K,p,O,F,C,u=N.childNodes,E,D,y;for(E=u.length-1;E>=0;E--){K=u[E];if(K.nodeType===1&&K.getAttribute("_mce_type")){p=null;continue}if(K.nodeType===3||(!z.dom.isBlock(K)&&K.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(K.nodeName))){if(!p){if(K.nodeType!=3||/[^\s]/g.test(K.nodeValue)){if(M==-2&&B){if(!d||B.setStart){if(B.startContainer.nodeType==1&&(D=B.startContainer.childNodes[B.startOffset])&&D.nodeType==1){y=D.getAttribute("id");D.setAttribute("id","__mce")}else{if(x.dom.getParent(B.startContainer,function(n){return n===N})){G=B.startOffset;o=B.endOffset;M=z.find(N,0,B.startContainer);v=z.find(N,0,B.endContainer)}}}else{if(B.item){q=J.body.createTextRange();q.moveToElementText(B.item(0));B=q}q=J.body.createTextRange();q.moveToElementText(N);q.collapse(1);O=q.move("character",L)*-1;q=B.duplicate();q.collapse(1);F=q.move("character",L)*-1;q=B.duplicate();q.collapse(0);C=(q.move("character",L)*-1)-F;M=F-O;v=C}}p=x.dom.create(x.settings.forced_root_block);K.parentNode.replaceChild(p,K);p.appendChild(K)}}else{if(p.hasChildNodes()){p.insertBefore(K,p.firstChild)}else{p.appendChild(K)}}}else{p=null}}if(M!=-2){if(!d||B.setStart){p=N.getElementsByTagName(x.settings.element)[0];B=J.createRange();if(M!=-1){B.setStart(z.find(N,1,M),G)}else{B.setStart(p,0)}if(v!=-1){B.setEnd(z.find(N,1,v),o)}else{B.setEnd(p,0)}if(A){A.removeAllRanges();A.addRange(B)}}else{try{B=A.createRange();B.moveToElementText(N);B.collapse(1);B.moveStart("character",M);B.moveEnd("character",v);B.select()}catch(H){}}}else{if((!d||B.setStart)&&(D=x.dom.get("__mce"))){if(y){D.setAttribute("id",y)}else{D.removeAttribute("id")}B=J.createRange();B.setStartBefore(D);B.setEndBefore(D);P.setRng(B)}}},getParentBlock:function(p){var o=this.dom;return o.getParent(p,o.isBlock)},insertPara:function(S){var G=this,x=G.editor,P=x.dom,T=x.getDoc(),X=x.settings,H=x.selection.getSel(),I=H.getRangeAt(0),W=T.body;var L,M,J,Q,O,u,p,v,A,o,E,V,q,z,K,N=P.getViewPort(x.getWin()),D,F,C;L=T.createRange();L.setStart(H.anchorNode,H.anchorOffset);L.collapse(e);M=T.createRange();M.setStart(H.focusNode,H.focusOffset);M.collapse(e);J=L.compareBoundaryPoints(L.START_TO_END,M)<0;Q=J?H.anchorNode:H.focusNode;O=J?H.anchorOffset:H.focusOffset;u=J?H.focusNode:H.anchorNode;p=J?H.focusOffset:H.anchorOffset;if(Q===u&&/^(TD|TH)$/.test(Q.nodeName)){if(Q.firstChild.nodeName=="BR"){P.remove(Q.firstChild)}if(Q.childNodes.length==0){x.dom.add(Q,X.element,null,"<br />");V=x.dom.add(Q,X.element,null,"<br />")}else{K=Q.innerHTML;Q.innerHTML="";x.dom.add(Q,X.element,null,K);V=x.dom.add(Q,X.element,null,"<br />")}I=T.createRange();I.selectNodeContents(V);I.collapse(1);x.selection.setRng(I);return i}if(Q==W&&u==W&&W.firstChild&&x.dom.isBlock(W.firstChild)){Q=u=Q.firstChild;O=p=0;L=T.createRange();L.setStart(Q,0);M=T.createRange();M.setStart(u,0)}Q=Q.nodeName=="HTML"?T.body:Q;Q=Q.nodeName=="BODY"?Q.firstChild:Q;u=u.nodeName=="HTML"?T.body:u;u=u.nodeName=="BODY"?u.firstChild:u;v=G.getParentBlock(Q);A=G.getParentBlock(u);o=v?v.nodeName:X.element;if(K=G.dom.getParent(v,"li,pre")){if(K.nodeName=="LI"){return f(x.selection,G.dom,K)}return e}if(v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(P.getStyle(v,"position",1)))){o=X.element;v=null}if(A&&(A.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(P.getStyle(v,"position",1)))){o=X.element;A=null}if(/(TD|TABLE|TH|CAPTION)/.test(o)||(v&&o=="DIV"&&/left|right/gi.test(P.getStyle(v,"float",1)))){o=X.element;v=A=null}E=(v&&v.nodeName==o)?v.cloneNode(0):x.dom.create(o);V=(A&&A.nodeName==o)?A.cloneNode(0):x.dom.create(o);V.removeAttribute("id");if(/^(H[1-6])$/.test(o)&&h(I,v)){V=x.dom.create(X.element)}K=q=Q;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}q=K}while((K=K.previousSibling?K.previousSibling:K.parentNode));K=z=u;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}z=K}while((K=K.nextSibling?K.nextSibling:K.parentNode));if(q.nodeName==o){L.setStart(q,0)}else{L.setStartBefore(q)}L.setEnd(Q,O);E.appendChild(L.cloneContents()||T.createTextNode(""));try{M.setEndAfter(z)}catch(R){}M.setStart(u,p);V.appendChild(M.cloneContents()||T.createTextNode(""));I=T.createRange();if(!q.previousSibling&&q.parentNode.nodeName==o){I.setStartBefore(q.parentNode)}else{if(L.startContainer.nodeName==o&&L.startOffset==0){I.setStartBefore(L.startContainer)}else{I.setStart(L.startContainer,L.startOffset)}}if(!z.nextSibling&&z.parentNode.nodeName==o){I.setEndAfter(z.parentNode)}else{I.setEnd(M.endContainer,M.endOffset)}I.deleteContents();if(c){x.getWin().scrollTo(0,N.y)}if(E.firstChild&&E.firstChild.nodeName==o){E.innerHTML=E.firstChild.innerHTML}if(V.firstChild&&V.firstChild.nodeName==o){V.innerHTML=V.firstChild.innerHTML}if(g(E)){E.innerHTML="<br />"}function U(Y,s){var r=[],aa,Z,y;Y.innerHTML="";if(X.keep_styles){Z=s;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(Z.nodeName)){aa=Z.cloneNode(i);P.setAttrib(aa,"id","");r.push(aa)}}while(Z=Z.parentNode)}if(r.length>0){for(y=r.length-1,aa=Y;y>=0;y--){aa=aa.appendChild(r[y])}r[0].innerHTML=c?"&nbsp;":"<br />";return r[0]}else{Y.innerHTML=c?"&nbsp;":"<br />"}}if(g(V)){C=U(V,u)}if(c&&parseFloat(opera.version())<9.5){I.insertNode(E);I.insertNode(V)}else{I.insertNode(V);I.insertNode(E)}V.normalize();E.normalize();function B(r){return T.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,i).nextNode()||r}I=T.createRange();I.selectNodeContents(a?B(C||V):C||V);I.collapse(1);H.removeAllRanges();H.addRange(I);D=x.dom.getPos(V).y;F=V.clientHeight;if(D<N.y||D+F>N.y+N.h){x.getWin().scrollTo(0,D<N.y?D:D-N.h+25)}return i},backspaceDelete:function(v,C){var D=this,s=D.editor,z=s.getBody(),q=s.dom,p,u=s.selection,o=u.getRng(),y=o.startContainer,p,A,B,x;if(!C&&o.collapsed&&y.nodeType==1&&o.startOffset==y.childNodes.length){x=new l.dom.TreeWalker(y.lastChild,y);for(p=y.lastChild;p;p=x.prev()){if(p.nodeType==3){o.setStart(p,p.nodeValue.length);o.collapse(true);u.setRng(o);return}}}if(y&&s.dom.isBlock(y)&&!/^(TD|TH)$/.test(y.nodeName)&&C){if(y.childNodes.length==0||(y.childNodes.length==1&&y.firstChild.nodeName=="BR")){p=y;while((p=p.previousSibling)&&!s.dom.isBlock(p)){}if(p){if(y!=z.firstChild){A=s.dom.doc.createTreeWalker(p,NodeFilter.SHOW_TEXT,null,i);while(B=A.nextNode()){p=B}o=s.getDoc().createRange();o.setStart(p,p.nodeValue?p.nodeValue.length:0);o.setEnd(p,p.nodeValue?p.nodeValue.length:0);u.setRng(o);s.dom.remove(y)}return m.cancel(v)}}}}})})(tinymce);(function(b){var c=b.DOM,a=b.dom.Event,d=b.each,e=b.extend;b.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new b.util.Dispatcher(h);h.onPostRender=new b.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(i){var h,g=this,f=g.editor;d(f.plugins,function(j){if(j.createControl){h=j.createControl(i,g);if(h){return false}}});switch(i){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[i])){return g.createButton(i,h)}return g.add(h)},createDropMenu:function(f,n,h){var m=this,i=m.editor,j,g,k,l;n=e({"class":"mceDropDown",constrain:i.settings.constrain_menus},n);n["class"]=n["class"]+" "+i.getParam("skin")+"Skin";if(k=i.getParam("skin_variant")){n["class"]+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)}f=m.prefix+f;l=h||m._cls.dropmenu||b.ui.DropMenu;j=m.controls[f]=new l(f,n);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(o){if(p.cmd){i.execCommand(p.cmd,p.ui||false,p.value)}}}});i.onRemove.add(function(){j.destroy()});if(b.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;if(g.settings.use_native_selects){k=new b.ui.NativeListBox(m,i)}else{f=l||h._cls.listbox||b.ui.ListBox;k=new f(m,i,g)}h.controls[m]=k;if(b.isWebKit){k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){g.bookmark=g.selection.getBookmark(1)});a.add(o,"focus",function(){g.selection.moveToBookmark(g.bookmark);g.bookmark=null})})}if(k.hideMenu){g.onMouseDown.add(k.hideMenu,k)}return h.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,"class":"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||b.ui.MenuButton;k=new f(m,i,g);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||b.ui.Button;k=new f(m,i)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||b.ui.SplitButton;k=h.add(new f(m,i,g));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,n,i){var m=this,j=m.editor,h,k,l,g;if(m.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onclick){n.onclick=function(o){if(b.isIE){g=j.selection.getBookmark(1)}j.execCommand(n.cmd,n.ui||false,o||n.value)}}if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:n.scope,more_colors_title:j.getLang("more_colors")},n);f=m.prefix+f;l=i||m._cls.colorsplitbutton||b.ui.ColorSplitButton;k=new l(f,n,j);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(b.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return m.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||b.ui.Toolbar;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createToolbarGroup:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||this._cls.toolbarGroup||b.ui.ToolbarGroup;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||b.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(b){var a=b.util.Dispatcher,e=b.each,d=b.isIE,c=b.isOpera;b.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(z,h){var v=this,k="",n,m,i=v.editor.settings.dialog_type=="modal",q,o,j,g=b.DOM.getViewPort(),r;z=z||{};h=h||{};o=c?g.w:screen.width;j=c?g.h:screen.height;z.name=z.name||"mc_"+new Date().getTime();z.width=parseInt(z.width||320);z.height=parseInt(z.height||240);z.resizable=true;z.left=z.left||parseInt(o/2)-(z.width/2);z.top=z.top||parseInt(j/2)-(z.height/2);h.inline=false;h.mce_width=z.width;h.mce_height=z.height;h.mce_auto_focus=z.auto_focus;if(i){if(d){z.center=true;z.help=false;z.dialogWidth=z.width+"px";z.dialogHeight=z.height+"px";z.scroll=z.scrollbars||false}}e(z,function(p,f){if(b.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(d&&i){k+=(k?";":"")+f+":"+p}else{k+=(k?",":"")+f+"="+p}}});v.features=z;v.params=h;v.onOpen.dispatch(v,z,h);r=z.url||z.file;r=b._addVer(r);try{if(d&&i){q=1;window.showModalDialog(r,window,k)}else{q=window.open(r,z.name,k)}}catch(l){}if(!q){alert(v.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=b.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return b.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){function b(){var d={},c={},e={};function f(j,i,h,g){if(typeof(i)=="string"){i=[i]}a.each(i,function(k){j[k.toLowerCase()]={func:h,scope:g}})}a.extend(this,{add:function(i,h,g){f(d,i,h,g)},addQueryStateHandler:function(i,h,g){f(c,i,h,g)},addQueryValueHandler:function(i,h,g){f(e,i,h,g)},execCommand:function(h,k,j,i,g){if(k=d[k.toLowerCase()]){if(k.func.call(h||k.scope,j,i,g)!==false){return true}}},queryCommandValue:function(){if(cmd=e[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}},queryCommandState:function(){if(cmd=c[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}}})}a.GlobalCommands=new b()})(tinymce);(function(a){a.Formatter=function(W){var i={},N=a.each,c=W.dom,H=W.selection,F=a.dom.TreeWalker,j=new a.dom.RangeUtils(c),d=W.schema.isValid,C=c.isBlock,k=W.settings.forced_root_block,q=c.nodeIndex,v="\uFEFF",e=/^(src|href|style)$/,T=false,B=true,I,P={apply:[],remove:[]};function z(X){return X instanceof Array}function l(Y,X){return c.getParents(Y,X,c.getRoot())}function b(X){return X.nodeType===1&&(X.face==="mceinline"||X.style.fontFamily==="mceinline")}function S(X){return X?i[X]:i}function L(X,Y){if(X){if(typeof(X)!=="string"){N(X,function(aa,Z){L(Z,aa)})}else{Y=Y.length?Y:[Y];N(Y,function(Z){if(Z.deep===I){Z.deep=!Z.selector}if(Z.split===I){Z.split=!Z.selector||Z.inline}if(Z.remove===I&&Z.selector&&!Z.inline){Z.remove="none"}if(Z.selector&&Z.inline){Z.mixed=true;Z.block_expand=true}if(typeof(Z.classes)==="string"){Z.classes=Z.classes.split(/\s+/)}});i[X]=Y}}}var O=function(Y){var X;W.dom.getParent(Y,function(Z){X=W.dom.getStyle(Z,"text-decoration");return X&&X!=="none"});return X};var J=function(X){var Y;if(X.nodeType===1&&X.parentNode&&X.parentNode.nodeType===1){Y=O(X.parentNode);if(W.dom.getStyle(X,"color")&&Y){W.dom.setStyle(X,"text-decoration",Y)}else{if(W.dom.getStyle(X,"textdecoration")===Y){W.dom.setStyle(X,"text-decoration",null)}}}};function U(Z,af,ab){var ac=S(Z),ah=ac[0],ae,Y,ad;function aa(aj){var al=aj.startContainer,an=aj.startOffset,am,ak;if(al.nodeType==1||al.nodeValue===""){al=al.nodeType==1?al.childNodes[an]:al;if(al){am=new F(al,al.parentNode);for(ak=am.current();ak;ak=am.next()){if(ak.nodeType==3&&!R(ak)){aj.setStart(ak,0);break}}}}return aj}function X(ak,aj){aj=aj||ah;if(ak){N(aj.styles,function(am,al){c.setStyle(ak,al,p(am,af))});N(aj.attributes,function(am,al){c.setAttrib(ak,al,p(am,af))});N(aj.classes,function(al){al=p(al,af);if(!c.hasClass(ak,al)){c.addClass(ak,al)}})}}function ag(aj){var al=[],am,ak;am=ah.inline||ah.block;ak=c.create(am);X(ak);j.walk(aj,function(an){var ao;function ap(aq){var au=aq.nodeName.toLowerCase(),at=aq.parentNode.nodeName.toLowerCase(),ar;if(f(au,"br")){ao=0;if(ah.block){c.remove(aq)}return}if(ah.wrapper&&u(aq,Z,af)){ao=0;return}if(ah.block&&!ah.wrapper&&D(au)){aq=c.rename(aq,am);X(aq);al.push(aq);ao=0;return}if(ah.selector){N(ac,function(av){if(c.is(aq,av.selector)&&!b(aq)){X(aq,av);ar=true}});if(!ah.inline||ar){ao=0;return}}if(d(am,au)&&d(at,am)){if(!ao){ao=ak.cloneNode(T);aq.parentNode.insertBefore(ao,aq);al.push(ao)}ao.appendChild(aq)}else{ao=0;N(a.grep(aq.childNodes),ap);ao=0}}N(an,ap)});N(al,function(ap){var an;function aq(at){var ar=0;N(at.childNodes,function(au){if(!R(au)&&!G(au)){ar++}});return ar}function ao(ar){var au,at;N(ar.childNodes,function(av){if(av.nodeType==1&&!G(av)&&!b(av)){au=av;return T}});if(au&&g(au,ah)){at=au.cloneNode(T);X(at);c.replace(at,ar,B);c.remove(au,1)}return at||ar}an=aq(ap);if(an===0){c.remove(ap,1);return}if(ah.inline||ah.wrapper){if(!ah.exact&&an===1){ap=ao(ap)}N(ac,function(ar){N(c.select(ar.inline,ap),function(at){V(ar,af,at,ar.exact?at:null)})});if(u(ap.parentNode,Z,af)){c.remove(ap,1);ap=0;return B}if(ah.merge_with_parents){c.getParent(ap.parentNode,function(ar){if(u(ar,Z,af)){c.remove(ap,1);ap=0;return B}})}if(ap){ap=E(s(ap),ap);ap=E(ap,s(ap,B))}}})}if(ah){if(ab){Y=c.createRng();Y.setStartBefore(ab);Y.setEndAfter(ab);ag(o(Y,ac))}else{if(!H.isCollapsed()||!ah.inline){var ai=W.selection.getNode();ae=H.getBookmark();ag(o(H.getRng(B),ac));if(ah.styles&&(ah.styles.color||ah.styles.textDecoration)){a.walk(ai,J,"childNodes");J(ai)}H.moveToBookmark(ae);H.setRng(aa(H.getRng(B)));W.nodeChanged()}else{Q("apply",Z,af)}}}}function y(Z,ai,ab){var ad=S(Z),al=ad[0],ah,af,Y;function aa(am){var aq=am.startContainer,at=am.startOffset,ar,ap,ao,an;if(aq.nodeType==3&&at>=aq.nodeValue.length-1){aq=aq.parentNode;at=q(aq)+1}if(aq.nodeType==1){ao=aq.childNodes;aq=ao[Math.min(at,ao.length-1)];ar=new F(aq);if(at>ao.length-1){ar.next()}for(ap=ar.current();ap;ap=ar.next()){if(ap.nodeType==3&&!R(ap)){an=c.create("a",null,v);ap.parentNode.insertBefore(an,ap);am.setStart(ap,0);H.setRng(am);c.remove(an);return}}}}function ag(ap){var ao,an,am;ao=a.grep(ap.childNodes);for(an=0,am=ad.length;an<am;an++){if(V(ad[an],ai,ap,ap)){break}}if(al.deep){for(an=0,am=ao.length;an<am;an++){ag(ao[an])}}}function ae(an){var am;N(l(an.parentNode).reverse(),function(ao){var ap;if(!am&&ao.id!="_start"&&ao.id!="_end"){ap=u(ao,Z,ai);if(ap&&ap.split!==false){am=ao}}});return am}function X(ao,at,am,au){var aw,av,ar,aq,ap,an;if(ao){an=ao.parentNode;for(aw=at.parentNode;aw&&aw!=an;aw=aw.parentNode){av=aw.cloneNode(T);for(ap=0;ap<ad.length;ap++){if(V(ad[ap],ai,av,av)){av=0;break}}if(av){if(ar){av.appendChild(ar)}if(!aq){aq=av}ar=av}}if(au&&(!al.mixed||!C(ao))){at=c.split(ao,at)}if(ar){am.parentNode.insertBefore(ar,am);aq.appendChild(am)}}return at}function aj(am){return X(ae(am),am,am,true)}function ac(ao){var an=c.get(ao?"_start":"_end"),am=an[ao?"firstChild":"lastChild"];if(G(am)){am=am[ao?"firstChild":"lastChild"]}c.remove(an,true);return am}function ak(ao){var an,am;ao=o(ao,ad,B);if(al.split){an=n(ao,B);am=n(ao);if(an!=am){an=M(an,"span",{id:"_start",_mce_type:"bookmark"});am=M(am,"span",{id:"_end",_mce_type:"bookmark"});aj(an);aj(am);an=ac(B);am=ac()}else{an=am=aj(an)}ao.startContainer=an.parentNode;ao.startOffset=q(an);ao.endContainer=am.parentNode;ao.endOffset=q(am)+1}j.walk(ao,function(ap){N(ap,function(aq){ag(aq);if(aq.nodeType===1&&W.dom.getStyle(aq,"text-decoration")==="underline"&&aq.parentNode&&O(aq.parentNode)==="underline"){V({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,aq)}})})}if(ab){Y=c.createRng();Y.setStartBefore(ab);Y.setEndAfter(ab);ak(Y);return}if(!H.isCollapsed()||!al.inline){ah=H.getBookmark();ak(H.getRng(B));H.moveToBookmark(ah);if(h(Z,ai,H.getStart())){aa(H.getRng(true))}W.nodeChanged()}else{Q("remove",Z,ai)}}function x(Y,aa,Z){var X=S(Y);if(h(Y,aa,Z)&&(!("toggle" in X[0])||X[0]["toggle"])){y(Y,aa,Z)}else{U(Y,aa,Z)}}function u(Y,X,ad,ab){var aa=S(X),af,ac,Z;function ae(aj,am,al){var ai,ak,ag=am[al],ah;if(ag){if(ag.length===I){for(ai in ag){if(ag.hasOwnProperty(ai)){if(al==="attributes"){ak=c.getAttrib(aj,ai)}else{ak=K(aj,ai)}if(ab&&!ak&&!am.exact){return}if((!ab||am.exact)&&!f(ak,p(ag[ai],ad))){return}}}}else{for(ah=0;ah<ag.length;ah++){if(al==="attributes"?c.getAttrib(aj,ag[ah]):K(aj,ag[ah])){return am}}}}return am}if(aa&&Y){for(ac=0;ac<aa.length;ac++){af=aa[ac];if(g(Y,af)&&ae(Y,af,"attributes")&&ae(Y,af,"styles")){if(Z=af.classes){for(ac=0;ac<Z.length;ac++){if(!c.hasClass(Y,Z[ac])){return}}}return af}}}}function h(Y,ac,ab){var aa,Z;function X(ad){ad=c.getParent(ad,function(ae){return !!u(ae,Y,ac,true)});return u(ad,Y,ac)}if(ab){return X(ab)}if(H.isCollapsed()){for(Z=P.apply.length-1;Z>=0;Z--){if(P.apply[Z].name==Y){return true}}for(Z=P.remove.length-1;Z>=0;Z--){if(P.remove[Z].name==Y){return false}}return X(H.getNode())}ab=H.getNode();if(X(ab)){return B}aa=H.getStart();if(aa!=ab){if(X(aa)){return B}}return T}function r(ae,ad){var Z,X=[],Y={},ac,ab,aa;if(H.isCollapsed()){for(ab=0;ab<ae.length;ab++){for(ac=P.remove.length-1;ac>=0;ac--){aa=ae[ab];if(P.remove[ac].name==aa){Y[aa]=true;break}}}for(ac=P.apply.length-1;ac>=0;ac--){for(ab=0;ab<ae.length;ab++){aa=ae[ab];if(!Y[aa]&&P.apply[ac].name==aa){Y[aa]=true;X.push(aa)}}}}Z=H.getStart();c.getParent(Z,function(ah){var ag,af;for(ag=0;ag<ae.length;ag++){af=ae[ag];if(!Y[af]&&u(ah,af,ad)){Y[af]=true;X.push(af)}}});return X}function A(Z){var ad=S(Z),ac,ab,aa,Y,X;if(ad){ac=H.getStart();ab=l(ac);for(Y=ad.length-1;Y>=0;Y--){X=ad[Y].selector;if(!X){return B}for(aa=ab.length-1;aa>=0;aa--){if(c.is(ab[aa],X)){return B}}}}return T}a.extend(this,{get:S,register:L,apply:U,remove:y,toggle:x,match:h,matchAll:r,matchNode:u,canApply:A});function g(X,Y){if(f(X,Y.inline)){return B}if(f(X,Y.block)){return B}if(Y.selector){return c.is(X,Y.selector)}}function f(Y,X){Y=Y||"";X=X||"";Y=""+(Y.nodeName||Y);X=""+(X.nodeName||X);return Y.toLowerCase()==X.toLowerCase()}function K(Y,X){var Z=c.getStyle(Y,X);if(X=="color"||X=="backgroundColor"){Z=c.toHex(Z)}if(X=="fontWeight"&&Z==700){Z="bold"}return""+Z}function p(X,Y){if(typeof(X)!="string"){X=X(Y)}else{if(Y){X=X.replace(/%(\w+)/g,function(aa,Z){return Y[Z]||aa})}}return X}function R(X){return X&&X.nodeType===3&&/^([\s\r\n]+|)$/.test(X.nodeValue)}function M(Z,Y,X){var aa=c.create(Y,X);Z.parentNode.insertBefore(aa,Z);aa.appendChild(Z);return aa}function o(X,ak,aa){var ac=X.startContainer,Y=X.startOffset,ag=X.endContainer,af=X.endOffset,ai,aj,ae;function ah(ao,an,ap,al){var am,aq;al=al||c.getRoot();for(;;){am=ao.parentNode;if(am==al||(!ak[0].block_expand&&C(am))){return ao}for(ai=am[an];ai&&ai!=ao;ai=ai[ap]){if(ai.nodeType==1&&!G(ai)){return ao}if(ai.nodeType==3&&!R(ai)){return ao}}ao=ao.parentNode}return ao}function Z(al,am){if(am===I){am=al.nodeType===3?al.length:al.childNodes.length}while(al&&al.hasChildNodes()){al=al.childNodes[am];if(al){am=al.nodeType===3?al.length:al.childNodes.length}}return{node:al,offset:am}}if(ac.nodeType==1&&ac.hasChildNodes()){aj=ac.childNodes.length-1;ac=ac.childNodes[Y>aj?aj:Y];if(ac.nodeType==3){Y=0}}if(ag.nodeType==1&&ag.hasChildNodes()){aj=ag.childNodes.length-1;ag=ag.childNodes[af>aj?aj:af-1];if(ag.nodeType==3){af=ag.nodeValue.length}}if(G(ac.parentNode)){ac=ac.parentNode}if(G(ac)){ac=ac.nextSibling||ac}if(G(ag.parentNode)){af=c.nodeIndex(ag);ag=ag.parentNode}if(G(ag)&&ag.previousSibling){ag=ag.previousSibling;af=ag.length}if(ak[0].inline){ae=Z(ag,af);if(ae.node){while(ae.node&&ae.offset===0&&ae.node.previousSibling){ae=Z(ae.node.previousSibling)}if(ae.node&&ae.offset>0&&ae.node.nodeType===3&&ae.node.nodeValue.charAt(ae.offset-1)===" "){if(ae.offset>1){ag=ae.node;ag.splitText(ae.offset-1)}else{if(ae.node.previousSibling){ag=ae.node.previousSibling}}}}}if(ak[0].inline||ak[0].block_expand){ac=ah(ac,"firstChild","nextSibling");ag=ah(ag,"lastChild","previousSibling")}if(ak[0].selector&&ak[0].expand!==T&&!ak[0].inline){function ad(an,ao){var am,al,ap;if(an.nodeType==3&&an.nodeValue.length==0&&an[ao]){an=an[ao]}am=l(an);for(al=0;al<am.length;al++){for(ap=0;ap<ak.length;ap++){if(c.is(am[al],ak[ap].selector)){return am[al]}}}return an}ac=ad(ac,"previousSibling");ag=ad(ag,"nextSibling")}if(ak[0].block||ak[0].selector){function ab(an,ao,al){var am;if(!ak[0].wrapper){am=c.getParent(an,ak[0].block)}if(!am){am=c.getParent(an.nodeType==3?an.parentNode:an,C)}if(am&&ak[0].wrapper){am=l(am,"ul,ol").reverse()[0]||am}if(!am){am=an;while(am[ao]&&!C(am[ao])){am=am[ao];if(f(am,"br")){break}}}return am||an}ac=ab(ac,"previousSibling");ag=ab(ag,"nextSibling");if(ak[0].block){if(!C(ac)){ac=ah(ac,"firstChild","nextSibling")}if(!C(ag)){ag=ah(ag,"lastChild","previousSibling")}}}if(ac.nodeType==1){Y=q(ac);ac=ac.parentNode}if(ag.nodeType==1){af=q(ag)+1;ag=ag.parentNode}return{startContainer:ac,startOffset:Y,endContainer:ag,endOffset:af}}function V(ad,ab,aa,X){var Z,Y,ac;if(!g(aa,ad)){return T}if(ad.remove!="all"){N(ad.styles,function(af,ae){af=p(af,ab);if(typeof(ae)==="number"){ae=af;X=0}if(!X||f(K(X,ae),af)){c.setStyle(aa,ae,"")}ac=1});if(ac&&c.getAttrib(aa,"style")==""){aa.removeAttribute("style");aa.removeAttribute("_mce_style")}N(ad.attributes,function(ag,af){var ae;ag=p(ag,ab);if(typeof(af)==="number"){af=ag;X=0}if(!X||f(c.getAttrib(X,af),ag)){if(af=="class"){ag=c.getAttrib(aa,af);if(ag){ae="";N(ag.split(/\s+/),function(ah){if(/mce\w+/.test(ah)){ae+=(ae?" ":"")+ah}});if(ae){c.setAttrib(aa,af,ae);return}}}if(af=="class"){aa.removeAttribute("className")}if(e.test(af)){aa.removeAttribute("_mce_"+af)}aa.removeAttribute(af)}});N(ad.classes,function(ae){ae=p(ae,ab);if(!X||c.hasClass(X,ae)){c.removeClass(aa,ae)}});Y=c.getAttribs(aa);for(Z=0;Z<Y.length;Z++){if(Y[Z].nodeName.indexOf("_")!==0){return T}}}if(ad.remove!="none"){m(aa,ad);return B}}function m(Y,ab){var Z=Y.parentNode,X;if(ab.block){if(!k){function aa(ad,ac,ae){ad=s(ad,ac,ae);return !ad||(ad.nodeName=="BR"||C(ad))}if(C(Y)&&!C(Z)){if(!aa(Y,T)&&!aa(Y.firstChild,B,1)){Y.insertBefore(c.create("br"),Y.firstChild)}if(!aa(Y,B)&&!aa(Y.lastChild,T,1)){Y.appendChild(c.create("br"))}}}else{if(Z==c.getRoot()){if(!ab.list_block||!f(Y,ab.list_block)){N(a.grep(Y.childNodes),function(ac){if(d(k,ac.nodeName.toLowerCase())){if(!X){X=M(ac,k)}else{X.appendChild(ac)}}else{X=0}})}}}}if(ab.selector&&ab.inline&&!f(ab.inline,Y)){return}c.remove(Y,1)}function s(Y,X,Z){if(Y){X=X?"nextSibling":"previousSibling";for(Y=Z?Y:Y[X];Y;Y=Y[X]){if(Y.nodeType==1||!R(Y)){return Y}}}}function G(X){return X&&X.nodeType==1&&X.getAttribute("_mce_type")=="bookmark"}function E(ab,Z){var aa,Y,X;function ad(ag,af){if(ag.nodeName!=af.nodeName){return T}function ae(ai){var aj={};N(c.getAttribs(ai),function(ak){var al=ak.nodeName.toLowerCase();if(al.indexOf("_")!==0&&al!=="style"){aj[al]=c.getAttrib(ai,al)}});return aj}function ah(al,ak){var aj,ai;for(ai in al){if(al.hasOwnProperty(ai)){aj=ak[ai];if(aj===I){return T}if(al[ai]!=aj){return T}delete ak[ai]}}for(ai in ak){if(ak.hasOwnProperty(ai)){return T}}return B}if(!ah(ae(ag),ae(af))){return T}if(!ah(c.parseStyle(c.getAttrib(ag,"style")),c.parseStyle(c.getAttrib(af,"style")))){return T}return B}if(ab&&Z){function ac(ae,af){for(Y=ae;Y;Y=Y[af]){if(Y.nodeType==3&&!R(Y)){return ae}if(Y.nodeType==1&&!G(Y)){return Y}}return ae}ab=ac(ab,"previousSibling");Z=ac(Z,"nextSibling");if(ad(ab,Z)){for(Y=ab.nextSibling;Y&&Y!=Z;){X=Y;Y=Y.nextSibling;ab.appendChild(X)}c.remove(Z);N(a.grep(Z.childNodes),function(ae){ab.appendChild(ae)});return ab}}return Z}function D(X){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(X)}function n(X,ab){var Y,Z,aa;Y=X[ab?"startContainer":"endContainer"];Z=X[ab?"startOffset":"endOffset"];if(Y.nodeType==1){aa=Y.childNodes.length-1;if(!ab&&Z){Z--}Y=Y.childNodes[Z>aa?aa:Z]}return Y}function Q(ac,X,ab){var aa,Y=P[ac],ad=P[ac=="apply"?"remove":"apply"];function af(){return P.apply.length||P.remove.length}function Z(){P.apply=[];P.remove=[]}function ae(ag){N(P.apply.reverse(),function(ah){U(ah.name,ah.vars,ag);if(ah.name==="forecolor"&&ah.vars.value){J(ag.parentNode)}});N(P.remove.reverse(),function(ah){y(ah.name,ah.vars,ag)});c.remove(ag,1);Z()}for(aa=Y.length-1;aa>=0;aa--){if(Y[aa].name==X){return}}Y.push({name:X,vars:ab});for(aa=ad.length-1;aa>=0;aa--){if(ad[aa].name==X){ad.splice(aa,1)}}if(af()){W.getDoc().execCommand("FontName",false,"mceinline");P.lastRng=H.getRng();N(c.select("font,span"),function(ah){var ag;if(b(ah)){ag=H.getBookmark();ae(ah);H.moveToBookmark(ag);W.nodeChanged()}});if(!P.isListening&&af()){P.isListening=true;N("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(ag){W[ag].addToTop(function(ah,ai){if(af()&&!a.dom.RangeUtils.compareRanges(P.lastRng,H.getRng())){N(c.select("font,span"),function(ak){var al,aj;if(b(ak)){al=ak.firstChild;if(al){ae(ak);aj=c.createRng();aj.setStart(al,al.nodeValue.length);aj.setEnd(al,al.nodeValue.length);H.setRng(aj);ah.nodeChanged()}else{c.remove(ak)}}});if(ai.type=="keyup"||ai.type=="mouseup"){Z()}}})})}}}}})(tinymce);tinymce.onAddEditor.add(function(b,c){var a,g,h,e=c.settings;if(e.inline_styles){g=b.explode(e.font_size_style_values);function d(j,i){b.each(i,function(l,k){if(l){h.setStyle(j,k,l)}});h.rename(j,"span")}a={font:function(j,i){d(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:g[parseInt(i.size)-1]})},u:function(j,i){d(i,{textDecoration:"underline"})},strike:function(j,i){d(i,{textDecoration:"line-through"})}};function f(i,j){h=i.dom;if(e.convert_fonts_to_spans){b.each(h.select("font,u,strike",j.node),function(k){a[k.nodeName.toLowerCase()](c.dom,k)})}}c.onPreProcess.add(f);c.onInit.add(function(){c.selection.onSetContent.add(f)})}});tinyMCE.addI18n({en:{
common:{
edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",
apply:"Apply",
insert:"Insert",
update:"Update",
cancel:"Cancel",
close:"Close",
browse:"Browse",
class_name:"Class",
not_set:"-- Not set --",
clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",
clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",
popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",
invalid_data:"{#field} is invalid",
invalid_data_number:"{#field} must be a number",
invalid_data_min:"{#field} must be a number greater than {#min}",
invalid_data_size:"{#field} must be a number or percentage",
more_colors:"More colors"
},
colors:{
'000000':'Black',
'993300':'Burnt orange',
'333300':'Dark olive',
'003300':'Dark green',
'003366':'Dark azure',
'000080':'Navy Blue',
'333399':'Indigo',
'333333':'Very dark gray',
'800000':'Maroon',
'FF6600':'Orange',
'808000':'Olive',
'008000':'Green',
'008080':'Teal',
'0000FF':'Blue',
'666699':'Grayish blue',
'808080':'Gray',
'FF0000':'Red',
'FF9900':'Amber',
'99CC00':'Yellow green',
'339966':'Sea green',
'33CCCC':'Turquoise',
'3366FF':'Royal blue',
'800080':'Purple',
'999999':'Medium gray',
'FF00FF':'Magenta',
'FFCC00':'Gold',
'FFFF00':'Yellow',
'00FF00':'Lime',
'00FFFF':'Aqua',
'00CCFF':'Sky blue',
'993366':'Brown',
'C0C0C0':'Silver',
'FF99CC':'Pink',
'FFCC99':'Peach',
'FFFF99':'Light yellow',
'CCFFCC':'Pale green',
'CCFFFF':'Pale cyan',
'99CCFF':'Light sky blue',
'CC99FF':'Plum',
'FFFFFF':'White'
},
contextmenu:{
align:"Alignment",
left:"Left",
center:"Center",
right:"Right",
full:"Full"
},
insertdatetime:{
date_fmt:"%Y-%m-%d",
time_fmt:"%H:%M:%S",
insertdate_desc:"Insert date",
inserttime_desc:"Insert time",
months_long:"January,February,March,April,May,June,July,August,September,October,November,December",
months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",
day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",
day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun"
},
print:{
print_desc:"Print"
},
preview:{
preview_desc:"Preview"
},
directionality:{
ltr_desc:"Direction left to right",
rtl_desc:"Direction right to left"
},
layer:{
insertlayer_desc:"Insert new layer",
forward_desc:"Move forward",
backward_desc:"Move backward",
absolute_desc:"Toggle absolute positioning",
content:"New layer..."
},
save:{
save_desc:"Save",
cancel_desc:"Cancel all changes"
},
nonbreaking:{
nonbreaking_desc:"Insert non-breaking space character"
},
iespell:{
iespell_desc:"Run spell checking",
download:"ieSpell not detected. Do you want to install it now?"
},
advhr:{
advhr_desc:"Horizontal rule"
},
emotions:{
emotions_desc:"Emotions"
},
searchreplace:{
search_desc:"Find",
replace_desc:"Find/Replace"
},
advimage:{
image_desc:"Insert/edit image"
},
advlink:{
link_desc:"Insert/edit link"
},
xhtmlxtras:{
cite_desc:"Citation",
abbr_desc:"Abbreviation",
acronym_desc:"Acronym",
del_desc:"Deletion",
ins_desc:"Insertion",
attribs_desc:"Insert/Edit Attributes"
},
style:{
desc:"Edit CSS Style"
},
paste:{
paste_text_desc:"Paste as Plain Text",
paste_word_desc:"Paste from Word",
selectall_desc:"Select All",
plaintext_mode_sticky:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",
plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode."
},
paste_dlg:{
text_title:"Use CTRL+V on your keyboard to paste the text into the window.",
text_linebreaks:"Keep linebreaks",
word_title:"Use CTRL+V on your keyboard to paste the text into the window."
},
table:{
desc:"Inserts a new table",
row_before_desc:"Insert row before",
row_after_desc:"Insert row after",
delete_row_desc:"Delete row",
col_before_desc:"Insert column before",
col_after_desc:"Insert column after",
delete_col_desc:"Remove column",
split_cells_desc:"Split merged table cells",
merge_cells_desc:"Merge table cells",
row_desc:"Table row properties",
cell_desc:"Table cell properties",
props_desc:"Table properties",
paste_row_before_desc:"Paste table row before",
paste_row_after_desc:"Paste table row after",
cut_row_desc:"Cut table row",
copy_row_desc:"Copy table row",
del:"Delete table",
row:"Row",
col:"Column",
cell:"Cell"
},
autosave:{
unload_msg:"The changes you made will be lost if you navigate away from this page.",
restore_content:"Restore auto-saved content.",
warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?."
},
fullscreen:{
desc:"Toggle fullscreen mode"
},
media:{
desc:"Insert / edit embedded media",
edit:"Edit embedded media"
},
fullpage:{
desc:"Document properties"
},
template:{
desc:"Insert predefined template content"
},
visualchars:{
desc:"Visual control characters on/off."
},
spellchecker:{
desc:"Toggle spellchecker",
menu:"Spellchecker settings",
ignore_word:"Ignore word",
ignore_words:"Ignore all",
langs:"Languages",
wait:"Please wait...",
sug:"Suggestions",
no_sug:"No suggestions",
no_mpell:"No misspellings found."
},
pagebreak:{
desc:"Insert page break."
},
advlist:{
types:"Types",
def:"Default",
lower_alpha:"Lower alpha",
lower_greek:"Lower greek",
lower_roman:"Lower roman",
upper_alpha:"Upper alpha",
upper_roman:"Upper roman",
circle:"Circle",
disc:"Disc",
square:"Square"
},
aria:{
rich_text_area:"Rich Text Area"
}}});(function(){tinymce.create("tinymce.plugins.AdvancedHRPlugin",{init:function(a,b){a.addCommand("mceAdvancedHr",function(){a.windowManager.open({file:b+"/rule.htm",width:250+parseInt(a.getLang("advhr.delta_width",0)),height:160+parseInt(a.getLang("advhr.delta_height",0)),inline:1},{plugin_url:b})});a.addButton("advhr",{title:"advhr.advhr_desc",cmd:"mceAdvancedHr"});a.onNodeChange.add(function(d,c,e){c.setActive("advhr",e.nodeName=="HR")});a.onClick.add(function(c,d){d=d.target;if(d.nodeName==="HR"){c.selection.select(d)}})},getInfo:function(){return{longname:"Advanced HR",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advhr",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("advhr",tinymce.plugins.AdvancedHRPlugin)})();(function(){tinymce.create("tinymce.plugins.AdvancedImagePlugin",{init:function(a,b){a.addCommand("mceAdvImage",function(){if(a.dom.getAttrib(a.selection.getNode(),"class").indexOf("mceItem")!=-1){return}a.windowManager.open({file:b+"/image.htm",width:480+parseInt(a.getLang("advimage.delta_width",0)),height:385+parseInt(a.getLang("advimage.delta_height",0)),inline:1},{plugin_url:b})});a.addButton("image",{title:"advimage.image_desc",cmd:"mceAdvImage"})},getInfo:function(){return{longname:"Advanced image",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advimage",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("advimage",tinymce.plugins.AdvancedImagePlugin)})();(function(){tinymce.create("tinymce.plugins.AdvancedLinkPlugin",{init:function(a,b){this.editor=a;a.addCommand("mceAdvLink",function(){var c=a.selection;if(c.isCollapsed()&&!a.dom.getParent(c.getNode(),"A")){return}a.windowManager.open({file:b+"/link.htm",width:480+parseInt(a.getLang("advlink.delta_width",0)),height:400+parseInt(a.getLang("advlink.delta_height",0)),inline:1},{plugin_url:b})});a.addButton("link",{title:"advlink.link_desc",cmd:"mceAdvLink"});a.addShortcut("ctrl+k","advlink.advlink_desc","mceAdvLink");a.onNodeChange.add(function(d,c,f,e){c.setDisabled("link",e&&f.nodeName!="A");c.setActive("link",f.nodeName=="A"&&!f.name)})},getInfo:function(){return{longname:"Advanced link",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("advlink",tinymce.plugins.AdvancedLinkPlugin)})();(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(c,d){var e=this;e.editor=c;function b(g){var f=[];a(g.split(/,/),function(h){f.push({title:"advlist."+(h=="default"?"def":h.replace(/-/g,"_")),styles:{listStyleType:h=="default"?"":h}})});return f}e.numlist=c.getParam("advlist_number_styles")||b("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");e.bullist=c.getParam("advlist_bullet_styles")||b("default,circle,disc,square")},createControl:function(c,b){var f=this,e,h;if(c=="numlist"||c=="bullist"){if(f[c][0].title=="advlist.def"){h=f[c][0]}function d(i,k){var j=true;a(k.styles,function(m,l){if(f.editor.dom.getStyle(i,l)!=m){j=false;return false}});return j}function g(){var k,i=f.editor,l=i.dom,j=i.selection;k=l.getParent(j.getNode(),"ol,ul");if(!k||k.nodeName==(c=="bullist"?"OL":"UL")||d(k,h)){i.execCommand(c=="bullist"?"InsertUnorderedList":"InsertOrderedList")}if(h){k=l.getParent(j.getNode(),"ol,ul");if(k){l.setStyles(k,h.styles);k.removeAttribute("_mce_style")}}i.focus()}e=b.createSplitButton(c,{title:"advanced."+c+"_desc","class":"mce_"+c,onclick:function(){g()}});e.onRenderMenu.add(function(i,j){j.onShowMenu.add(function(){var m=f.editor.dom,l=m.getParent(f.editor.selection.getNode(),"ol,ul"),k;if(l||h){k=f[c];a(j.items,function(n){var o=true;n.setSelected(0);if(l&&!n.isDisabled()){a(k,function(p){if(p.id==n.id){if(!d(l,p)){o=false;return false}}});if(o){n.setSelected(1)}}});if(!l){j.items[h.id].setSelected(1)}}});j.add({id:f.editor.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:true}).setDisabled(1);a(f[c],function(k){k.id=f.editor.dom.uniqueId();j.add({id:k.id,title:k.title,onclick:function(){h=k;g()}})})});return e}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();(function(a){a.create("tinymce.plugins.EmotionsPlugin",{init:function(b,c){b.addCommand("mceEmotion",function(){b.windowManager.open({file:c+"/emotions.htm",width:250+parseInt(b.getLang("emotions.delta_width",0)),height:160+parseInt(b.getLang("emotions.delta_height",0)),inline:1},{plugin_url:c})});b.addButton("emotions",{title:"emotions.emotions_desc",cmd:"mceEmotion"})},getInfo:function(){return{longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:a.majorVersion+"."+a.minorVersion}}});a.PluginManager.add("emotions",a.plugins.EmotionsPlugin)})(tinymce);(function(){tinymce.create("tinymce.plugins.IESpell",{init:function(a,b){var c=this,d;if(!tinymce.isIE){return}c.editor=a;a.addCommand("mceIESpell",function(){try{d=new ActiveXObject("ieSpell.ieSpellExtension");d.CheckDocumentNode(a.getDoc().documentElement)}catch(f){if(f.number==-2146827859){a.windowManager.confirm(a.getLang("iespell.download"),function(e){if(e){window.open("http://www.iespell.com/download.php","ieSpellDownload","")}})}else{a.windowManager.alert("Error Loading ieSpell: Exception "+f.number)}}});a.addButton("iespell",{title:"iespell.iespell_desc",cmd:"mceIESpell"})},getInfo:function(){return{longname:"IESpell (IE Only)",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/iespell",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("iespell",tinymce.plugins.IESpell)})();(function(){tinymce.create("tinymce.plugins.InsertDateTime",{init:function(a,b){var c=this;c.editor=a;a.addCommand("mceInsertDate",function(){var d=c._getDateTime(new Date(),a.getParam("plugin_insertdate_dateFormat",a.getLang("insertdatetime.date_fmt")));a.execCommand("mceInsertContent",false,d)});a.addCommand("mceInsertTime",function(){var d=c._getDateTime(new Date(),a.getParam("plugin_insertdate_timeFormat",a.getLang("insertdatetime.time_fmt")));a.execCommand("mceInsertContent",false,d)});a.addButton("insertdate",{title:"insertdatetime.insertdate_desc",cmd:"mceInsertDate"});a.addButton("inserttime",{title:"insertdatetime.inserttime_desc",cmd:"mceInsertTime"})},getInfo:function(){return{longname:"Insert date/time",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/insertdatetime",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getDateTime:function(e,a){var b=this.editor;function c(g,d){g=""+g;if(g.length<d){for(var f=0;f<(d-g.length);f++){g="0"+g}}return g}a=a.replace("%D","%m/%d/%y");a=a.replace("%r","%I:%M:%S %p");a=a.replace("%Y",""+e.getFullYear());a=a.replace("%y",""+e.getYear());a=a.replace("%m",c(e.getMonth()+1,2));a=a.replace("%d",c(e.getDate(),2));a=a.replace("%H",""+c(e.getHours(),2));a=a.replace("%M",""+c(e.getMinutes(),2));a=a.replace("%S",""+c(e.getSeconds(),2));a=a.replace("%I",""+((e.getHours()+11)%12+1));a=a.replace("%p",""+(e.getHours()<12?"AM":"PM"));a=a.replace("%B",""+b.getLang("insertdatetime.months_long").split(",")[e.getMonth()]);a=a.replace("%b",""+b.getLang("insertdatetime.months_short").split(",")[e.getMonth()]);a=a.replace("%A",""+b.getLang("insertdatetime.day_long").split(",")[e.getDay()]);a=a.replace("%a",""+b.getLang("insertdatetime.day_short").split(",")[e.getDay()]);a=a.replace("%%","%");return a}});tinymce.PluginManager.add("insertdatetime",tinymce.plugins.InsertDateTime)})();(function(){tinymce.create("tinymce.plugins.Preview",{init:function(a,b){var d=this,c=tinymce.explode(a.settings.content_css);d.editor=a;tinymce.each(c,function(f,e){c[e]=a.documentBaseURI.toAbsolute(f)});a.addCommand("mcePreview",function(){a.windowManager.open({file:a.getParam("plugin_preview_pageurl",b+"/preview.html"),width:parseInt(a.getParam("plugin_preview_width","550")),height:parseInt(a.getParam("plugin_preview_height","600")),resizable:"yes",scrollbars:"yes",popup_css:c?c.join(","):a.baseURI.toAbsolute("themes/"+a.settings.theme+"/skins/"+a.settings.skin+"/content.css"),inline:a.getParam("plugin_preview_inline",1)},{base:a.documentBaseURI.getURI()})});a.addButton("preview",{title:"preview.preview_desc",cmd:"mcePreview"})},getInfo:function(){return{longname:"Preview",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/preview",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("preview",tinymce.plugins.Preview)})();(function(){tinymce.create("tinymce.plugins.Print",{init:function(a,b){a.addCommand("mcePrint",function(){a.getWin().print()});a.addButton("print",{title:"print.print_desc",cmd:"mcePrint"})},getInfo:function(){return{longname:"Print",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("print",tinymce.plugins.Print)})();(function(){tinymce.create("tinymce.plugins.Save",{init:function(a,b){var c=this;c.editor=a;a.addCommand("mceSave",c._save,c);a.addCommand("mceCancel",c._cancel,c);a.addButton("save",{title:"save.save_desc",cmd:"mceSave"});a.addButton("cancel",{title:"save.cancel_desc",cmd:"mceCancel"});a.onNodeChange.add(c._nodeChange,c);a.addShortcut("ctrl+s",a.getLang("save.save_desc"),"mceSave")},getInfo:function(){return{longname:"Save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(b,a,c){var b=this.editor;if(b.getParam("save_enablewhendirty")){a.setDisabled("save",!b.isDirty());a.setDisabled("cancel",!b.isDirty())}},_save:function(){var a=this.editor,d,e,b,c;d=tinymce.DOM.get(a.id).form||tinymce.DOM.getParent(a.id,"form");if(a.getParam("save_enablewhendirty")&&!a.isDirty()){return}tinyMCE.triggerSave();if(e=a.getParam("save_onsavecallback")){if(a.execCallback("save_onsavecallback",a)){a.startContent=tinymce.trim(a.getContent({format:"raw"}));a.nodeChanged()}return}if(d){a.isNotDirty=true;if(d.onsubmit==null||d.onsubmit()!=false){d.submit()}a.nodeChanged()}else{a.windowManager.alert("Error: No form element found.")}},_cancel:function(){var a=this.editor,c,b=tinymce.trim(a.startContent);if(c=a.getParam("save_oncancelcallback")){a.execCallback("save_oncancelcallback",a);return}a.setContent(b);a.undoManager.clear();a.nodeChanged()}});tinymce.PluginManager.add("save",tinymce.plugins.Save)})();(function(){tinymce.create("tinymce.plugins.SearchReplacePlugin",{init:function(a,c){function b(d){a.windowManager.open({file:c+"/searchreplace.htm",width:420+parseInt(a.getLang("searchreplace.delta_width",0)),height:170+parseInt(a.getLang("searchreplace.delta_height",0)),inline:1,auto_focus:0},{mode:d,search_string:a.selection.getContent({format:"text"}),plugin_url:c})}a.addCommand("mceSearch",function(){b("search")});a.addCommand("mceReplace",function(){b("replace")});a.addButton("search",{title:"searchreplace.search_desc",cmd:"mceSearch"});a.addButton("replace",{title:"searchreplace.replace_desc",cmd:"mceReplace"});a.addShortcut("ctrl+f","searchreplace.search_desc","mceSearch")},getInfo:function(){return{longname:"Search/Replace",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/searchreplace",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("searchreplace",tinymce.plugins.SearchReplacePlugin)})();(function(a){var d=a.each;function c(f,g){var h=g.ownerDocument,e=h.createRange(),j;e.setStartBefore(g);e.setEnd(f.endContainer,f.endOffset);j=h.createElement("body");j.appendChild(e.cloneContents());return j.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length==0}function b(F,D,u){var e,K,E,m;g();m=D.getParent(u.getStart(),"th,td");if(m){K=C(m);E=z();m=J(K.x,K.y)}function I(M,L){M=M.cloneNode(L);M.removeAttribute("id");return M}function g(){var L=0;e=[];d(["thead","tbody","tfoot"],function(M){var N=D.select("> "+M+" tr",F);d(N,function(O,P){P+=L;d(D.select("> td, > th",O),function(V,Q){var R,S,T,U;if(e[P]){while(e[P][Q]){Q++}}T=q(V,"rowspan");U=q(V,"colspan");for(S=P;S<P+T;S++){if(!e[S]){e[S]=[]}for(R=Q;R<Q+U;R++){e[S][R]={part:M,real:S==P&&R==Q,elm:V,rowspan:T,colspan:U}}}})});L+=N.length})}function J(L,N){var M;M=e[N];if(M){return M[L]}}function q(M,L){return parseInt(M.getAttribute(L)||1)}function f(L){return D.hasClass(L.elm,"mceSelected")||L==m}function p(){var L=[];d(F.rows,function(M){d(M.cells,function(N){if(D.hasClass(N,"mceSelected")||N==m.elm){L.push(M);return false}})});return L}function h(){var L=D.createRng();L.setStartAfter(F);L.setEndAfter(F);u.setRng(L);D.remove(F)}function t(L){var M;a.walk(L,function(O){var N;if(O.nodeType==3){d(D.getParents(O.parentNode,null,L).reverse(),function(P){P=I(P,false);if(!M){M=N=P}else{if(N){N.appendChild(P)}}N=P});if(N){N.innerHTML=a.isIE?"&nbsp;":'<br _mce_bogus="1" />'}return false}},"childNodes");L=I(L,false);L.rowSpan=L.colSpan=1;if(M){L.appendChild(M)}else{if(!a.isIE){L.innerHTML='<br _mce_bogus="1" />'}}return L}function n(){var L=D.createRng();d(D.select("tr",F),function(M){if(M.cells.length==0){D.remove(M)}});if(D.select("tr",F).length==0){L.setStartAfter(F);L.setEndAfter(F);u.setRng(L);D.remove(F);return}d(D.select("thead,tbody,tfoot",F),function(M){if(M.rows.length==0){D.remove(M)}});g();row=e[Math.min(e.length-1,K.y)];if(row){u.select(row[Math.min(row.length-1,K.x)].elm,true);u.collapse(true)}}function s(R,Q,T,P){var N,M,L,O,S;N=e[Q][R].elm.parentNode;for(L=1;L<=T;L++){N=D.getNext(N,"tr");if(N){for(M=R;M>=0;M--){S=e[Q+L][M].elm;if(S.parentNode==N){for(O=1;O<=P;O++){D.insertAfter(t(S),S)}break}}if(M==-1){for(O=1;O<=P;O++){N.insertBefore(t(N.cells[0]),N.cells[0])}}}}}function w(){d(e,function(L,M){d(L,function(O,N){var R,Q,S,P;if(f(O)){O=O.elm;R=q(O,"colspan");Q=q(O,"rowspan");if(R>1||Q>1){O.colSpan=O.rowSpan=1;for(P=0;P<R-1;P++){D.insertAfter(t(O),O)}s(N,M,Q-1,R)}}})})}function l(S,Q,W){var M,N,V,T,R,P,U,O,S,L;if(S){pos=C(S);M=pos.x;N=pos.y;V=M+(Q-1);T=N+(W-1)}else{M=K.x;N=K.y;V=E.x;T=E.y}U=J(M,N);O=J(V,T);if(U&&O&&U.part==O.part){w();g();U=J(M,N).elm;U.colSpan=(V-M)+1;U.rowSpan=(T-N)+1;for(P=N;P<=T;P++){for(R=M;R<=V;R++){S=e[P][R].elm;if(S!=U){L=a.grep(S.childNodes);d(L,function(Y,X){if(Y.nodeName!="BR"||X!=L.length-1){U.appendChild(Y)}});D.remove(S)}}}n()}}function o(T){var M,S,L,P,Q,R,N,O;d(e,function(U,V){d(U,function(X,W){if(f(X)){X=X.elm;Q=X.parentNode;R=I(Q,false);M=V;if(T){return false}}});if(T){return !M}});for(P=0;P<e[0].length;P++){S=e[M][P].elm;if(S!=L){if(!T){rowSpan=q(S,"rowspan");if(rowSpan>1){S.rowSpan=rowSpan+1;continue}}else{if(M>0&&e[M-1][P]){O=e[M-1][P].elm;rowSpan=q(O,"rowspan");if(rowSpan>1){O.rowSpan=rowSpan+1;continue}}}N=t(S);N.colSpan=S.colSpan;R.appendChild(N);L=S}}if(R.hasChildNodes()){if(!T){D.insertAfter(R,Q)}else{Q.parentNode.insertBefore(R,Q)}}}function r(L){var N,M;d(e,function(O,P){d(O,function(R,Q){if(f(R)){N=Q;if(L){return false}}});if(L){return !N}});d(e,function(R,S){var O=R[N].elm,P,Q;if(O!=M){Q=q(O,"colspan");P=q(O,"rowspan");if(Q==1){if(!L){D.insertAfter(t(O),O);s(N,S,P-1,Q)}else{O.parentNode.insertBefore(t(O),O);s(N,S,P-1,Q)}}else{O.colSpan++}M=O}})}function k(){var L=[];d(e,function(M,N){d(M,function(P,O){if(f(P)&&a.inArray(L,O)===-1){d(e,function(S){var Q=S[O].elm,R;R=q(Q,"colspan");if(R>1){Q.colSpan=R-1}else{D.remove(Q)}});L.push(O)}})});n()}function j(){var M;function L(P){var N,Q,O;N=D.getNext(P,"tr");d(P.cells,function(R){var S=q(R,"rowspan");if(S>1){R.rowSpan=S-1;Q=C(R);s(Q.x,Q.y,1,1)}});Q=C(P.cells[0]);d(e[Q.y],function(R){var S;R=R.elm;if(R!=O){S=q(R,"rowspan");if(S<=1){D.remove(R)}else{R.rowSpan=S-1}O=R}})}M=p();d(M.reverse(),function(N){L(N)});n()}function B(){var L=p();D.remove(L);n();return L}function A(){var L=p();d(L,function(N,M){L[M]=I(N,true)});return L}function G(N,L){var P=p(),M=P[L?0:P.length-1],O=M.cells.length;d(e,function(R){var Q;O=0;d(R,function(T,S){if(T.real){O+=T.colspan}if(T.elm.parentNode==M){Q=1}});if(Q){return false}});if(!L){N.reverse()}d(N,function(S){var R=S.cells.length,Q;for(i=0;i<R;i++){Q=S.cells[i];Q.colSpan=Q.rowSpan=1}for(i=R;i<O;i++){S.appendChild(t(S.cells[R-1]))}for(i=O;i<R;i++){D.remove(S.cells[i])}if(L){M.parentNode.insertBefore(S,M)}else{D.insertAfter(S,M)}})}function C(M){var L;d(e,function(N,O){d(N,function(Q,P){if(Q.elm==M){L={x:P,y:O};return false}});return !L});return L}function H(L){K=C(L)}function z(){var N,M,L;M=L=0;d(e,function(O,P){d(O,function(R,Q){var T,S;if(f(R)){R=e[P][Q];if(Q>M){M=Q}if(P>L){L=P}if(R.real){T=R.colspan-1;S=R.rowspan-1;if(T){if(Q+T>M){M=Q+T}}if(S){if(P+S>L){L=P+S}}}}})});return{x:M,y:L}}function v(R){var N,O,T,S,M,L,P,Q;E=C(R);if(K&&E){N=Math.min(K.x,E.x);O=Math.min(K.y,E.y);T=Math.max(K.x,E.x);S=Math.max(K.y,E.y);M=T;L=S;for(y=O;y<=L;y++){R=e[y][N];if(!R.real){if(N-(R.colspan-1)<N){N-=R.colspan-1}}}for(x=N;x<=M;x++){R=e[O][x];if(!R.real){if(O-(R.rowspan-1)<O){O-=R.rowspan-1}}}for(y=O;y<=S;y++){for(x=N;x<=T;x++){R=e[y][x];if(R.real){P=R.colspan-1;Q=R.rowspan-1;if(P){if(x+P>M){M=x+P}}if(Q){if(y+Q>L){L=y+Q}}}}}D.removeClass(D.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=O;y<=L;y++){for(x=N;x<=M;x++){D.addClass(e[y][x].elm,"mceSelected")}}}}a.extend(this,{deleteTable:h,split:w,merge:l,insertRow:o,insertCol:r,deleteCols:k,deleteRows:j,cutRows:B,copyRows:A,pasteRows:G,getPos:C,setStartCell:H,setEndCell:v})}a.create("tinymce.plugins.TablePlugin",{init:function(e,f){var h,k;function j(n){var l=e.selection,m=e.dom.getParent(n||l.getNode(),"table");if(m){return new b(m,e.dom,l)}}function g(){e.getBody().style.webkitUserSelect="";e.dom.removeClass(e.dom.select("td.mceSelected,th.mceSelected"),"mceSelected")}d([["table","table.desc","mceInsertTable",true],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",true],["cell_props","table.cell_desc","mceTableCellProps",true],["split_cells","table.split_cells_desc","mceTableSplitCells",true],["merge_cells","table.merge_cells_desc","mceTableMergeCells",true]],function(l){e.addButton(l[0],{title:l[1],cmd:l[2],ui:l[3]})});if(!a.isIE){e.onClick.add(function(l,m){m=m.target;if(m.nodeName==="TABLE"){l.selection.select(m)}})}e.onNodeChange.add(function(m,l,q){var o;q=m.selection.getStart();o=m.dom.getParent(q,"td,th,caption");l.setActive("table",q.nodeName==="TABLE"||!!o);if(o&&o.nodeName==="CAPTION"){o=0}l.setDisabled("delete_table",!o);l.setDisabled("delete_col",!o);l.setDisabled("delete_table",!o);l.setDisabled("delete_row",!o);l.setDisabled("col_after",!o);l.setDisabled("col_before",!o);l.setDisabled("row_after",!o);l.setDisabled("row_before",!o);l.setDisabled("row_props",!o);l.setDisabled("cell_props",!o);l.setDisabled("split_cells",!o);l.setDisabled("merge_cells",!o)});e.onInit.add(function(l){var o,q,p=l.dom,n;h=l.windowManager;l.onMouseDown.add(function(r,s){if(s.button!=2){g();q=p.getParent(s.target,"td,th");o=p.getParent(q,"table")}});p.bind(l.getDoc(),"mouseover",function(t){var s,r,u=t.target;if(q&&(n||u!=q)&&(u.nodeName=="TD"||u.nodeName=="TH")){r=p.getParent(u,"table");if(r==o){if(!n){n=j(r);n.setStartCell(q);l.getBody().style.webkitUserSelect="none"}n.setEndCell(u)}s=l.selection.getSel();if(s.removeAllRanges){s.removeAllRanges()}else{s.empty()}t.preventDefault()}});l.onMouseUp.add(function(w,z){var r,s=w.selection,B,D=s.getSel(),C,u,A,t;if(q){if(n){w.getBody().style.webkitUserSelect=""}function v(E,G){var F=new a.dom.TreeWalker(E,E);do{if(E.nodeType==3&&a.trim(E.nodeValue).length!=0){if(G){r.setStart(E,0)}else{r.setEnd(E,E.nodeValue.length)}return}if(E.nodeName=="BR"){if(G){r.setStartBefore(E)}else{r.setEndBefore(E)}return}}while(E=(G?F.next():F.prev()))}B=p.select("td.mceSelected,th.mceSelected");if(B.length>0){r=p.createRng();u=B[0];t=B[B.length-1];v(u,1);C=new a.dom.TreeWalker(u,p.getParent(B[0],"table"));do{if(u.nodeName=="TD"||u.nodeName=="TH"){if(!p.hasClass(u,"mceSelected")){break}A=u}}while(u=C.next());v(A);s.setRng(r)}w.nodeChanged();q=n=o=null}});l.onKeyUp.add(function(r,s){g()});if(l&&l.plugins.contextmenu){l.plugins.contextmenu.onContextMenu.add(function(t,r,v){var w,u=l.selection,s=u.getNode()||l.getBody();if(l.dom.getParent(v,"td")||l.dom.getParent(v,"th")||l.dom.select("td.mceSelected,th.mceSelected").length){r.removeAll();if(s.nodeName=="A"&&!l.dom.getAttrib(s,"name")){r.add({title:"advanced.link_desc",icon:"link",cmd:l.plugins.advlink?"mceAdvLink":"mceLink",ui:true});r.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});r.addSeparator()}if(s.nodeName=="IMG"&&s.className.indexOf("mceItem")==-1){r.add({title:"advanced.image_desc",icon:"image",cmd:l.plugins.advimage?"mceAdvImage":"mceImage",ui:true});r.addSeparator()}r.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}});r.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"});r.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"});r.addSeparator();w=r.addMenu({title:"table.cell"});w.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"});w.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"});w.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"});w=r.addMenu({title:"table.row"});w.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"});w.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"});w.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"});w.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"});w.addSeparator();w.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"});w.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"});w.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!k);w.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!k);w=r.addMenu({title:"table.col"});w.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"});w.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"});w.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})}else{r.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})}})}if(!a.isIE){function m(){var r;for(r=l.getBody().lastChild;r&&r.nodeType==3&&!r.nodeValue.length;r=r.previousSibling){}if(r&&r.nodeName=="TABLE"){l.dom.add(l.getBody(),"p",null,'<br mce_bogus="1" />')}}if(a.isGecko){l.onKeyDown.add(function(s,u){var r,t,v=s.dom;if(u.keyCode==37||u.keyCode==38){r=s.selection.getRng();t=v.getParent(r.startContainer,"table");if(t&&s.getBody().firstChild==t){if(c(r,t)){r=v.createRng();r.setStartBefore(t);r.setEndBefore(t);s.selection.setRng(r);u.preventDefault()}}}})}l.onKeyUp.add(m);l.onSetContent.add(m);l.onVisualAid.add(m);l.onPreProcess.add(function(r,t){var s=t.node.lastChild;if(s&&s.childNodes.length==1&&s.firstChild.nodeName=="BR"){r.dom.remove(s)}});m()}});d({mceTableSplitCells:function(l){l.split()},mceTableMergeCells:function(m){var n,o,l;l=e.dom.getParent(e.selection.getNode(),"th,td");if(l){n=l.rowSpan;o=l.colSpan}if(!e.dom.select("td.mceSelected,th.mceSelected").length){h.open({url:f+"/merge_cells.htm",width:240+parseInt(e.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(e.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:n,cols:o,onaction:function(p){m.merge(l,p.cols,p.rows)},plugin_url:f})}else{m.merge()}},mceTableInsertRowBefore:function(l){l.insertRow(true)},mceTableInsertRowAfter:function(l){l.insertRow()},mceTableInsertColBefore:function(l){l.insertCol(true)},mceTableInsertColAfter:function(l){l.insertCol()},mceTableDeleteCol:function(l){l.deleteCols()},mceTableDeleteRow:function(l){l.deleteRows()},mceTableCutRow:function(l){k=l.cutRows()},mceTableCopyRow:function(l){k=l.copyRows()},mceTablePasteRowBefore:function(l){l.pasteRows(k,true)},mceTablePasteRowAfter:function(l){l.pasteRows(k)},mceTableDelete:function(l){l.deleteTable()}},function(m,l){e.addCommand(l,function(){var n=j();if(n){m(n);e.execCommand("mceRepaint");g()}})});d({mceInsertTable:function(l){h.open({url:f+"/table.htm",width:400+parseInt(e.getLang("table.table_delta_width",0)),height:320+parseInt(e.getLang("table.table_delta_height",0)),inline:1},{plugin_url:f,action:l?l.action:0})},mceTableRowProps:function(){h.open({url:f+"/row.htm",width:400+parseInt(e.getLang("table.rowprops_delta_width",0)),height:295+parseInt(e.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:f})},mceTableCellProps:function(){h.open({url:f+"/cell.htm",width:400+parseInt(e.getLang("table.cellprops_delta_width",0)),height:295+parseInt(e.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:f})}},function(m,l){e.addCommand(l,function(n,o){m(o)})})}});a.PluginManager.add("table",a.plugins.TablePlugin)})(tinymce);(function(){var a=tinymce.dom.Event,c=tinymce.each,b=tinymce.DOM;tinymce.create("tinymce.plugins.ContextMenu",{init:function(d){var g=this,h,f;g.editor=d;g.onContextMenu=new tinymce.util.Dispatcher(this);f=d.onContextMenu.add(function(i,j){if(!j.ctrlKey){if(h){i.selection.setRng(h)}g._getMenu(i).showMenu(j.clientX||j.pageX,j.clientY||j.pageX);a.add(i.getDoc(),"click",function(k){e(i,k)});a.cancel(j)}});d.onRemove.add(function(){if(g._menu){g._menu.removeAll()}});function e(i,j){h=null;if(j&&j.button==2){h=i.selection.getRng();return}if(g._menu){g._menu.removeAll();g._menu.destroy();a.remove(i.getDoc(),"click",e)}}d.onMouseDown.add(e);d.onKeyDown.add(e);d.onKeyDown.add(function(i,j){if(j.shiftKey&&!j.ctrlKey&&!j.altKey&&j.keyCode===121){a.cancel(j);f(i,j)}})},getInfo:function(){return{longname:"Contextmenu",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/contextmenu",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getMenu:function(g){var l=this,f=l._menu,i=g.selection,e=i.isCollapsed(),d=i.getNode()||g.getBody(),h,k,j;if(f){f.removeAll();f.destroy()}k=b.getPos(g.getContentAreaContainer());j=b.getPos(g.getContainer());f=g.controlManager.createDropMenu("contextmenu",{offset_x:k.x+g.getParam("contextmenu_offset_x",0),offset_y:k.y+g.getParam("contextmenu_offset_y",0),constrain:1,keyboard_focus:true});l._menu=f;f.add({title:"advanced.cut_desc",icon:"cut",cmd:"Cut"}).setDisabled(e);f.add({title:"advanced.copy_desc",icon:"copy",cmd:"Copy"}).setDisabled(e);f.add({title:"advanced.paste_desc",icon:"paste",cmd:"Paste"});if((d.nodeName=="A"&&!g.dom.getAttrib(d,"name"))||!e){f.addSeparator();f.add({title:"advanced.link_desc",icon:"link",cmd:g.plugins.advlink?"mceAdvLink":"mceLink",ui:true});f.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"})}f.addSeparator();f.add({title:"advanced.image_desc",icon:"image",cmd:g.plugins.advimage?"mceAdvImage":"mceImage",ui:true});f.addSeparator();h=f.addMenu({title:"contextmenu.align"});h.add({title:"contextmenu.left",icon:"justifyleft",cmd:"JustifyLeft"});h.add({title:"contextmenu.center",icon:"justifycenter",cmd:"JustifyCenter"});h.add({title:"contextmenu.right",icon:"justifyright",cmd:"JustifyRight"});h.add({title:"contextmenu.full",icon:"justifyfull",cmd:"JustifyFull"});l.onContextMenu.dispatch(l,f,d,e);return f}});tinymce.PluginManager.add("contextmenu",tinymce.plugins.ContextMenu)})();(function(){var c=tinymce.each,d=null,a={paste_auto_cleanup_on_paste:true,paste_enable_default_filters:true,paste_block_drop:false,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:false,paste_remove_styles:false,paste_remove_styles_if_webkit:true,paste_convert_middot_lists:true,paste_convert_headers_to_strong:false,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:false,paste_text_sticky:false,paste_text_notifyalways:false,paste_text_linebreaktype:"p",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};function b(e,f){return e.getParam(f,a[f])}tinymce.create("tinymce.plugins.PastePlugin",{init:function(e,f){var g=this;g.editor=e;g.url=f;g.onPreProcess=new tinymce.util.Dispatcher(g);g.onPostProcess=new tinymce.util.Dispatcher(g);g.onPreProcess.add(g._preProcess);g.onPostProcess.add(g._postProcess);g.onPreProcess.add(function(j,k){e.execCallback("paste_preprocess",j,k)});g.onPostProcess.add(function(j,k){e.execCallback("paste_postprocess",j,k)});e.pasteAsPlainText=false;function i(l,j){var k=e.dom;g.onPreProcess.dispatch(g,l);l.node=k.create("div",0,l.content);g.onPostProcess.dispatch(g,l);l.content=e.serializer.serialize(l.node,{getInner:1});if((!j)&&(e.pasteAsPlainText)){g._insertPlainText(e,k,l.content);if(!b(e,"paste_text_sticky")){e.pasteAsPlainText=false;e.controlManager.setActive("pastetext",false)}}else{if(/<(p|h[1-6]|ul|ol)/.test(l.content)){g._insertBlockContent(e,k,l.content)}else{g._insert(l.content)}}}e.addCommand("mceInsertClipboardContent",function(j,k){i(k,true)});if(!b(e,"paste_text_use_dialog")){e.addCommand("mcePasteText",function(l,j){var k=tinymce.util.Cookie;e.pasteAsPlainText=!e.pasteAsPlainText;e.controlManager.setActive("pastetext",e.pasteAsPlainText);if((e.pasteAsPlainText)&&(!k.get("tinymcePasteText"))){if(b(e,"paste_text_sticky")){e.windowManager.alert(e.translate("paste.plaintext_mode_sticky"))}else{e.windowManager.alert(e.translate("paste.plaintext_mode_sticky"))}if(!b(e,"paste_text_notifyalways")){k.set("tinymcePasteText","1",new Date(new Date().getFullYear()+1,12,31))}}})}e.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});e.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});function h(s){var m,q,j,l=e.selection,p=e.dom,r=e.getBody(),k;if(e.pasteAsPlainText&&(s.clipboardData||p.doc.dataTransfer)){s.preventDefault();i({content:(s.clipboardData||p.doc.dataTransfer).getData("Text")},true);return}if(p.get("_mcePaste")){return}m=p.add(r,"div",{id:"_mcePaste","class":"mcePaste"},'\uFEFF<br _mce_bogus="1">');if(r!=e.getDoc().body){k=p.getPos(e.selection.getStart(),r).y}else{k=r.scrollTop}p.setStyles(m,{position:"absolute",left:-10000,top:k,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){j=p.doc.body.createTextRange();j.moveToElementText(m);j.execCommand("Paste");p.remove(m);if(m.innerHTML==="\uFEFF"){e.execCommand("mcePasteWord");s.preventDefault();return}i({content:m.innerHTML});return tinymce.dom.Event.cancel(s)}else{function o(n){n.preventDefault()}p.bind(e.getDoc(),"mousedown",o);p.bind(e.getDoc(),"keydown",o);q=e.selection.getRng();m=m.firstChild;j=e.getDoc().createRange();j.setStart(m,0);j.setEnd(m,1);l.setRng(j);window.setTimeout(function(){var t="",n=p.select("div.mcePaste");c(n,function(v){var u=v.firstChild;if(u&&u.nodeName=="DIV"&&u.style.marginTop&&u.style.backgroundColor){p.remove(u,1)}c(p.select("div.mcePaste",v),function(w){p.remove(w,1)});c(p.select("span.Apple-style-span",v),function(w){p.remove(w,1)});c(p.select("br[_mce_bogus]",v),function(w){p.remove(w)});t+=v.innerHTML});c(n,function(u){p.remove(u)});if(q){l.setRng(q)}i({content:t});p.unbind(e.getDoc(),"mousedown",o);p.unbind(e.getDoc(),"keydown",o)},0)}}if(b(e,"paste_auto_cleanup_on_paste")){if(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)){e.onKeyDown.add(function(j,k){if(((tinymce.isMac?k.metaKey:k.ctrlKey)&&k.keyCode==86)||(k.shiftKey&&k.keyCode==45)){h(k)}})}else{e.onPaste.addToTop(function(j,k){return h(k)})}}if(b(e,"paste_block_drop")){e.onInit.add(function(){e.dom.bind(e.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(j){j.preventDefault();j.stopPropagation();return false})})}g._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(j,f){var l=this.editor,k=f.content,q=tinymce.grep,e=tinymce.explode,g=tinymce.trim,m,i;function n(h){c(h,function(o){if(o.constructor==RegExp){k=k.replace(o,"")}else{k=k.replace(o[0],o[1])}})}if(l.settings.paste_enable_default_filters==false){return}if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(k)||f.wordContent){f.wordContent=true;n([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);if(b(l,"paste_convert_headers_to_strong")){k=k.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")}if(b(l,"paste_convert_middot_lists")){n([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"]])}n([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"]]);do{m=k.length;k=k.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1")}while(m!=k.length);if(b(l,"paste_retain_style_properties").replace(/^none$/i,"").length==0){k=k.replace(/<\/?span[^>]*>/gi,"")}else{n([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(o,h){return(h.length>0)?h.replace(/./," ").slice(Math.floor(h.length/2)).split("").join("\u00a0"):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(u,h,t){var v=[],o=0,r=e(g(t).replace(/&quot;/gi,"'"),";");c(r,function(s){var w,y,z=e(s,":");function x(A){return A+((A!=="0")&&(/\d$/.test(A)))?"px":""}if(z.length==2){w=z[0].toLowerCase();y=z[1].toLowerCase();switch(w){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":v[o++]=w.replace(/^mso-|-alt$/g,"")+":"+x(y);return;case"horiz-align":v[o++]="text-align:"+y;return;case"vert-align":v[o++]="vertical-align:"+y;return;case"font-color":case"mso-foreground":v[o++]="color:"+y;return;case"mso-background":case"mso-highlight":v[o++]="background:"+y;return;case"mso-default-height":v[o++]="min-height:"+x(y);return;case"mso-default-width":v[o++]="min-width:"+x(y);return;case"mso-padding-between-alt":v[o++]="border-collapse:separate;border-spacing:"+x(y);return;case"text-line-through":if((y=="single")||(y=="double")){v[o++]="text-decoration:line-through"}return;case"mso-zero-height":if(y=="yes"){v[o++]="display:none"}return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(w)){return}v[o++]=w+":"+z[1]}});if(o>0){return h+' style="'+v.join(";")+'"'}else{return h}}]])}}if(b(l,"paste_convert_headers_to_strong")){n([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]])}i=b(l,"paste_strip_class_attributes");if(i!=="none"){function p(r,o){if(i==="all"){return""}var h=q(e(o.replace(/^(["'])(.*)\1$/,"$2")," "),function(s){return(/^(?!mso)/i.test(s))});return h.length?' class="'+h.join(" ")+'"':""}k=k.replace(/ class="([^"]+)"/gi,p);k=k.replace(/ class=(\w+)/gi,p)}if(b(l,"paste_remove_spans")){k=k.replace(/<\/?span[^>]*>/gi,"")}f.content=k},_postProcess:function(h,j){var g=this,f=g.editor,i=f.dom,e;if(f.settings.paste_enable_default_filters==false){return}if(j.wordContent){c(i.select("a",j.node),function(k){if(!k.href||k.href.indexOf("#_Toc")!=-1){i.remove(k,1)}});if(b(f,"paste_convert_middot_lists")){g._convertLists(h,j)}e=b(f,"paste_retain_style_properties");if((tinymce.is(e,"string"))&&(e!=="all")&&(e!=="*")){e=tinymce.explode(e.replace(/^none$/i,""));c(i.select("*",j.node),function(n){var o={},l=0,m,p,k;if(e){for(m=0;m<e.length;m++){p=e[m];k=i.getStyle(n,p);if(k){o[p]=k;l++}}}i.setAttrib(n,"style","");if(e&&l>0){i.setStyles(n,o)}else{if(n.nodeName=="SPAN"&&!n.className){i.remove(n,true)}}})}}if(b(f,"paste_remove_styles")||(b(f,"paste_remove_styles_if_webkit")&&tinymce.isWebKit)){c(i.select("*[style]",j.node),function(k){k.removeAttribute("style");k.removeAttribute("_mce_style")})}else{if(tinymce.isWebKit){c(i.select("*",j.node),function(k){k.removeAttribute("_mce_style")})}}g._fixListItems(h,j)},_fixListItems:function(f,h){var e,g=this.editor.dom;c(h.node.childNodes,function(i){if(i.tagName==="LI"){if(!e){e=g.create("UL");i.parentNode.insertBefore(e,i)}e.appendChild(i)}else{e=null}})},_convertLists:function(i,f){var k=i.editor.dom,h,n,e=-1,j,m=[],g,l;c(k.select("p",f.node),function(u){var q,v="",t,s,o,r;for(q=u.firstChild;q&&q.nodeType==3;q=q.nextSibling){v+=q.nodeValue}v=u.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g,"\u00a0");if(/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(v)){t="ul"}if(/^__MCE_ITEM__\s*\w+\.\s*\u00a0{2,}/.test(v)){t="ol"}if(t){j=parseFloat(u.style.marginLeft||0);if(j>e){m.push(j)}if(!h||t!=g){h=k.create(t);k.insertAfter(h,u)}else{if(j>e){h=n.appendChild(k.create(t))}else{if(j<e){o=tinymce.inArray(m,j);r=k.getParents(h.parentNode,t);h=r[r.length-1-o]||h}}}c(k.select("span",u),function(w){var p=w.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");if(t=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(p)){k.remove(w)}else{if(/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(p)){k.remove(w)}}});s=u.innerHTML;if(t=="ul"){s=u.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,"")}else{s=u.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,"")}n=h.appendChild(k.create("li",0,s));k.remove(u);e=j;g=t}else{h=e=0}});l=f.node.innerHTML;if(l.indexOf("__MCE_ITEM__")!=-1){f.node.innerHTML=l.replace(/__MCE_ITEM__/g,"")}},_insertBlockContent:function(l,i,m){var f,h,g=l.selection,p,n,e,o,j,k="mce_marker";function q(t){var s;if(tinymce.isIE){s=l.getDoc().body.createTextRange();s.moveToElementText(t);s.collapse(false);s.select()}else{g.select(t,1);g.collapse(false)}}this._insert('<span id="'+k+'"></span>',1);h=i.get(k);f=i.getParent(h,"p,h1,h2,h3,h4,h5,h6,ul,ol,th,td");if(f&&!/TD|TH/.test(f.nodeName)){h=i.split(f,h);c(i.create("div",0,m).childNodes,function(r){p=h.parentNode.insertBefore(r.cloneNode(true),h)});q(p)}else{i.setOuterHTML(h,m);g.select(l.getBody(),1);g.collapse(0)}while(n=i.get(k)){i.remove(n)}n=g.getStart();e=i.getViewPort(l.getWin());o=l.dom.getPos(n).y;j=n.clientHeight;if(o<e.y||o+j>e.y+e.h){l.getDoc().body.scrollTop=o<e.y?o:o-e.h+25}},_insert:function(g,e){var f=this.editor,i=f.selection.getRng();if(!f.selection.isCollapsed()&&i.startContainer!=i.endContainer){f.getDoc().execCommand("Delete",false,null)}f.execCommand(tinymce.isGecko?"insertHTML":"mceInsertContent",false,g,{skip_undo:e})},_insertPlainText:function(g,t,u){var s,v,l,j,q,o,e,f,n=g.getWin(),y=g.getDoc(),r=g.selection,k=tinymce.is,x=tinymce.inArray,m=b(g,"paste_text_linebreaktype"),p=b(g,"paste_text_replacements");function z(h){c(h,function(i){if(i.constructor==RegExp){u=u.replace(i,"")}else{u=u.replace(i[0],i[1])}})}if((typeof(u)==="string")&&(u.length>0)){if(!d){d=("34,quot,38,amp,39,apos,60,lt,62,gt,"+g.serializer.settings.entities).split(",")}if(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(u)){z([/[\n\r]+/g])}else{z([/\r+/g])}z([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/&(#\d+|[a-z0-9]{1,10});/gi,function(i,h){if(h.charAt(0)==="#"){return String.fromCharCode(h.slice(1))}else{return((i=x(d,h))>0)?String.fromCharCode(d[i-1]):" "}}],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"],/^\s+|\s+$/g]);u=t.encode(u);if(!r.isCollapsed()){y.execCommand("Delete",false,null)}if(k(p,"array")||(k(p,"array"))){z(p)}else{if(k(p,"string")){z(new RegExp(p,"gi"))}}if(m=="none"){z([[/\n+/g," "]])}else{if(m=="br"){z([[/\n/g,"<br />"]])}else{z([/^\s+|\s+$/g,[/\n\n/g,"</p><p>"],[/\n/g,"<br />"]])}}if((l=u.indexOf("</p><p>"))!=-1){j=u.lastIndexOf("</p><p>");q=r.getNode();o=[];do{if(q.nodeType==1){if(q.nodeName=="TD"||q.nodeName=="BODY"){break}o[o.length]=q}}while(q=q.parentNode);if(o.length>0){e=u.substring(0,l);f="";for(s=0,v=o.length;s<v;s++){e+="</"+o[s].nodeName.toLowerCase()+">";f+="<"+o[o.length-s-1].nodeName.toLowerCase()+">"}if(l==j){u=e+f+u.substring(l+7)}else{u=e+u.substring(l+4,j+4)+f+u.substring(j+7)}}}g.execCommand("mceInsertRawHTML",false,u+'<span id="_plain_text_marker">&nbsp;</span>');window.setTimeout(function(){var i=t.get("_plain_text_marker"),B,h,A,w;r.select(i,false);y.execCommand("Delete",false,null);i=null;B=r.getStart();h=t.getViewPort(n);A=t.getPos(B).y;w=B.clientHeight;if((A<h.y)||(A+w>h.y+h.h)){y.body.scrollTop=A<h.y?A:A-h.h+25}},0)}},_legacySupport:function(){var f=this,e=f.editor;e.addCommand("mcePasteWord",function(){e.windowManager.open({file:f.url+"/pasteword.htm",width:parseInt(b(e,"paste_dialog_width")),height:parseInt(b(e,"paste_dialog_height")),inline:1})});if(b(e,"paste_text_use_dialog")){e.addCommand("mcePasteText",function(){e.windowManager.open({file:f.url+"/pastetext.htm",width:parseInt(b(e,"paste_dialog_width")),height:parseInt(b(e,"paste_dialog_height")),inline:1})})}e.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}});tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)})();(function(){var a=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(c,d){var e=this,f={},b;e.editor=c;c.addCommand("mceFullScreen",function(){var h,i=a.doc.documentElement;if(c.getParam("fullscreen_is_enabled")){if(c.getParam("fullscreen_new_window")){closeFullscreen()}else{a.win.setTimeout(function(){tinymce.dom.Event.remove(a.win,"resize",e.resizeFunc);tinyMCE.get(c.getParam("fullscreen_editor_id")).setContent(c.getContent({format:"raw"}),{format:"raw"});tinyMCE.remove(c);a.remove("mce_fullscreen_container");i.style.overflow=c.getParam("fullscreen_html_overflow");a.setStyle(a.doc.body,"overflow",c.getParam("fullscreen_overflow"));a.win.scrollTo(c.getParam("fullscreen_scrollx"),c.getParam("fullscreen_scrolly"));tinyMCE.settings=tinyMCE.oldSettings},10)}return}if(c.getParam("fullscreen_new_window")){h=a.win.open(d+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{h.resizeTo(screen.availWidth,screen.availHeight)}catch(g){}}else{tinyMCE.oldSettings=tinyMCE.settings;f.fullscreen_overflow=a.getStyle(a.doc.body,"overflow",1)||"auto";f.fullscreen_html_overflow=a.getStyle(i,"overflow",1);b=a.getViewPort();f.fullscreen_scrollx=b.x;f.fullscreen_scrolly=b.y;if(tinymce.isOpera&&f.fullscreen_overflow=="visible"){f.fullscreen_overflow="auto"}if(tinymce.isIE&&f.fullscreen_overflow=="scroll"){f.fullscreen_overflow="auto"}if(tinymce.isIE&&(f.fullscreen_html_overflow=="visible"||f.fullscreen_html_overflow=="scroll")){f.fullscreen_html_overflow="auto"}if(f.fullscreen_overflow=="0px"){f.fullscreen_overflow=""}a.setStyle(a.doc.body,"overflow","hidden");i.style.overflow="hidden";b=a.getViewPort();a.win.scrollTo(0,0);if(tinymce.isIE){b.h-=1}n=a.add(a.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+(tinymce.isIE6||(tinymce.isIE&&!a.boxModel)?"absolute":"fixed")+";top:0;left:0;width:"+b.w+"px;height:"+b.h+"px;z-index:200000;"});a.add(n,"div",{id:"mce_fullscreen"});tinymce.each(c.settings,function(j,k){f[k]=j});f.id="mce_fullscreen";f.width=n.clientWidth;f.height=n.clientHeight-15;f.fullscreen_is_enabled=true;f.fullscreen_editor_id=c.id;f.theme_advanced_resizing=false;f.save_onsavecallback=function(){c.setContent(tinyMCE.get(f.id).getContent({format:"raw"}),{format:"raw"});c.execCommand("mceSave")};tinymce.each(c.getParam("fullscreen_settings"),function(l,j){f[j]=l});if(f.theme_advanced_toolbar_location==="external"){f.theme_advanced_toolbar_location="top"}e.fullscreenEditor=new tinymce.Editor("mce_fullscreen",f);e.fullscreenEditor.onInit.add(function(){e.fullscreenEditor.setContent(c.getContent());e.fullscreenEditor.focus()});e.fullscreenEditor.render();e.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container");e.fullscreenElement.update();e.resizeFunc=tinymce.dom.Event.add(a.win,"resize",function(){var l=tinymce.DOM.getViewPort(),k=e.fullscreenEditor,j,m;j=k.dom.getSize(k.getContainer().firstChild);m=k.dom.getSize(k.getContainer().getElementsByTagName("iframe")[0]);k.theme.resizeTo(l.w-j.w+m.w,l.h-j.h+m.h)})}});c.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"});c.onNodeChange.add(function(h,g){g.setActive("fullscreen",h.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)})();(function(){tinymce.create("tinymce.plugins.Directionality",{init:function(a,b){var c=this;c.editor=a;a.addCommand("mceDirectionLTR",function(){var d=a.dom.getParent(a.selection.getNode(),a.dom.isBlock);if(d){if(a.dom.getAttrib(d,"dir")!="ltr"){a.dom.setAttrib(d,"dir","ltr")}else{a.dom.setAttrib(d,"dir","")}}a.nodeChanged()});a.addCommand("mceDirectionRTL",function(){var d=a.dom.getParent(a.selection.getNode(),a.dom.isBlock);if(d){if(a.dom.getAttrib(d,"dir")!="rtl"){a.dom.setAttrib(d,"dir","rtl")}else{a.dom.setAttrib(d,"dir","")}}a.nodeChanged()});a.addButton("ltr",{title:"directionality.ltr_desc",cmd:"mceDirectionLTR"});a.addButton("rtl",{title:"directionality.rtl_desc",cmd:"mceDirectionRTL"});a.onNodeChange.add(c._nodeChange,c)},getInfo:function(){return{longname:"Directionality",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/directionality",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(b,a,e){var d=b.dom,c;e=d.getParent(e,d.isBlock);if(!e){a.setDisabled("ltr",1);a.setDisabled("rtl",1);return}c=d.getAttrib(e,"dir");a.setActive("ltr",c=="ltr");a.setDisabled("ltr",0);a.setActive("rtl",c=="rtl");a.setDisabled("rtl",0)}});tinymce.PluginManager.add("directionality",tinymce.plugins.Directionality)})();(function(){var d=tinymce.DOM,b=tinymce.dom.Element,a=tinymce.dom.Event,e=tinymce.each,c=tinymce.is;tinymce.create("tinymce.plugins.InlinePopups",{init:function(f,g){f.onBeforeRenderUI.add(function(){f.windowManager=new tinymce.InlineWindowManager(f);d.loadCSS(g+"/skins/"+(f.settings.inlinepopups_skin||"clearlooks2")+"/window.css")})},getInfo:function(){return{longname:"InlinePopups",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/inlinepopups",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(f){var g=this;g.parent(f);g.zIndex=300000;g.count=0;g.windows={}},open:function(s,j){var z=this,k,i="",r=z.editor,g=0,v=0,h,m,o,q,l,x,y,n;s=s||{};j=j||{};if(!s.inline){return z.parent(s,j)}n=z._frontWindow();if(n&&d.get(n.id+"_ifr")){n.focussedElement=d.get(n.id+"_ifr").contentWindow.document.activeElement}if(!s.type){z.bookmark=r.selection.getBookmark(1)}k=d.uniqueId();h=d.getViewPort();s.width=parseInt(s.width||320);s.height=parseInt(s.height||240)+(tinymce.isIE?8:0);s.min_width=parseInt(s.min_width||150);s.min_height=parseInt(s.min_height||100);s.max_width=parseInt(s.max_width||2000);s.max_height=parseInt(s.max_height||2000);s.left=s.left||Math.round(Math.max(h.x,h.x+(h.w/2)-(s.width/2)));s.top=s.top||Math.round(Math.max(h.y,h.y+(h.h/2)-(s.height/2)));s.movable=s.resizable=true;j.mce_width=s.width;j.mce_height=s.height;j.mce_inline=true;j.mce_window_id=k;j.mce_auto_focus=s.auto_focus;z.features=s;z.params=j;z.onOpen.dispatch(z,s,j);if(s.type){i+=" mceModal";if(s.type){i+=" mce"+s.type.substring(0,1).toUpperCase()+s.type.substring(1)}s.resizable=false}if(s.statusbar){i+=" mceStatusbar"}if(s.resizable){i+=" mceResizable"}if(s.minimizable){i+=" mceMinimizable"}if(s.maximizable){i+=" mceMaximizable"}if(s.movable){i+=" mceMovable"}z._addAll(d.doc.body,["div",{id:k,role:"dialog","aria-labelledby":s.type?k+"_content":k+"_title","class":(r.settings.inlinepopups_skin||"clearlooks2")+(tinymce.isIE&&window.getSelection?" ie9":""),style:"width:100px;height:100px"},["div",{id:k+"_wrapper","class":"mceWrapper"+i},["div",{id:k+"_top","class":"mceTop"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:k+"_title"},s.title||""]],["div",{id:k+"_middle","class":"mceMiddle"},["div",{id:k+"_left","class":"mceLeft",tabindex:"0"}],["span",{id:k+"_content"}],["div",{id:k+"_right","class":"mceRight",tabindex:"0"}]],["div",{id:k+"_bottom","class":"mceBottom"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:k+"_status"},"Content"]],["a",{"class":"mceMove",tabindex:"-1",href:"javascript:;"}],["a",{"class":"mceMin",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMax",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMed",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceClose",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{id:k+"_resize_n","class":"mceResize mceResizeN",tabindex:"-1",href:"javascript:;"}],["a",{id:k+"_resize_s","class":"mceResize mceResizeS",tabindex:"-1",href:"javascript:;"}],["a",{id:k+"_resize_w","class":"mceResize mceResizeW",tabindex:"-1",href:"javascript:;"}],["a",{id:k+"_resize_e","class":"mceResize mceResizeE",tabindex:"-1",href:"javascript:;"}],["a",{id:k+"_resize_nw","class":"mceResize mceResizeNW",tabindex:"-1",href:"javascript:;"}],["a",{id:k+"_resize_ne","class":"mceResize mceResizeNE",tabindex:"-1",href:"javascript:;"}],["a",{id:k+"_resize_sw","class":"mceResize mceResizeSW",tabindex:"-1",href:"javascript:;"}],["a",{id:k+"_resize_se","class":"mceResize mceResizeSE",tabindex:"-1",href:"javascript:;"}]]]);d.setStyles(k,{top:-10000,left:-10000});if(tinymce.isGecko){d.setStyle(k,"overflow","auto")}if(!s.type){g+=d.get(k+"_left").clientWidth;g+=d.get(k+"_right").clientWidth;v+=d.get(k+"_top").clientHeight;v+=d.get(k+"_bottom").clientHeight}d.setStyles(k,{top:s.top,left:s.left,width:s.width+g,height:s.height+v});y=s.url||s.file;if(y){if(tinymce.relaxedDomain){y+=(y.indexOf("?")==-1?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain}y=tinymce._addVer(y)}if(!s.type){d.add(k+"_content","iframe",{id:k+"_ifr",src:'javascript:""',frameBorder:0,style:"border:0;width:10px;height:10px"});d.setStyles(k+"_ifr",{width:s.width,height:s.height});d.setAttrib(k+"_ifr","src",y)}else{d.add(k+"_wrapper","a",{id:k+"_ok","class":"mceButton mceOk",href:"javascript:;",onmousedown:"return false;"},"Ok");if(s.type=="confirm"){d.add(k+"_wrapper","a",{"class":"mceButton mceCancel",href:"javascript:;",onmousedown:"return false;"},"Cancel")}d.add(k+"_middle","div",{"class":"mceIcon"});d.setHTML(k+"_content",s.content.replace("\n","<br />"));a.add(k,"keyup",function(f){var p=27;if(f.keyCode===p){s.button_func(false);return a.cancel(f)}});a.add(k,"keydown",function(p){var t,f=9;if(p.keyCode===f){t=d.select("a.mceCancel",k+"_wrapper")[0];if(t&&t!==p.target){t.focus()}else{d.get(k+"_ok").focus()}return a.cancel(p)}})}o=a.add(k,"mousedown",function(t){var u=t.target,f,p;f=z.windows[k];z.focus(k);if(u.nodeName=="A"||u.nodeName=="a"){if(u.className=="mceMax"){f.oldPos=f.element.getXY();f.oldSize=f.element.getSize();p=d.getViewPort();p.w-=2;p.h-=2;f.element.moveTo(p.x,p.y);f.element.resizeTo(p.w,p.h);d.setStyles(k+"_ifr",{width:p.w-f.deltaWidth,height:p.h-f.deltaHeight});d.addClass(k+"_wrapper","mceMaximized")}else{if(u.className=="mceMed"){f.element.moveTo(f.oldPos.x,f.oldPos.y);f.element.resizeTo(f.oldSize.w,f.oldSize.h);f.iframeElement.resizeTo(f.oldSize.w-f.deltaWidth,f.oldSize.h-f.deltaHeight);d.removeClass(k+"_wrapper","mceMaximized")}else{if(u.className=="mceMove"){return z._startDrag(k,t,u.className)}else{if(d.hasClass(u,"mceResize")){return z._startDrag(k,t,u.className.substring(13))}}}}}});q=a.add(k,"click",function(f){var p=f.target;z.focus(k);if(p.nodeName=="A"||p.nodeName=="a"){switch(p.className){case"mceClose":z.close(null,k);return a.cancel(f);case"mceButton mceOk":case"mceButton mceCancel":s.button_func(p.className=="mceButton mceOk");return a.cancel(f)}}});a.add([k+"_left",k+"_right"],"focus",function(p){var t=d.get(k+"_ifr");if(t){var f=t.contentWindow.document.body;var u=d.select(":input:enabled,*[tabindex=0]",f);if(p.target.id===(k+"_left")){u[u.length-1].focus()}else{u[0].focus()}}else{d.get(k+"_ok").focus()}});x=z.windows[k]={id:k,mousedown_func:o,click_func:q,element:new b(k,{blocker:1,container:r.getContainer()}),iframeElement:new b(k+"_ifr"),features:s,deltaWidth:g,deltaHeight:v};x.iframeElement.on("focus",function(){z.focus(k)});if(z.count==0&&z.editor.getParam("dialog_type","modal")=="modal"){d.add(d.doc.body,"div",{id:"mceModalBlocker","class":(z.editor.settings.inlinepopups_skin||"clearlooks2")+"_modalBlocker",style:{zIndex:z.zIndex-1}});d.show("mceModalBlocker");d.setAttrib(d.doc.body,"aria-hidden","true")}else{d.setStyle("mceModalBlocker","z-index",z.zIndex-1)}if(tinymce.isIE6||/Firefox\/2\./.test(navigator.userAgent)||(tinymce.isIE&&!d.boxModel)){d.setStyles("mceModalBlocker",{position:"absolute",left:h.x,top:h.y,width:h.w-2,height:h.h-2})}d.setAttrib(k,"aria-hidden","false");z.focus(k);z._fixIELayout(k,1);if(d.get(k+"_ok")){d.get(k+"_ok").focus()}z.count++;return x},focus:function(h){var g=this,f;if(f=g.windows[h]){f.zIndex=this.zIndex++;f.element.setStyle("zIndex",f.zIndex);f.element.update();h=h+"_wrapper";d.removeClass(g.lastId,"mceFocus");d.addClass(h,"mceFocus");g.lastId=h;if(f.focussedElement){f.focussedElement.focus()}else{if(d.get(h+"_ok")){d.get(f.id+"_ok").focus()}else{if(d.get(f.id+"_ifr")){d.get(f.id+"_ifr").focus()}}}}},_addAll:function(k,h){var g,l,f=this,j=tinymce.DOM;if(c(h,"string")){k.appendChild(j.doc.createTextNode(h))}else{if(h.length){k=k.appendChild(j.create(h[0],h[1]));for(g=2;g<h.length;g++){f._addAll(k,h[g])}}}},_startDrag:function(v,G,F){var o=this,x,B,D=d.doc,f,l=o.windows[v],h=l.element,z=h.getXY(),u,q,E,g,A,s,r,j,i,m,k,n,C;g={x:0,y:0};A=d.getViewPort();A.w-=2;A.h-=2;j=G.screenX;i=G.screenY;m=k=n=C=0;x=a.add(D,"mouseup",function(p){a.remove(D,"mouseup",x);a.remove(D,"mousemove",B);if(f){f.remove()}h.moveBy(m,k);h.resizeBy(n,C);q=h.getSize();d.setStyles(v+"_ifr",{width:q.w-l.deltaWidth,height:q.h-l.deltaHeight});o._fixIELayout(v,1);return a.cancel(p)});if(F!="Move"){y()}function y(){if(f){return}o._fixIELayout(v,0);d.add(D.body,"div",{id:"mceEventBlocker","class":"mceEventBlocker "+(o.editor.settings.inlinepopups_skin||"clearlooks2"),style:{zIndex:o.zIndex+1}});if(tinymce.isIE6||(tinymce.isIE&&!d.boxModel)){d.setStyles("mceEventBlocker",{position:"absolute",left:A.x,top:A.y,width:A.w-2,height:A.h-2})}f=new b("mceEventBlocker");f.update();u=h.getXY();q=h.getSize();s=g.x+u.x-A.x;r=g.y+u.y-A.y;d.add(f.get(),"div",{id:"mcePlaceHolder","class":"mcePlaceHolder",style:{left:s,top:r,width:q.w,height:q.h}});E=new b("mcePlaceHolder")}B=a.add(D,"mousemove",function(w){var p,H,t;y();p=w.screenX-j;H=w.screenY-i;switch(F){case"ResizeW":m=p;n=0-p;break;case"ResizeE":n=p;break;case"ResizeN":case"ResizeNW":case"ResizeNE":if(F=="ResizeNW"){m=p;n=0-p}else{if(F=="ResizeNE"){n=p}}k=H;C=0-H;break;case"ResizeS":case"ResizeSW":case"ResizeSE":if(F=="ResizeSW"){m=p;n=0-p}else{if(F=="ResizeSE"){n=p}}C=H;break;case"mceMove":m=p;k=H;break}if(n<(t=l.features.min_width-q.w)){if(m!==0){m+=n-t}n=t}if(C<(t=l.features.min_height-q.h)){if(k!==0){k+=C-t}C=t}n=Math.min(n,l.features.max_width-q.w);C=Math.min(C,l.features.max_height-q.h);m=Math.max(m,A.x-(s+A.x));k=Math.max(k,A.y-(r+A.y));m=Math.min(m,(A.w+A.x)-(s+q.w+A.x));k=Math.min(k,(A.h+A.y)-(r+q.h+A.y));if(m+k!==0){if(s+m<0){m=0}if(r+k<0){k=0}E.moveTo(s+m,r+k)}if(n+C!==0){E.resizeTo(q.w+n,q.h+C)}return a.cancel(w)});return a.cancel(G)},resizeBy:function(g,h,i){var f=this.windows[i];if(f){f.element.resizeBy(g,h);f.iframeElement.resizeBy(g,h)}},close:function(i,k){var g=this,f,j=d.doc,h,k;k=g._findId(k||i);if(!g.windows[k]){g.parent(i);return}g.count--;if(g.count==0){d.remove("mceModalBlocker");d.setAttrib(d.doc.body,"aria-hidden","false");g.editor.focus()}if(f=g.windows[k]){g.onClose.dispatch(g);a.remove(j,"mousedown",f.mousedownFunc);a.remove(j,"click",f.clickFunc);a.clear(k);a.clear(k+"_ifr");d.setAttrib(k+"_ifr","src",'javascript:""');f.element.remove();delete g.windows[k];h=g._frontWindow();if(h){g.focus(h.id)}}},_frontWindow:function(){var g,f=0;e(this.windows,function(h){if(h.zIndex>f){g=h;f=h.zIndex}});return g},setTitle:function(f,g){var h;f=this._findId(f);if(h=d.get(f+"_title")){h.innerHTML=d.encode(g)}},alert:function(g,f,j){var i=this,h;h=i.open({title:i,type:"alert",button_func:function(k){if(f){f.call(k||i,k)}i.close(null,h.id)},content:d.encode(i.editor.getLang(g,g)),inline:1,width:400,height:130})},confirm:function(g,f,j){var i=this,h;h=i.open({title:i,type:"confirm",button_func:function(k){if(f){f.call(k||i,k)}i.close(null,h.id)},content:d.encode(i.editor.getLang(g,g)),inline:1,width:400,height:130})},_findId:function(f){var g=this;if(typeof(f)=="string"){return f}e(g.windows,function(h){var i=d.get(h.id+"_ifr");if(i&&f==i.contentWindow){f=h.id;return false}});return f},_fixIELayout:function(i,h){var f,g;if(!tinymce.isIE6){return}e(["n","s","w","e","nw","ne","sw","se"],function(j){var k=d.get(i+"_resize_"+j);d.setStyles(k,{width:h?k.clientWidth:"",height:h?k.clientHeight:"",cursor:d.getStyle(k,"cursor",1)});d.setStyle(i+"_bottom","bottom","-1px");k=0});if(f=this.windows[i]){f.element.hide();f.element.show();e(d.select("div,a",i),function(k,j){if(k.currentStyle.backgroundImage!="none"){g=new Image();g.src=k.currentStyle.backgroundImage.replace(/url\(\"(.+)\"\)/,"$1")}});d.get(i).style.filter=""}}});tinymce.PluginManager.add("inlinepopups",tinymce.plugins.InlinePopups)})();(function(b){var c="autosave",f="restoredraft",d=true,g,e,a=b.util.Dispatcher;b.create("tinymce.plugins.AutoSave",{init:function(i,k){var h=this,l=i.settings;h.editor=i;function j(m){var n={s:1000,m:60000};m=/^(\d+)([ms]?)$/.exec(""+m);return(m[2]?n[m[2]]:1)*parseInt(m)}b.each({ask_before_unload:d,interval:"30s",retention:"20m",minlength:50},function(n,m){m=c+"_"+m;if(l[m]===g){l[m]=n}});l.autosave_interval=j(l.autosave_interval);l.autosave_retention=j(l.autosave_retention);i.addButton(f,{title:c+".restore_content",onclick:function(){if(i.getContent({draft:true}).replace(/\s|&nbsp;|<\/?p[^>]*>|<br[^>]*>/gi,"").length>0){i.windowManager.confirm(c+".warning_message",function(m){if(m){h.restoreDraft()}})}else{h.restoreDraft()}}});i.onNodeChange.add(function(){var m=i.controlManager;if(m.get(f)){m.setDisabled(f,!h.hasDraft())}});i.onInit.add(function(){if(i.controlManager.get(f)){h.setupStorage(i);setInterval(function(){h.storeDraft();i.nodeChanged()},l.autosave_interval)}});h.onStoreDraft=new a(h);h.onRestoreDraft=new a(h);h.onRemoveDraft=new a(h);if(!e){window.onbeforeunload=b.plugins.AutoSave._beforeUnloadHandler;e=d}},getInfo:function(){return{longname:"Auto save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autosave",version:b.majorVersion+"."+b.minorVersion}},getExpDate:function(){return new Date(new Date().getTime()+this.editor.settings.autosave_retention).toUTCString()},setupStorage:function(i){var h=this,k=c+"_test",j="OK";h.key=c+i.id;b.each([function(){if(localStorage){localStorage.setItem(k,j);if(localStorage.getItem(k)===j){localStorage.removeItem(k);return localStorage}}},function(){if(sessionStorage){sessionStorage.setItem(k,j);if(sessionStorage.getItem(k)===j){sessionStorage.removeItem(k);return sessionStorage}}},function(){if(b.isIE){i.getElement().style.behavior="url('#default#userData')";return{autoExpires:d,setItem:function(m,n){var l=i.getElement();l.setAttribute(m,n);l.expires=h.getExpDate();l.save("TinyMCE")},getItem:function(m){var l=i.getElement();l.load("TinyMCE");return l.getAttribute(m)},removeItem:function(l){i.getElement().removeAttribute(l)}}}},],function(l){try{h.storage=l();if(h.storage){return false}}catch(m){}})},storeDraft:function(){var i=this,l=i.storage,h=i.editor,k,j;if(l){if(!l.getItem(i.key)&&!h.isDirty()){return}j=h.getContent({draft:true});if(j.length>h.settings.autosave_minlength){k=i.getExpDate();if(!i.storage.autoExpires){i.storage.setItem(i.key+"_expires",k)}i.storage.setItem(i.key,j);i.onStoreDraft.dispatch(i,{expires:k,content:j})}}},restoreDraft:function(){var h=this,i=h.storage;if(i){content=i.getItem(h.key);if(content){h.editor.setContent(content);h.onRestoreDraft.dispatch(h,{content:content})}}},hasDraft:function(){var i=this,k=i.storage,j,h;if(k){h=!!k.getItem(i.key);if(h){if(!i.storage.autoExpires){j=new Date(k.getItem(i.key+"_expires"));if(new Date().getTime()<j.getTime()){return d}i.removeDraft()}else{return d}}}return false},removeDraft:function(){var h=this,k=h.storage,i=h.key,j;if(k){j=k.getItem(i);k.removeItem(i);k.removeItem(i+"_expires");if(j){h.onRemoveDraft.dispatch(h,{content:j})}}},"static":{_beforeUnloadHandler:function(h){var i;b.each(tinyMCE.editors,function(j){if(j.plugins.autosave){j.plugins.autosave.storeDraft()}if(j.getParam("fullscreen_is_enabled")){return}if(!i&&j.isDirty()&&j.getParam("autosave_ask_before_unload")){i=j.getLang("autosave.unload_msg")}});return i}}});b.PluginManager.add("autosave",b.plugins.AutoSave)})(tinymce);(function(){var a=tinymce.dom.Event;tinymce.create("tinymce.plugins.NonEditablePlugin",{init:function(b,c){var d=this,e,f;d.editor=b;e=b.getParam("noneditable_editable_class","mceEditable");f=b.getParam("noneditable_noneditable_class","mceNonEditable");b.onNodeChange.addToTop(function(h,g,k){var j,i;j=h.dom.getParent(h.selection.getStart(),function(l){return h.dom.hasClass(l,f)});i=h.dom.getParent(h.selection.getEnd(),function(l){return h.dom.hasClass(l,f)});if(j||i){d._setDisabled(1);return false}else{d._setDisabled(0)}})},getInfo:function(){return{longname:"Non editable elements",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/noneditable",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_block:function(c,d){var b=d.keyCode;if((b>32&&b<41)||(b>111&&b<124)){return}return a.cancel(d)},_setDisabled:function(d){var c=this,b=c.editor;tinymce.each(b.controlManager.controls,function(e){e.setDisabled(d)});if(d!==c.disabled){if(d){b.onKeyDown.addToTop(c._block);b.onKeyPress.addToTop(c._block);b.onKeyUp.addToTop(c._block);b.onPaste.addToTop(c._block)}else{b.onKeyDown.remove(c._block);b.onKeyPress.remove(c._block);b.onKeyUp.remove(c._block);b.onPaste.remove(c._block)}c.disabled=d}}});tinymce.PluginManager.add("noneditable",tinymce.plugins.NonEditablePlugin)})();(function(){tinymce.create("tinymce.plugins.FullPagePlugin",{init:function(a,b){var c=this;c.editor=a;a.addCommand("mceFullPageProperties",function(){a.windowManager.open({file:b+"/fullpage.htm",width:430+parseInt(a.getLang("fullpage.delta_width",0)),height:495+parseInt(a.getLang("fullpage.delta_height",0)),inline:1},{plugin_url:b,head_html:c.head})});a.addButton("fullpage",{title:"fullpage.desc",cmd:"mceFullPageProperties"});a.onBeforeSetContent.add(c._setContent,c);a.onSetContent.add(c._setBodyAttribs,c);a.onGetContent.add(c._getContent,c)},getInfo:function(){return{longname:"Fullpage",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullpage",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_setBodyAttribs:function(d,a){var h,c,e,g,b,j,l,f=this.head.match(/body(.*?)>/i);if(f&&f[1]){h=f[1].match(/\s*(\w+\s*=\s*".*?"|\w+\s*=\s*'.*?'|\w+\s*=\s*\w+|\w+)\s*/g);if(h){for(c=0,e=h.length;c<e;c++){g=h[c].split("=");b=g[0].replace(/\s/,"");j=g[1];if(j){j=j.replace(/^\s+/,"").replace(/\s+$/,"");l=j.match(/^["'](.*)["']$/);if(l){j=l[1]}}else{j=b}d.dom.setAttrib(d.getBody(),"style",j)}}}},_createSerializer:function(){return new tinymce.dom.Serializer({dom:this.editor.dom,apply_source_formatting:true})},_setContent:function(d,b){var i=this,a,j,f=b.content,g,h="";if(b.format=="raw"&&i.head){return}if(b.source_view&&d.getParam("fullpage_hide_in_source_view")){return}f=f.replace(/<(\/?)BODY/gi,"<$1body");a=f.indexOf("<body");if(a!=-1){a=f.indexOf(">",a);i.head=f.substring(0,a+1);j=f.indexOf("</body",a);if(j==-1){j=f.length}b.content=f.substring(a+1,j);i.foot=f.substring(j);function e(c){return c.replace(/<\/?[A-Z]+/g,function(k){return k.toLowerCase()})}i.head=e(i.head);i.foot=e(i.foot)}else{i.head="";if(d.getParam("fullpage_default_xml_pi")){i.head+='<?xml version="1.0" encoding="'+d.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'}i.head+=d.getParam("fullpage_default_doctype",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');i.head+="\n<html>\n<head>\n<title>"+d.getParam("fullpage_default_title","Untitled document")+"</title>\n";if(g=d.getParam("fullpage_default_encoding")){i.head+='<meta http-equiv="Content-Type" content="'+g+'" />\n'}if(g=d.getParam("fullpage_default_font_family")){h+="font-family: "+g+";"}if(g=d.getParam("fullpage_default_font_size")){h+="font-size: "+g+";"}if(g=d.getParam("fullpage_default_text_color")){h+="color: "+g+";"}i.head+="</head>\n<body"+(h?' style="'+h+'"':"")+">\n";i.foot="\n</body>\n</html>"}},_getContent:function(a,c){var b=this;if(!c.source_view||!a.getParam("fullpage_hide_in_source_view")){c.content=tinymce.trim(b.head)+"\n"+tinymce.trim(c.content)+"\n"+tinymce.trim(b.foot)}}});tinymce.PluginManager.add("fullpage",tinymce.plugins.FullPagePlugin)})();(function(){tinymce.create("tinymce.plugins.Layer",{init:function(a,b){var c=this;c.editor=a;a.addCommand("mceInsertLayer",c._insertLayer,c);a.addCommand("mceMoveForward",function(){c._move(1)});a.addCommand("mceMoveBackward",function(){c._move(-1)});a.addCommand("mceMakeAbsolute",function(){c._toggleAbsolute()});a.addButton("moveforward",{title:"layer.forward_desc",cmd:"mceMoveForward"});a.addButton("movebackward",{title:"layer.backward_desc",cmd:"mceMoveBackward"});a.addButton("absolute",{title:"layer.absolute_desc",cmd:"mceMakeAbsolute"});a.addButton("insertlayer",{title:"layer.insertlayer_desc",cmd:"mceInsertLayer"});a.onInit.add(function(){if(tinymce.isIE){a.getDoc().execCommand("2D-Position",false,true)}});a.onNodeChange.add(c._nodeChange,c);a.onVisualAid.add(c._visualAid,c)},getInfo:function(){return{longname:"Layer",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/layer",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(b,a,e){var c,d;c=this._getParentLayer(e);d=b.dom.getParent(e,"DIV,P,IMG");if(!d){a.setDisabled("absolute",1);a.setDisabled("moveforward",1);a.setDisabled("movebackward",1)}else{a.setDisabled("absolute",0);a.setDisabled("moveforward",!c);a.setDisabled("movebackward",!c);a.setActive("absolute",c&&c.style.position.toLowerCase()=="absolute")}},_visualAid:function(a,c,b){var d=a.dom;tinymce.each(d.select("div,p",c),function(f){if(/^(absolute|relative|static)$/i.test(f.style.position)){if(b){d.addClass(f,"mceItemVisualAid")}else{d.removeClass(f,"mceItemVisualAid")}}})},_move:function(h){var b=this.editor,f,g=[],e=this._getParentLayer(b.selection.getNode()),c=-1,j=-1,a;a=[];tinymce.walk(b.getBody(),function(d){if(d.nodeType==1&&/^(absolute|relative|static)$/i.test(d.style.position)){a.push(d)}},"childNodes");for(f=0;f<a.length;f++){g[f]=a[f].style.zIndex?parseInt(a[f].style.zIndex):0;if(c<0&&a[f]==e){c=f}}if(h<0){for(f=0;f<g.length;f++){if(g[f]<g[c]){j=f;break}}if(j>-1){a[c].style.zIndex=g[j];a[j].style.zIndex=g[c]}else{if(g[c]>0){a[c].style.zIndex=g[c]-1}}}else{for(f=0;f<g.length;f++){if(g[f]>g[c]){j=f;break}}if(j>-1){a[c].style.zIndex=g[j];a[j].style.zIndex=g[c]}else{a[c].style.zIndex=g[c]+1}}b.execCommand("mceRepaint")},_getParentLayer:function(a){return this.editor.dom.getParent(a,function(b){return b.nodeType==1&&/^(absolute|relative|static)$/i.test(b.style.position)})},_insertLayer:function(){var a=this.editor,b=a.dom.getPos(a.dom.getParent(a.selection.getNode(),"*"));a.dom.add(a.getBody(),"div",{style:{position:"absolute",left:b.x,top:(b.y>20?b.y:20),width:100,height:100},"class":"mceItemVisualAid"},a.selection.getContent()||a.getLang("layer.content"))},_toggleAbsolute:function(){var a=this.editor,b=this._getParentLayer(a.selection.getNode());if(!b){b=a.dom.getParent(a.selection.getNode(),"DIV,P,IMG")}if(b){if(b.style.position.toLowerCase()=="absolute"){a.dom.setStyles(b,{position:"",left:"",top:"",width:"",height:""});a.dom.removeClass(b,"mceItemVisualAid")}else{if(b.style.left==""){b.style.left=20+"px"}if(b.style.top==""){b.style.top=20+"px"}if(b.style.width==""){b.style.width=b.width?(b.width+"px"):"100px"}if(b.style.height==""){b.style.height=b.height?(b.height+"px"):"100px"}b.style.position="absolute";a.addVisual(a.getBody())}a.execCommand("mceRepaint");a.nodeChanged()}}});tinymce.PluginManager.add("layer",tinymce.plugins.Layer)})();(function(){tinymce.create("tinymce.plugins.StylePlugin",{init:function(a,b){a.addCommand("mceStyleProps",function(){a.windowManager.open({file:b+"/props.htm",width:480+parseInt(a.getLang("style.delta_width",0)),height:320+parseInt(a.getLang("style.delta_height",0)),inline:1},{plugin_url:b,style_text:a.selection.getNode().style.cssText})});a.addCommand("mceSetElementStyle",function(d,c){if(e=a.selection.getNode()){a.dom.setAttrib(e,"style",c);a.execCommand("mceRepaint")}});a.onNodeChange.add(function(d,c,f){c.setDisabled("styleprops",f.nodeName==="BODY")});a.addButton("styleprops",{title:"style.desc",cmd:"mceStyleProps"})},getInfo:function(){return{longname:"Style",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/style",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("style",tinymce.plugins.StylePlugin)})();(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.MediaPlugin",{init:function(c,e){var f=this;f.editor=c;f.url=e;function b(g){return/^(mceItemFlash|mceItemShockWave|mceItemWindowsMedia|mceItemQuickTime|mceItemRealMedia)$/.test(g.className)}c.onPreInit.add(function(){c.serializer.addRules("param[name|value|_mce_value]")});c.addCommand("mceMedia",function(){c.windowManager.open({file:e+"/media.htm",width:430+parseInt(c.getLang("media.delta_width",0)),height:470+parseInt(c.getLang("media.delta_height",0)),inline:1},{plugin_url:e})});c.addButton("media",{title:"media.desc",cmd:"mceMedia"});c.onNodeChange.add(function(h,g,i){g.setActive("media",i.nodeName=="IMG"&&b(i))});c.onInit.add(function(){var g={mceItemFlash:"flash",mceItemShockWave:"shockwave",mceItemWindowsMedia:"windowsmedia",mceItemQuickTime:"quicktime",mceItemRealMedia:"realmedia"};c.selection.onSetContent.add(function(){f._spansToImgs(c.getBody())});c.selection.onBeforeSetContent.add(f._objectsToSpans,f);if(c.settings.content_css!==false){c.dom.loadCSS(e+"/css/content.css")}if(c.theme&&c.theme.onResolveName){c.theme.onResolveName.add(function(h,i){if(i.name=="img"){a(g,function(l,j){if(c.dom.hasClass(i.node,j)){i.name=l;i.title=c.dom.getAttrib(i.node,"title");return false}})}})}if(c&&c.plugins.contextmenu){c.plugins.contextmenu.onContextMenu.add(function(i,h,j){if(j.nodeName=="IMG"&&/mceItem(Flash|ShockWave|WindowsMedia|QuickTime|RealMedia)/.test(j.className)){h.add({title:"media.edit",icon:"media",cmd:"mceMedia"})}})}});c.onBeforeSetContent.add(f._objectsToSpans,f);c.onSetContent.add(function(){f._spansToImgs(c.getBody())});c.onPreProcess.add(function(g,i){var h=g.dom;if(i.set){f._spansToImgs(i.node);a(h.select("IMG",i.node),function(k){var j;if(b(k)){j=f._parse(k.title);h.setAttrib(k,"width",h.getAttrib(k,"width",j.width||100));h.setAttrib(k,"height",h.getAttrib(k,"height",j.height||100))}})}if(i.get){a(h.select("IMG",i.node),function(m){var l,j,k;if(g.getParam("media_use_script")){if(b(m)){m.className=m.className.replace(/mceItem/g,"mceTemp")}return}switch(m.className){case"mceItemFlash":l="d27cdb6e-ae6d-11cf-96b8-444553540000";j="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0";k="application/x-shockwave-flash";break;case"mceItemShockWave":l="166b1bca-3f9c-11cf-8075-444553540000";j="http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0";k="application/x-director";break;case"mceItemWindowsMedia":l=g.getParam("media_wmp6_compatible")?"05589fa1-c356-11ce-bf01-00aa0055595a":"6bf52a52-394a-11d3-b153-00c04f79faa6";j="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701";k="application/x-mplayer2";break;case"mceItemQuickTime":l="02bf25d5-8c17-4b23-bc80-d3488abddc6b";j="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0";k="video/quicktime";break;case"mceItemRealMedia":l="cfcdaa03-8be4-11cf-b84b-0020afbbccfa";j="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0";k="audio/x-pn-realaudio-plugin";break}if(l){h.replace(f._buildObj({classid:l,codebase:j,type:k},m),m)}})}});c.onPostProcess.add(function(g,h){h.content=h.content.replace(/_mce_value=/g,"value=")});function d(g,h){h=new RegExp(h+'="([^"]+)"',"g").exec(g);return h?c.dom.decode(h[1]):""}c.onPostProcess.add(function(g,h){if(g.getParam("media_use_script")){h.content=h.content.replace(/<img[^>]+>/g,function(j){var i=d(j,"class");if(/^(mceTempFlash|mceTempShockWave|mceTempWindowsMedia|mceTempQuickTime|mceTempRealMedia)$/.test(i)){at=f._parse(d(j,"title"));at.width=d(j,"width");at.height=d(j,"height");j='<script type="text/javascript">write'+i.substring(7)+"({"+f._serialize(at)+"});<\/script>"}return j})}})},getInfo:function(){return{longname:"Media",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_objectsToSpans:function(b,e){var c=this,d=e.content;d=d.replace(/<script[^>]*>\s*write(Flash|ShockWave|WindowsMedia|QuickTime|RealMedia)\(\{([^\)]*)\}\);\s*<\/script>/gi,function(g,f,i){var h=c._parse(i);return'<img class="mceItem'+f+'" title="'+b.dom.encode(i)+'" src="'+c.url+'/img/trans.gif" width="'+h.width+'" height="'+h.height+'" />'});d=d.replace(/<object([^>]*)>/gi,'<span class="mceItemObject" $1>');d=d.replace(/<embed([^>]*)\/?>/gi,'<span class="mceItemEmbed" $1></span>');d=d.replace(/<embed([^>]*)>/gi,'<span class="mceItemEmbed" $1>');d=d.replace(/<\/(object)([^>]*)>/gi,"</span>");d=d.replace(/<\/embed>/gi,"");d=d.replace(/<param([^>]*)>/gi,function(g,f){return"<span "+f.replace(/value=/gi,"_mce_value=")+' class="mceItemParam"></span>'});d=d.replace(/\/ class=\"mceItemParam\"><\/span>/gi,'class="mceItemParam"></span>');e.content=d},_buildObj:function(g,h){var d,c=this.editor,f=c.dom,e=this._parse(h.title),b;b=c.getParam("media_strict",true)&&g.type=="application/x-shockwave-flash";e.width=g.width=f.getAttrib(h,"width")||100;e.height=g.height=f.getAttrib(h,"height")||100;if(e.src){e.src=c.convertURL(e.src,"src",h)}if(b){d=f.create("span",{id:e.id,_mce_name:"object",type:"application/x-shockwave-flash",data:e.src,style:f.getAttrib(h,"style"),width:g.width,height:g.height})}else{d=f.create("span",{id:e.id,_mce_name:"object",classid:"clsid:"+g.classid,style:f.getAttrib(h,"style"),codebase:g.codebase,width:g.width,height:g.height})}a(e,function(j,i){if(!/^(width|height|codebase|classid|id|_cx|_cy)$/.test(i)){if(g.type=="application/x-mplayer2"&&i=="src"&&!e.url){i="url"}if(j){f.add(d,"span",{_mce_name:"param",name:i,_mce_value:j})}}});if(!b){f.add(d,"span",tinymce.extend({_mce_name:"embed",type:g.type,style:f.getAttrib(h,"style")},e))}return d},_spansToImgs:function(e){var d=this,f=d.editor.dom,b,c;a(f.select("span",e),function(g){if(f.getAttrib(g,"class")=="mceItemObject"){c=f.getAttrib(g,"classid").toLowerCase().replace(/\s+/g,"");switch(c){case"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000":f.replace(d._createImg("mceItemFlash",g),g);break;case"clsid:166b1bca-3f9c-11cf-8075-444553540000":f.replace(d._createImg("mceItemShockWave",g),g);break;case"clsid:6bf52a52-394a-11d3-b153-00c04f79faa6":case"clsid:22d6f312-b0f6-11d0-94ab-0080c74c7e95":case"clsid:05589fa1-c356-11ce-bf01-00aa0055595a":f.replace(d._createImg("mceItemWindowsMedia",g),g);break;case"clsid:02bf25d5-8c17-4b23-bc80-d3488abddc6b":f.replace(d._createImg("mceItemQuickTime",g),g);break;case"clsid:cfcdaa03-8be4-11cf-b84b-0020afbbccfa":f.replace(d._createImg("mceItemRealMedia",g),g);break;default:f.replace(d._createImg("mceItemFlash",g),g)}return}if(f.getAttrib(g,"class")=="mceItemEmbed"){switch(f.getAttrib(g,"type")){case"application/x-shockwave-flash":f.replace(d._createImg("mceItemFlash",g),g);break;case"application/x-director":f.replace(d._createImg("mceItemShockWave",g),g);break;case"application/x-mplayer2":f.replace(d._createImg("mceItemWindowsMedia",g),g);break;case"video/quicktime":f.replace(d._createImg("mceItemQuickTime",g),g);break;case"audio/x-pn-realaudio-plugin":f.replace(d._createImg("mceItemRealMedia",g),g);break;default:f.replace(d._createImg("mceItemFlash",g),g)}}})},_createImg:function(c,h){var b,g=this.editor.dom,f={},e="",d;d=["id","name","width","height","bgcolor","align","flashvars","src","wmode","allowfullscreen","quality","data"];b=g.create("img",{src:this.url+"/img/trans.gif",width:g.getAttrib(h,"width")||100,height:g.getAttrib(h,"height")||100,style:g.getAttrib(h,"style"),"class":c});a(d,function(i){var j=g.getAttrib(h,i);if(j){f[i]=j}});a(g.select("span",h),function(i){if(g.hasClass(i,"mceItemParam")){f[g.getAttrib(i,"name")]=g.getAttrib(i,"_mce_value")}});if(f.movie){f.src=f.movie;delete f.movie}if(!f.src){f.src=f.data;delete f.data}h=g.select(".mceItemEmbed",h)[0];if(h){a(d,function(i){var j=g.getAttrib(h,i);if(j&&!f[i]){f[i]=j}})}delete f.width;delete f.height;b.title=this._serialize(f);return b},_parse:function(b){return tinymce.util.JSON.parse("{"+b+"}")},_serialize:function(b){return tinymce.util.JSON.serialize(b).replace(/[{}]/g,"")}});tinymce.PluginManager.add("media",tinymce.plugins.MediaPlugin)})();(function(){tinymce.create("tinymce.plugins.VisualChars",{init:function(a,b){var c=this;c.editor=a;a.addCommand("mceVisualChars",c._toggleVisualChars,c);a.addButton("visualchars",{title:"visualchars.desc",cmd:"mceVisualChars"});a.onBeforeGetContent.add(function(d,e){if(c.state&&e.format!="raw"&&!e.draft){c.state=true;c._toggleVisualChars(false)}})},getInfo:function(){return{longname:"Visual characters",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_toggleVisualChars:function(m){var p=this,k=p.editor,a,g,j,n=k.getDoc(),o=k.getBody(),l,q=k.selection,e,c,f;p.state=!p.state;k.controlManager.setActive("visualchars",p.state);if(m){f=q.getBookmark()}if(p.state){a=[];tinymce.walk(o,function(b){if(b.nodeType==3&&b.nodeValue&&b.nodeValue.indexOf("\u00a0")!=-1){a.push(b)}},"childNodes");for(g=0;g<a.length;g++){l=a[g].nodeValue;l=l.replace(/(\u00a0)/g,'<span _mce_bogus="1" class="mceItemHidden mceItemNbsp">$1</span>');c=k.dom.create("div",null,l);while(node=c.lastChild){k.dom.insertAfter(node,a[g])}k.dom.remove(a[g])}}else{a=k.dom.select("span.mceItemNbsp",o);for(g=a.length-1;g>=0;g--){k.dom.remove(a[g],1)}}q.moveToBookmark(f)}});tinymce.PluginManager.add("visualchars",tinymce.plugins.VisualChars)})();(function(){tinymce.create("tinymce.plugins.Nonbreaking",{init:function(a,b){var c=this;c.editor=a;a.addCommand("mceNonBreaking",function(){a.execCommand("mceInsertContent",false,(a.plugins.visualchars&&a.plugins.visualchars.state)?'<span _mce_bogus="1" class="mceItemHidden mceItemNbsp">&nbsp;</span>':"&nbsp;")});a.addButton("nonbreaking",{title:"nonbreaking.nonbreaking_desc",cmd:"mceNonBreaking"});if(a.getParam("nonbreaking_force_tab")){a.onKeyDown.add(function(d,f){if(tinymce.isIE&&f.keyCode==9){d.execCommand("mceNonBreaking");d.execCommand("mceNonBreaking");d.execCommand("mceNonBreaking");tinymce.dom.Event.cancel(f)}})}},getInfo:function(){return{longname:"Nonbreaking space",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/nonbreaking",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("nonbreaking",tinymce.plugins.Nonbreaking)})();(function(){tinymce.create("tinymce.plugins.XHTMLXtrasPlugin",{init:function(a,b){a.addCommand("mceCite",function(){a.windowManager.open({file:b+"/cite.htm",width:350+parseInt(a.getLang("xhtmlxtras.cite_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.cite_delta_height",0)),inline:1},{plugin_url:b})});a.addCommand("mceAcronym",function(){a.windowManager.open({file:b+"/acronym.htm",width:350+parseInt(a.getLang("xhtmlxtras.acronym_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.acronym_delta_width",0)),inline:1},{plugin_url:b})});a.addCommand("mceAbbr",function(){a.windowManager.open({file:b+"/abbr.htm",width:350+parseInt(a.getLang("xhtmlxtras.abbr_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.abbr_delta_width",0)),inline:1},{plugin_url:b})});a.addCommand("mceDel",function(){a.windowManager.open({file:b+"/del.htm",width:340+parseInt(a.getLang("xhtmlxtras.del_delta_width",0)),height:310+parseInt(a.getLang("xhtmlxtras.del_delta_width",0)),inline:1},{plugin_url:b})});a.addCommand("mceIns",function(){a.windowManager.open({file:b+"/ins.htm",width:340+parseInt(a.getLang("xhtmlxtras.ins_delta_width",0)),height:310+parseInt(a.getLang("xhtmlxtras.ins_delta_width",0)),inline:1},{plugin_url:b})});a.addCommand("mceAttributes",function(){a.windowManager.open({file:b+"/attributes.htm",width:380,height:370,inline:1},{plugin_url:b})});a.addButton("cite",{title:"xhtmlxtras.cite_desc",cmd:"mceCite"});a.addButton("acronym",{title:"xhtmlxtras.acronym_desc",cmd:"mceAcronym"});a.addButton("abbr",{title:"xhtmlxtras.abbr_desc",cmd:"mceAbbr"});a.addButton("del",{title:"xhtmlxtras.del_desc",cmd:"mceDel"});a.addButton("ins",{title:"xhtmlxtras.ins_desc",cmd:"mceIns"});a.addButton("attribs",{title:"xhtmlxtras.attribs_desc",cmd:"mceAttributes"});a.onNodeChange.add(function(d,c,f,e){f=d.dom.getParent(f,"CITE,ACRONYM,ABBR,DEL,INS");c.setDisabled("cite",e);c.setDisabled("acronym",e);c.setDisabled("abbr",e);c.setDisabled("del",e);c.setDisabled("ins",e);c.setDisabled("attribs",f&&f.nodeName=="BODY");c.setActive("cite",0);c.setActive("acronym",0);c.setActive("abbr",0);c.setActive("del",0);c.setActive("ins",0);if(f){do{c.setDisabled(f.nodeName.toLowerCase(),0);c.setActive(f.nodeName.toLowerCase(),1)}while(f=f.parentNode)}});a.onPreInit.add(function(){a.dom.create("abbr")})},getInfo:function(){return{longname:"XHTML Xtras Plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/xhtmlxtras",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("xhtmlxtras",tinymce.plugins.XHTMLXtrasPlugin)})();(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.TemplatePlugin",{init:function(b,c){var d=this;d.editor=b;b.addCommand("mceTemplate",function(e){b.windowManager.open({file:c+"/template.htm",width:b.getParam("template_popup_width",750),height:b.getParam("template_popup_height",600),inline:1},{plugin_url:c})});b.addCommand("mceInsertTemplate",d._insertTemplate,d);b.addButton("template",{title:"template.desc",cmd:"mceTemplate"});b.onPreProcess.add(function(e,g){var f=e.dom;a(f.select("div",g.node),function(h){if(f.hasClass(h,"mceTmpl")){a(f.select("*",h),function(i){if(f.hasClass(i,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))){i.innerHTML=d._getDateTime(new Date(),e.getParam("template_mdate_format",e.getLang("template.mdate_format")))}});d._replaceVals(h)}})})},getInfo:function(){return{longname:"Template plugin",author:"Moxiecode Systems AB",authorurl:"http://www.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/template",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_insertTemplate:function(i,j){var k=this,g=k.editor,f,b,d=g.dom,c=g.selection.getContent();f=j.content;a(k.editor.getParam("template_replace_values"),function(l,h){if(typeof(l)!="function"){f=f.replace(new RegExp("\\{\\$"+h+"\\}","g"),l)}});b=d.create("div",null,f);n=d.select(".mceTmpl",b);if(n&&n.length>0){b=d.create("div",null);b.appendChild(n[0].cloneNode(true))}function e(l,h){return new RegExp("\\b"+h+"\\b","g").test(l.className)}a(d.select("*",b),function(h){if(e(h,g.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))){h.innerHTML=k._getDateTime(new Date(),g.getParam("template_cdate_format",g.getLang("template.cdate_format")))}if(e(h,g.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))){h.innerHTML=k._getDateTime(new Date(),g.getParam("template_mdate_format",g.getLang("template.mdate_format")))}if(e(h,g.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))){h.innerHTML=c}});k._replaceVals(b);g.execCommand("mceInsertContent",false,b.innerHTML);g.addVisual()},_replaceVals:function(c){var d=this.editor.dom,b=this.editor.getParam("template_replace_values");a(d.select("*",c),function(f){a(b,function(g,e){if(d.hasClass(f,e)){if(typeof(b[e])=="function"){b[e](f)}}})})},_getDateTime:function(e,b){if(!b){return""}function c(g,d){var f;g=""+g;if(g.length<d){for(f=0;f<(d-g.length);f++){g="0"+g}}return g}b=b.replace("%D","%m/%d/%y");b=b.replace("%r","%I:%M:%S %p");b=b.replace("%Y",""+e.getFullYear());b=b.replace("%y",""+e.getYear());b=b.replace("%m",c(e.getMonth()+1,2));b=b.replace("%d",c(e.getDate(),2));b=b.replace("%H",""+c(e.getHours(),2));b=b.replace("%M",""+c(e.getMinutes(),2));b=b.replace("%S",""+c(e.getSeconds(),2));b=b.replace("%I",""+((e.getHours()+11)%12+1));b=b.replace("%p",""+(e.getHours()<12?"AM":"PM"));b=b.replace("%B",""+this.editor.getLang("template_months_long").split(",")[e.getMonth()]);b=b.replace("%b",""+this.editor.getLang("template_months_short").split(",")[e.getMonth()]);b=b.replace("%A",""+this.editor.getLang("template_day_long").split(",")[e.getDay()]);b=b.replace("%a",""+this.editor.getLang("template_day_short").split(",")[e.getDay()]);b=b.replace("%%","%");return b}});tinymce.PluginManager.add("template",tinymce.plugins.TemplatePlugin)})();(function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(a,b){var d=this,c=a.getParam("bbcode_dialect","punbb").toLowerCase();a.onBeforeSetContent.add(function(e,f){f.content=d["_"+c+"_bbcode2html"](f.content)});a.onPostProcess.add(function(e,f){if(f.set){f.content=d["_"+c+"_bbcode2html"](f.content)}if(f.get){f.content=d["_"+c+"_html2bbcode"](f.content)}})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/bbcode",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_punbb_html2bbcode:function(a){a=tinymce.trim(a);function b(c,d){a=a.replace(c,d)}b(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]");b(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]");b(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]");b(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]");b(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]");b(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]");b(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]");b(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]");b(/<font>(.*?)<\/font>/gi,"$1");b(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]");b(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]");b(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]");b(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]");b(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]");b(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]");b(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]");b(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]");b(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]");b(/<\/(strong|b)>/gi,"[/b]");b(/<(strong|b)>/gi,"[b]");b(/<\/(em|i)>/gi,"[/i]");b(/<(em|i)>/gi,"[i]");b(/<\/u>/gi,"[/u]");b(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]");b(/<u>/gi,"[u]");b(/<blockquote[^>]*>/gi,"[quote]");b(/<\/blockquote>/gi,"[/quote]");b(/<br \/>/gi,"\n");b(/<br\/>/gi,"\n");b(/<br>/gi,"\n");b(/<p>/gi,"");b(/<\/p>/gi,"\n");b(/&nbsp;/gi," ");b(/&quot;/gi,'"');b(/&lt;/gi,"<");b(/&gt;/gi,">");b(/&amp;/gi,"&");return a},_punbb_bbcode2html:function(a){a=tinymce.trim(a);function b(c,d){a=a.replace(c,d)}b(/\n/gi,"<br />");b(/\[b\]/gi,"<strong>");b(/\[\/b\]/gi,"</strong>");b(/\[i\]/gi,"<em>");b(/\[\/i\]/gi,"</em>");b(/\[u\]/gi,"<u>");b(/\[\/u\]/gi,"</u>");b(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>');b(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>');b(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />');b(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>');b(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;');b(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;');return a}});tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)})();(function(){tinymce.create("tinymce.plugins.PageBreakPlugin",{init:function(b,d){var f='<img src="'+d+'/img/trans.gif" class="mcePageBreak mceItemNoResize" />',a="mcePageBreak",c=b.getParam("pagebreak_separator","<!-- pagebreak -->"),e;e=new RegExp(c.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(g){return"\\"+g}),"g");b.addCommand("mcePageBreak",function(){b.execCommand("mceInsertContent",0,f)});b.addButton("pagebreak",{title:"pagebreak.desc",cmd:a});b.onInit.add(function(){if(b.settings.content_css!==false){b.dom.loadCSS(d+"/css/content.css")}if(b.theme.onResolveName){b.theme.onResolveName.add(function(g,h){if(h.node.nodeName=="IMG"&&b.dom.hasClass(h.node,a)){h.name="pagebreak"}})}});b.onClick.add(function(g,h){h=h.target;if(h.nodeName==="IMG"&&g.dom.hasClass(h,a)){g.selection.select(h)}});b.onNodeChange.add(function(h,g,i){g.setActive("pagebreak",i.nodeName==="IMG"&&h.dom.hasClass(i,a))});b.onBeforeSetContent.add(function(g,h){h.content=h.content.replace(e,f)});b.onPostProcess.add(function(g,h){if(h.get){h.content=h.content.replace(/<img[^>]+>/g,function(i){if(i.indexOf('class="mcePageBreak')!==-1){i=c}return i})}})},getInfo:function(){return{longname:"PageBreak",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("pagebreak",tinymce.plugins.PageBreakPlugin)})();(function(){var a=tinymce.util.JSONRequest,c=tinymce.each,b=tinymce.DOM;tinymce.create("tinymce.plugins.SpellcheckerPlugin",{getInfo:function(){return{longname:"Spellchecker",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker",version:tinymce.majorVersion+"."+tinymce.minorVersion}},init:function(e,f){var g=this,d;g.url=f;g.editor=e;g.rpcUrl=e.getParam("spellchecker_rpc_url","{backend}");if(g.rpcUrl=="{backend}"){if(tinymce.isIE){return}g.hasSupport=true;e.onContextMenu.addToTop(function(h,i){if(g.active){return false}})}e.addCommand("mceSpellCheck",function(){if(g.rpcUrl=="{backend}"){g.editor.getBody().spellcheck=g.active=!g.active;return}if(!g.active){e.setProgressState(1);g._sendRPC("checkWords",[g.selectedLang,g._getWords()],function(h){if(h.length>0){g.active=1;g._markWords(h);e.setProgressState(0);e.nodeChanged()}else{e.setProgressState(0);if(e.getParam("spellchecker_report_no_misspellings",true)){e.windowManager.alert("spellchecker.no_mpell")}}})}else{g._done()}});e.onInit.add(function(){if(e.settings.content_css!==false){e.dom.loadCSS(f+"/css/content.css")}});e.onClick.add(g._showMenu,g);e.onContextMenu.add(g._showMenu,g);e.onBeforeGetContent.add(function(){if(g.active){g._removeWords()}});e.onNodeChange.add(function(i,h){h.setActive("spellchecker",g.active)});e.onSetContent.add(function(){g._done()});e.onBeforeGetContent.add(function(){g._done()});e.onBeforeExecCommand.add(function(h,i){if(i=="mceFullScreen"){g._done()}});g.languages={};c(e.getParam("spellchecker_languages","+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv","hash"),function(i,h){if(h.indexOf("+")===0){h=h.substring(1);g.selectedLang=i}g.languages[h]=i})},createControl:function(h,d){var f=this,g,e=f.editor;if(h=="spellchecker"){if(f.rpcUrl=="{backend}"){if(f.hasSupport){g=d.createButton(h,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:f})}return g}g=d.createSplitButton(h,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:f});g.onRenderMenu.add(function(j,i){i.add({title:"spellchecker.langs","class":"mceMenuItemTitle"}).setDisabled(1);c(f.languages,function(n,m){var p={icon:1},l;p.onclick=function(){l.setSelected(1);f.selectedItem.setSelected(0);f.selectedItem=l;f.selectedLang=n};p.title=m;l=i.add(p);l.setSelected(n==f.selectedLang);if(n==f.selectedLang){f.selectedItem=l}})});return g}},_walk:function(i,g){var h=this.editor.getDoc(),e;if(h.createTreeWalker){e=h.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,false);while((i=e.nextNode())!=null){g.call(this,i)}}else{tinymce.walk(i,g,"childNodes")}},_getSeparators:function(){var e="",d,f=this.editor.getParam("spellchecker_word_separator_chars",'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}\u201d\u201c');for(d=0;d<f.length;d++){e+="\\"+f.charAt(d)}return e},_getWords:function(){var e=this.editor,g=[],d="",f={},h=[];this._walk(e.getBody(),function(i){if(i.nodeType==3){d+=i.nodeValue+" "}});if(e.getParam("spellchecker_word_pattern")){h=d.match("("+e.getParam("spellchecker_word_pattern")+")","gi")}else{d=d.replace(new RegExp("([0-9]|["+this._getSeparators()+"])","g")," ");d=tinymce.trim(d.replace(/(\s+)/g," "));h=d.split(" ")}c(h,function(i){if(!f[i]){g.push(i);f[i]=1}});return g},_removeWords:function(e){var f=this.editor,h=f.dom,g=f.selection,d=g.getBookmark();c(h.select("span").reverse(),function(i){if(i&&(h.hasClass(i,"mceItemHiddenSpellWord")||h.hasClass(i,"mceItemHidden"))){if(!e||h.decode(i.innerHTML)==e){h.remove(i,1)}}});g.moveToBookmark(d)},_markWords:function(o){var i,h,g,f,e,n="",k=this.editor,p=this._getSeparators(),j=k.dom,d=[];var l=k.selection,m=l.getBookmark();c(o,function(q){n+=(n?"|":"")+q});i=new RegExp("(["+p+"])("+n+")(["+p+"])","g");h=new RegExp("^("+n+")","g");g=new RegExp("("+n+")(["+p+"]?)$","g");f=new RegExp("^("+n+")(["+p+"]?)$","g");e=new RegExp("("+n+")(["+p+"])","g");this._walk(this.editor.getBody(),function(q){if(q.nodeType==3){d.push(q)}});c(d,function(r){var q;if(r.nodeType==3){q=r.nodeValue;if(i.test(q)||h.test(q)||g.test(q)||f.test(q)){q=j.encode(q);q=q.replace(e,'<span class="mceItemHiddenSpellWord">$1</span>$2');q=q.replace(g,'<span class="mceItemHiddenSpellWord">$1</span>$2');j.replace(j.create("span",{"class":"mceItemHidden"},q),r)}}});l.moveToBookmark(m)},_showMenu:function(h,j){var i=this,h=i.editor,d=i._menu,l,k=h.dom,g=k.getViewPort(h.getWin()),f=j.target;j=0;if(!d){l=b.getPos(h.getContentAreaContainer());d=h.controlManager.createDropMenu("spellcheckermenu",{offset_x:l.x,offset_y:l.y,"class":"mceNoIcons"});i._menu=d}if(k.hasClass(f,"mceItemHiddenSpellWord")){d.removeAll();d.add({title:"spellchecker.wait","class":"mceMenuItemTitle"}).setDisabled(1);i._sendRPC("getSuggestions",[i.selectedLang,k.decode(f.innerHTML)],function(m){var e;d.removeAll();if(m.length>0){d.add({title:"spellchecker.sug","class":"mceMenuItemTitle"}).setDisabled(1);c(m,function(n){d.add({title:n,onclick:function(){k.replace(h.getDoc().createTextNode(n),f);i._checkDone()}})});d.addSeparator()}else{d.add({title:"spellchecker.no_sug","class":"mceMenuItemTitle"}).setDisabled(1)}e=i.editor.getParam("spellchecker_enable_ignore_rpc","");d.add({title:"spellchecker.ignore_word",onclick:function(){var n=f.innerHTML;k.remove(f,1);i._checkDone();if(e){h.setProgressState(1);i._sendRPC("ignoreWord",[i.selectedLang,n],function(o){h.setProgressState(0)})}}});d.add({title:"spellchecker.ignore_words",onclick:function(){var n=f.innerHTML;i._removeWords(k.decode(n));i._checkDone();if(e){h.setProgressState(1);i._sendRPC("ignoreWords",[i.selectedLang,n],function(o){h.setProgressState(0)})}}});if(i.editor.getParam("spellchecker_enable_learn_rpc")){d.add({title:"spellchecker.learn_word",onclick:function(){var n=f.innerHTML;k.remove(f,1);i._checkDone();h.setProgressState(1);i._sendRPC("learnWord",[i.selectedLang,n],function(o){h.setProgressState(0)})}})}d.update()});h.selection.select(f);l=k.getPos(f);d.showMenu(l.x,l.y+f.offsetHeight-g.y);return tinymce.dom.Event.cancel(j)}else{d.hideMenu()}},_checkDone:function(){var e=this,d=e.editor,g=d.dom,f;c(g.select("span"),function(h){if(h&&g.hasClass(h,"mceItemHiddenSpellWord")){f=true;return false}});if(!f){e._done()}},_done:function(){var d=this,e=d.active;if(d.active){d.active=0;d._removeWords();if(d._menu){d._menu.hideMenu()}if(e){d.editor.nodeChanged()}}},_sendRPC:function(e,g,d){var f=this;a.sendRPC({url:f.rpcUrl,method:e,params:g,success:d,error:function(i,h){f.editor.setProgressState(0);f.editor.windowManager.alert(i.errstr||("Error response: "+h.responseText))}})}});tinymce.PluginManager.add("spellchecker",tinymce.plugins.SpellcheckerPlugin)})();(function(){var c=tinymce.DOM,a=tinymce.dom.Event,d=tinymce.each,b=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(f,g){function e(i,j){if(j.keyCode===9){return a.cancel(j)}}function h(l,p){var j,m,o,n,k;function q(i){n=c.select(":input:enabled,*[tabindex=0]");d(n,function(s,r){if(s.id==l.id){j=r;return false}});if(i>0){for(m=j+1;m<n.length;m++){if(n[m].type!="hidden"&&n[m].tabIndex!="-1"){return n[m]}}}else{for(m=j-1;m>=0;m--){if(n[m].type!="hidden"&&n[m].tabIndex!="-1"){return n[m]}}}return null}if(p.keyCode===9){k=b(l.getParam("tab_focus",l.getParam("tabfocus_elements",":prev,:next")));if(k.length==1){k[1]=k[0];k[0]=":prev"}if(p.shiftKey){if(k[0]==":prev"){n=q(-1)}else{n=c.get(k[0])}}else{if(k[1]==":next"){n=q(1)}else{n=c.get(k[1])}}if(n){if(n.id&&(l=tinymce.get(n.id||n.name))){l.focus()}else{window.setTimeout(function(){if(!tinymce.isWebKit){window.focus()}n.focus()},10)}return a.cancel(p)}}}f.onKeyUp.add(e);if(tinymce.isGecko){f.onKeyPress.add(h);f.onKeyDown.add(e)}else{f.onKeyDown.add(h)}},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)})();(function(){tinymce.create("tinymce.plugins.AutoResizePlugin",{init:function(a,b){var d=this;if(a.getParam("fullscreen_is_enabled")){return}function c(){var i=a.getDoc(),e=i.body,j=i.documentElement,g=tinymce.DOM,h=d.autoresize_min_height,f;f=tinymce.isIE?e.scrollHeight:j.offsetHeight;if(f>d.autoresize_min_height){h=f}g.setStyle(g.get(a.id+"_ifr"),"height",h+"px");if(d.throbbing){a.setProgressState(false);a.setProgressState(true)}}d.editor=a;d.autoresize_min_height=a.getElement().offsetHeight;a.onChange.add(c);a.onSetContent.add(c);a.onPaste.add(c);a.onKeyUp.add(c);a.onPostRender.add(c);if(a.getParam("autoresize_on_init",true)){a.onInit.add(function(f,e){f.setProgressState(true);d.throbbing=true;f.getBody().style.overflowY="hidden"});a.onLoadContent.add(function(f,e){c();setTimeout(function(){c();f.setProgressState(false);d.throbbing=false},1250)})}a.addCommand("mceAutoResize",c)},getInfo:function(){return{longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("autoresize",tinymce.plugins.AutoResizePlugin)})();(function(){tinymce.create("tinymce.plugins.WordCount",{block:0,id:null,countre:null,cleanre:null,init:function(a,b){var c=this,d=0;c.countre=a.getParam("wordcount_countregex",/\S\s+/g);c.cleanre=a.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$'"_+=\\\/-]*/g);c.id=a.id+"-word-count";a.onPostRender.add(function(f,e){var g,h;h=f.getParam("wordcount_target_id");if(!h){g=tinymce.DOM.get(f.id+"_path_row");if(g){tinymce.DOM.add(g.parentNode,"div",{style:"float: right"},f.getLang("wordcount.words","Words: ")+'<span id="'+c.id+'">0</span>')}}else{tinymce.DOM.add(h,"span",{},'<span id="'+c.id+'">0</span>')}});a.onInit.add(function(e){e.selection.onSetContent.add(function(){c._count(e)});c._count(e)});a.onSetContent.add(function(e){c._count(e)});a.onKeyUp.add(function(f,g){if(g.keyCode==d){return}if(13==g.keyCode||8==d||46==d){c._count(f)}d=g.keyCode})},_count:function(b){var c=this,a=0;if(c.block){return}c.block=1;setTimeout(function(){var d=b.getContent({format:"raw"});if(d){d=d.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ");d=d.replace(c.cleanre,"");d.replace(c.countre,function(){a++})}tinymce.DOM.setHTML(c.id,a.toString());setTimeout(function(){c.block=0},2000)},1)},getInfo:function(){return{longname:"Word Count plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/wordcount",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("wordcount",tinymce.plugins.WordCount)})();tinyMCE.addI18n('en.advanced',{
style_select:"Styles",
font_size:"Font size",
fontdefault:"Font family",
block:"Format",
paragraph:"Paragraph",
div:"Div",
address:"Address",
pre:"Preformatted",
h1:"Heading 1",
h2:"Heading 2",
h3:"Heading 3",
h4:"Heading 4",
h5:"Heading 5",
h6:"Heading 6",
blockquote:"Blockquote",
code:"Code",
samp:"Code sample",
dt:"Definition term ",
dd:"Definition description",
bold_desc:"Bold (Ctrl+B)",
italic_desc:"Italic (Ctrl+I)",
underline_desc:"Underline (Ctrl+U)",
striketrough_desc:"Strikethrough",
justifyleft_desc:"Align left",
justifycenter_desc:"Align center",
justifyright_desc:"Align right",
justifyfull_desc:"Align full",
bullist_desc:"Unordered list",
numlist_desc:"Ordered list",
outdent_desc:"Outdent",
indent_desc:"Indent",
undo_desc:"Undo (Ctrl+Z)",
redo_desc:"Redo (Ctrl+Y)",
link_desc:"Insert/edit link",
unlink_desc:"Unlink",
image_desc:"Insert/edit image",
cleanup_desc:"Cleanup messy code",
code_desc:"Edit HTML Source",
sub_desc:"Subscript",
sup_desc:"Superscript",
hr_desc:"Insert horizontal ruler",
removeformat_desc:"Remove formatting",
custom1_desc:"Your custom description here",
forecolor_desc:"Select text color",
backcolor_desc:"Select background color",
charmap_desc:"Insert custom character",
visualaid_desc:"Toggle guidelines/invisible elements",
anchor_desc:"Insert/edit anchor",
cut_desc:"Cut",
copy_desc:"Copy",
paste_desc:"Paste",
image_props_desc:"Image properties",
newdocument_desc:"New document",
help_desc:"Help",
blockquote_desc:"Blockquote",
clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\r\nDo you want more information about this issue?",
path:"Path",
newdocument:"Are you sure you want clear all contents?",
toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",
more_colors:"More colors",

// Accessibility Strings
shortcuts_desc:'Accessibility Help',
help_shortcut:'. Press ALT 0 for help.',
rich_text_area:"Rich Text Area",
toolbar:"Toolbar"
});
(function(c){var e=c.DOM,b=c.dom.Event,g=c.extend,f=c.each,a=c.util.Cookie,h,d=c.explode;c.ThemeManager.requireLangPack("advanced");c.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],shortcuts:["shortcuts_desc","mceShortcuts"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(j,k){var l=this,m,i,n;l.editor=j;l.url=k;l.onResolveName=new c.util.Dispatcher(this);j.forcedHighContrastMode=l._isHighContrast();j.settings.skin=j.forcedHighContrastMode?"highcontrast":j.settings.skin;l.settings=m=g({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:j.settings.readonly},j.settings);if(!m.font_size_style_values){m.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"}if(c.is(m.theme_advanced_font_sizes,"string")){m.font_size_style_values=c.explode(m.font_size_style_values);m.font_size_classes=c.explode(m.font_size_classes||"");n={};j.settings.theme_advanced_font_sizes=m.theme_advanced_font_sizes;f(j.getParam("theme_advanced_font_sizes","","hash"),function(q,p){var o;if(p==q&&q>=1&&q<=7){p=q+" ("+l.sizes[q-1]+"pt)";o=m.font_size_classes[q-1];q=m.font_size_style_values[q-1]||(l.sizes[q-1]+"pt")}if(/^\s*\./.test(q)){o=q.replace(/\./g,"")}n[p]=o?{"class":o}:{fontSize:q}});m.theme_advanced_font_sizes=n}if((i=m.theme_advanced_path_location)&&i!="none"){m.theme_advanced_statusbar_location=m.theme_advanced_path_location}if(m.theme_advanced_statusbar_location=="none"){m.theme_advanced_statusbar_location=0}j.onInit.add(function(){if(!j.settings.readonly){j.onNodeChange.add(l._nodeChanged,l);j.onKeyUp.add(l._updateUndoStatus,l);j.onMouseUp.add(l._updateUndoStatus,l);j.dom.bind(j.dom.getRoot(),"dragend",function(){l._updateUndoStatus(j)})}if(j.settings.content_css!==false){j.dom.loadCSS(j.baseURI.toAbsolute(k+"/skins/"+j.settings.skin+"/content.css"))}});j.onSetProgressState.add(function(q,o,r){var s,t=q.id,p;if(o){l.progressTimer=setTimeout(function(){s=q.getContainer();s=s.insertBefore(e.create("DIV",{style:"position:relative"}),s.firstChild);p=e.get(q.id+"_tbl");e.add(s,"div",{id:t+"_blocker","class":"mceBlocker",style:{width:p.clientWidth+2,height:p.clientHeight+2}});e.add(s,"div",{id:t+"_progress","class":"mceProgress",style:{left:p.clientWidth/2,top:p.clientHeight/2}})},r||0)}else{e.remove(t+"_blocker");e.remove(t+"_progress");clearTimeout(l.progressTimer)}});e.loadCSS(m.editor_css?j.documentBaseURI.toAbsolute(m.editor_css):k+"/skins/"+j.settings.skin+"/ui.css");if(m.skin_variant){e.loadCSS(k+"/skins/"+j.settings.skin+"/ui_"+m.skin_variant+".css")}},_isHighContrast:function(){var i,j=e.add(e.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});i=(e.getStyle(j,"background-color",true)+"").replace(/ /g,"");e.remove(j);return i!="rgb(171,239,86)"},createControl:function(l,i){var j,k;if(k=i.createControl(l)){return k}switch(l){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((j=this.controls[l])){return i.createButton(l,{title:"advanced."+j[0],cmd:j[1],ui:j[2],value:j[3]})}},execCommand:function(k,j,l){var i=this["_"+k];if(i){i.call(this,j,l);return true}return false},_importClasses:function(k){var i=this.editor,j=i.controlManager.get("styleselect");if(j.getLength()==0){f(i.dom.getClasses(),function(n,l){var m="style_"+l;i.formatter.register(m,{inline:"span",attributes:{"class":n["class"]},selector:"*"});j.add(n["class"],m)})}},_createStyleSelect:function(m){var k=this,i=k.editor,j=i.controlManager,l;l=j.createListBox("styleselect",{title:"advanced.style_select",onselect:function(o){var p,n=[];f(l.items,function(q){n.push(q.value)});i.focus();i.undoManager.add();p=i.formatter.matchAll(n);if(!o||p[0]==o){i.formatter.remove(p[0])}else{i.formatter.apply(o)}i.undoManager.add();i.nodeChanged();return false}});i.onInit.add(function(){var n=0,o=i.getParam("style_formats");if(o){f(o,function(p){var q,r=0;f(p,function(){r++});if(r>1){q=p.name=p.name||"style_"+(n++);i.formatter.register(q,p);l.add(p.title,q)}else{l.add(p.title)}})}else{f(i.getParam("theme_advanced_styles","","hash"),function(r,q){var p;if(r){p="style_"+(n++);i.formatter.register(p,{inline:"span",classes:r,selector:"*"});l.add(k.editor.translate(q),p)}})}});if(l.getLength()==0){l.onPostRender.add(function(o,p){if(!l.NativeListBox){b.add(p.id+"_text","focus",k._importClasses,k);b.add(p.id+"_text","mousedown",k._importClasses,k);b.add(p.id+"_open","focus",k._importClasses,k);b.add(p.id+"_open","mousedown",k._importClasses,k)}else{b.add(p.id,"focus",k._importClasses,k)}})}return l},_createFontSelect:function(){var k,j=this,i=j.editor;k=i.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(l){var m=k.items[k.selectedIndex];if(!l&&m){i.execCommand("FontName",false,m.value);return}i.execCommand("FontName",false,l);k.select(function(n){return l==n});return false}});if(k){f(i.getParam("theme_advanced_fonts",j.settings.theme_advanced_fonts,"hash"),function(m,l){k.add(i.translate(l),m,{style:m.indexOf("dings")==-1?"font-family:"+m:""})})}return k},_createFontSizeSelect:function(){var m=this,k=m.editor,n,l=0,j=[];n=k.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(i){var o=n.items[n.selectedIndex];if(!i&&o){o=o.value;if(o["class"]){k.formatter.toggle("fontsize_class",{value:o["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,o.fontSize)}return}if(i["class"]){k.focus();k.undoManager.add();k.formatter.toggle("fontsize_class",{value:i["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,i.fontSize)}n.select(function(p){return i==p});return false}});if(n){f(m.settings.theme_advanced_font_sizes,function(o,i){var p=o.fontSize;if(p>=1&&p<=7){p=m.sizes[parseInt(p)-1]+"pt"}n.add(i,o,{style:"font-size:"+p,"class":"mceFontSize"+(l++)+(" "+(o["class"]||""))})})}return n},_createBlockFormats:function(){var k,i={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},j=this;k=j.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"});if(k){f(j.editor.getParam("theme_advanced_blockformats",j.settings.theme_advanced_blockformats,"hash"),function(m,l){k.add(j.editor.translate(l!=m?l:i[m]),m,{"class":"mce_formatPreview mce_"+m})})}return k},_createForeColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(n){m.setColor(n)}})}}if(i=k.theme_advanced_text_colors){l.colors=i}if(k.theme_advanced_default_foreground_color){l.default_color=k.theme_advanced_default_foreground_color}l.title="advanced.forecolor_desc";l.cmd="ForeColor";l.scope=this;m=j.editor.controlManager.createColorSplitButton("forecolor",l);return m},_createBackColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(n){m.setColor(n)}})}}if(i=k.theme_advanced_background_colors){l.colors=i}if(k.theme_advanced_default_background_color){l.default_color=k.theme_advanced_default_background_color}l.title="advanced.backcolor_desc";l.cmd="HiliteColor";l.scope=this;m=j.editor.controlManager.createColorSplitButton("backcolor",l);return m},renderUI:function(l){var m,k,q,v=this,r=v.editor,w=v.settings,u,j,i;if(r.settings){r.settings.aria_label=w.aria_label+r.getLang("advanced.help_shortcut")}m=j=e.create("span",{role:"application","aria-labelledby":r.id+"_voice",id:r.id+"_parent","class":"mceEditor "+r.settings.skin+"Skin"+(w.skin_variant?" "+r.settings.skin+"Skin"+v._ufirst(w.skin_variant):"")});e.add(m,"span",{"class":"mceVoiceLabel",style:"display:none;",id:r.id+"_voice"},w.aria_label);if(!e.boxModel){m=e.add(m,"div",{"class":"mceOldBoxModel"})}m=u=e.add(m,"table",{id:r.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0,role:"presentation"});m=q=e.add(m,"tbody");switch((w.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":k=v._rowLayout(w,q,l);break;case"customlayout":k=r.execCallback("theme_advanced_custom_layout",w,q,l,j);break;default:k=v._simpleLayout(w,q,l,j)}m=l.targetNode;i=e.stdMode?u.getElementsByTagName("tr"):u.rows;e.addClass(i[0],"mceFirst");e.addClass(i[i.length-1],"mceLast");f(e.select("tr",q),function(o){e.addClass(o.firstChild,"mceFirst");e.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(e.get(w.theme_advanced_toolbar_container)){e.get(w.theme_advanced_toolbar_container).appendChild(j)}else{e.insertAfter(j,m)}b.add(r.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){v._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return b.cancel(n)}});if(w.theme_advanced_toolbar_location=="external"){l.deltaHeight=0}v.deltaHeight=l.deltaHeight;l.targetNode=null;r.onKeyDown.add(function(p,n){var s=121,o=122;if(n.altKey){if(n.keyCode===s){v.toolbarGroup.focus();return b.cancel(n)}else{if(n.keyCode===o){e.get(p.id+"_path_row").focus();return b.cancel(n)}}}});r.addShortcut("alt+0","","mceShortcuts",v);return{iframeContainer:k,editorContainer:r.id+"_parent",sizeContainer:u,deltaHeight:l.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:c.majorVersion+"."+c.minorVersion}},resizeBy:function(i,j){var k=e.get(this.editor.id+"_tbl");this.resizeTo(k.clientWidth+i,k.clientHeight+j)},resizeTo:function(i,m,k){var j=this.editor,l=this.settings,n=e.get(j.id+"_tbl"),o=e.get(j.id+"_ifr");i=Math.max(l.theme_advanced_resizing_min_width||100,i);m=Math.max(l.theme_advanced_resizing_min_height||100,m);i=Math.min(l.theme_advanced_resizing_max_width||65535,i);m=Math.min(l.theme_advanced_resizing_max_height||65535,m);e.setStyle(n,"height","");e.setStyle(o,"height",m);if(l.theme_advanced_resize_horizontal){e.setStyle(n,"width","");e.setStyle(o,"width",i);if(i<n.clientWidth){i=n.clientWidth;e.setStyle(o,"width",n.clientWidth)}}if(k&&l.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+j.id+"_size",{cw:i,ch:m})}},destroy:function(){var i=this.editor.id;b.clear(i+"_resize");b.clear(i+"_path_row");b.clear(i+"_external_close")},_simpleLayout:function(y,r,k,i){var x=this,u=x.editor,v=y.theme_advanced_toolbar_location,m=y.theme_advanced_statusbar_location,l,j,q,w;if(y.readonly){l=e.add(r,"tr",{role:"presentation"});l=j=e.add(l,"td",{"class":"mceIframeContainer",role:"presentation"});return j}if(v=="top"){x._addToolbars(r,k)}if(v=="external"){l=w=e.create("div",{style:"position:relative"});l=e.add(l,"div",{id:u.id+"_external","class":"mceExternalToolbar"});e.add(l,"a",{id:u.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});l=e.add(l,"table",{id:u.id+"_tblext",cellSpacing:0,cellPadding:0});q=e.add(l,"tbody");if(i.firstChild.className=="mceOldBoxModel"){i.firstChild.appendChild(w)}else{i.insertBefore(w,i.firstChild)}x._addToolbars(q,k);u.onMouseUp.add(function(){var o=e.get(u.id+"_external");e.show(o);e.hide(h);var n=b.add(u.id+"_external_close","click",function(){e.hide(u.id+"_external");b.remove(u.id+"_external_close","click",n)});e.show(o);e.setStyle(o,"top",0-e.getRect(u.id+"_tblext").h-1);e.hide(o);e.show(o);o.style.filter="";h=u.id+"_external";o=null})}if(m=="top"){x._addStatusBar(r,k)}if(!y.theme_advanced_toolbar_container){l=e.add(r,"tr",{role:"presentation"});l=j=e.add(l,"td",{"class":"mceIframeContainer",role:"presentation"})}if(v=="bottom"){x._addToolbars(r,k)}if(m=="bottom"){x._addStatusBar(r,k)}return j},_rowLayout:function(x,m,k){var v=this,p=v.editor,u,w,i=p.controlManager,l,j,r,q;u=x.theme_advanced_containers_default_class||"";w=x.theme_advanced_containers_default_align||"center";f(d(x.theme_advanced_containers||""),function(s,o){var n=x["theme_advanced_container_"+s]||"";switch(n.toLowerCase()){case"mceeditor":l=e.add(m,"tr",{role:"presentation"});l=j=e.add(l,"td",{"class":"mceIframeContainer",role:"presentation"});break;case"mceelementpath":v._addStatusBar(m,k);break;default:q=(x["theme_advanced_container_"+s+"_align"]||w).toLowerCase();q="mce"+v._ufirst(q);l=e.add(e.add(m,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+(x["theme_advanced_container_"+s+"_class"]||u)+" "+q||w,role:"presentation"});r=i.createToolbar("toolbar"+o);v._addControls(n,r);e.setHTML(l,r.renderHTML());k.deltaHeight-=x.theme_advanced_row_height}});return j},_addControls:function(j,i){var k=this,l=k.settings,m,n=k.editor.controlManager;if(l.theme_advanced_disable&&!k._disabled){m={};f(d(l.theme_advanced_disable),function(o){m[o]=1});k._disabled=m}else{m=k._disabled}f(d(j),function(p){var o;if(m&&m[p]){return}if(p=="tablecontrols"){f(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(q){q=k.createControl(q,n);if(q){i.add(q)}});return}o=k.createControl(p,n);if(o){i.add(o)}})},_addToolbars:function(w,k){var z=this,p,m,q=z.editor,A=z.settings,y,j=q.controlManager,r,l,x,u;u=j.createToolbarGroup("toolbargroup",{name:q.getLang("advanced.toolbar"),tab_focus_toolbar:q.getParam("theme_advanced_tab_focus_toolbar")});z.toolbarGroup=u;x=A.theme_advanced_toolbar_align.toLowerCase();x="mce"+z._ufirst(x);l=e.add(e.add(w,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+x,role:"presentation"});for(p=1;(y=A["theme_advanced_buttons"+p]);p++){m=j.createToolbar("toolbar"+p,{"class":"mceToolbarRow"+p});if(A["theme_advanced_buttons"+p+"_add"]){y+=","+A["theme_advanced_buttons"+p+"_add"]}if(A["theme_advanced_buttons"+p+"_add_before"]){y=A["theme_advanced_buttons"+p+"_add_before"]+","+y}z._addControls(y,m);u.add(m);k.deltaHeight-=A.theme_advanced_row_height}e.setHTML(l,u.renderHTML())},_addStatusBar:function(m,j){var k,v=this,p=v.editor,w=v.settings,i,q,u,l;k=e.add(m,"tr",{role:"presentation"});k=l=e.add(k,"td",{"class":"mceStatusbar",role:"presentation"});k=e.add(k,"div",{id:p.id+"_path_row",role:"group","aria-labelledby":p.id+"_path_voice"});if(w.theme_advanced_path){e.add(k,"span",{id:p.id+"_path_voice"},p.translate("advanced.path"));e.add(k,"span",{},": ")}else{DOm.add(k,"span",{},"&#160;")}if(w.theme_advanced_resizing){e.add(l,"a",{id:p.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"});if(w.theme_advanced_resizing_use_cookie){p.onPostRender.add(function(){var n=a.getHash("TinyMCE_"+p.id+"_size"),r=e.get(p.id+"_tbl");if(!n){return}v.resizeTo(n.cw,n.ch)})}p.onPostRender.add(function(){b.add(p.id+"_resize","click",function(n){n.preventDefault()});b.add(p.id+"_resize","mousedown",function(D){var B,C,r,o,s,x,t,F,n,E,z;function y(G){G.preventDefault();n=t+(G.screenX-s);E=F+(G.screenY-x);v.resizeTo(n,E)}function A(G){b.remove(e.doc,"mousemove",B);b.remove(p.getDoc(),"mousemove",C);b.remove(e.doc,"mouseup",r);b.remove(p.getDoc(),"mouseup",o);n=t+(G.screenX-s);E=F+(G.screenY-x);v.resizeTo(n,E,true)}D.preventDefault();s=D.screenX;x=D.screenY;z=e.get(v.editor.id+"_ifr");t=n=z.clientWidth;F=E=z.clientHeight;B=b.add(e.doc,"mousemove",y);C=b.add(p.getDoc(),"mousemove",y);r=b.add(e.doc,"mouseup",A);o=b.add(p.getDoc(),"mouseup",A)})})}j.deltaHeight-=21;k=m=null},_updateUndoStatus:function(j){var i=j.controlManager;i.setDisabled("undo",!j.undoManager.hasUndo()&&!j.typing);i.setDisabled("redo",!j.undoManager.hasRedo())},_nodeChanged:function(l,u,C,q,D){var y=this,A,F=0,x,E,z=y.settings,w,j,r,B,m,k,i;c.each(y.stateControls,function(n){u.setActive(n,l.queryCommandState(y.controls[n][1]))});function o(n){var s,p=D.parents,t=n;if(typeof(n)=="string"){t=function(v){return v.nodeName==n}}for(s=0;s<p.length;s++){if(t(p[s])){return p[s]}}}u.setActive("visualaid",l.hasVisual);y._updateUndoStatus(l);u.setDisabled("outdent",!l.queryCommandState("Outdent"));A=o("A");if(E=u.get("link")){if(!A||!A.name){E.setDisabled(!A&&q);E.setActive(!!A)}}if(E=u.get("unlink")){E.setDisabled(!A&&q);E.setActive(!!A&&!A.name)}if(E=u.get("anchor")){E.setActive(!!A&&A.name)}A=o("IMG");if(E=u.get("image")){E.setActive(!!A&&C.className.indexOf("mceItem")==-1)}if(E=u.get("styleselect")){y._importClasses();k=[];f(E.items,function(n){k.push(n.value)});i=l.formatter.matchAll(k);E.select(i[0])}if(E=u.get("formatselect")){A=o(e.isBlock);if(A){E.select(A.nodeName.toLowerCase())}}o(function(p){if(p.nodeName==="SPAN"){if(!w&&p.className){w=p.className}}if(l.dom.is(p,z.theme_advanced_font_selector)){if(!j&&p.style.fontSize){j=p.style.fontSize}if(!r&&p.style.fontFamily){r=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()}if(!B&&p.style.color){B=p.style.color}if(!m&&p.style.backgroundColor){m=p.style.backgroundColor}}return false});if(E=u.get("fontselect")){E.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==r})}if(E=u.get("fontsizeselect")){if(z.theme_advanced_runtime_fontsize&&!j&&!w){j=l.dom.getStyle(C,"fontSize",true)}E.select(function(n){if(n.fontSize&&n.fontSize===j){return true}if(n["class"]&&n["class"]===w){return true}})}if(z.theme_advanced_show_current_color){function G(n,p){if(E=u.get(n)){if(!p){p=E.settings.default_color}if(p!==E.value){E.displayColor(p)}}}G("forecolor",B);G("backcolor",m)}if(z.theme_advanced_path&&z.theme_advanced_statusbar_location){A=e.get(l.id+"_path")||e.add(l.id+"_path_row","span",{id:l.id+"_path",role:"presentation"});if(y.statusKeyboardNavigation){y.statusKeyboardNavigation.destroy();y.statusKeyboardNavigation=null}e.setHTML(A,"");o(function(H){var p=H.nodeName.toLowerCase(),s,v,t="";if(H.nodeType!=1||H.nodeName==="BR"||(e.hasClass(H,"mceItemHidden")||e.hasClass(H,"mceItemRemoved"))){return}if(x=e.getAttrib(H,"mce_name")){p=x}if(c.isIE&&H.scopeName!=="HTML"){p=H.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(x=e.getAttrib(H,"src")){t+="src: "+x+" "}break;case"a":if(x=e.getAttrib(H,"name")){t+="name: "+x+" ";p+="#"+x}if(x=e.getAttrib(H,"href")){t+="href: "+x+" "}break;case"font":if(x=e.getAttrib(H,"face")){t+="font: "+x+" "}if(x=e.getAttrib(H,"size")){t+="size: "+x+" "}if(x=e.getAttrib(H,"color")){t+="color: "+x+" "}break;case"span":if(x=e.getAttrib(H,"style")){t+="style: "+x+" "}break}if(x=e.getAttrib(H,"id")){t+="id: "+x+" "}if(x=H.className){x=x.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(x){t+="class: "+x+" ";if(e.isBlock(H)||p=="img"||p=="span"){p+="."+x}}}p=p.replace(/(html:)/g,"");p={name:p,node:H,title:t};y.onResolveName.dispatch(y,p);t=p.title;p=p.name;v=e.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:t,"class":"mcePath_"+(F++)},p);if(A.hasChildNodes()){A.insertBefore(e.create("span",{"aria-hidden":"true"}," \u00bb "),A.firstChild);A.insertBefore(v,A.firstChild)}else{A.appendChild(v)}},l.getBody());if(e.select("a",A).length>0){y.statusKeyboardNavigation=new c.ui.KeyboardNavigation({root:l.id+"_path_row",items:e.select("a",A),excludeFromTabOrder:true,onCancel:function(){l.focus()}},e)}}},_sel:function(i){this.editor.execCommand("mceSelectNodeDepth",false,i)},_mceInsertAnchor:function(k,j){var i=this.editor;i.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(i.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(i.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var i=this.editor;i.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(i.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(i.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var i=this.editor;i.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceShortcuts:function(){var i=this.editor;i.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(k,j){var i=this.editor;j=j||{};i.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(i.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(i.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:j.color,func:j.func,theme_url:this.url})},_mceCodeEditor:function(j,k){var i=this.editor;i.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(i.getParam("theme_advanced_source_editor_width",720)),height:parseInt(i.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(j,k){var i=this.editor;if(i.dom.getAttrib(i.selection.getNode(),"class").indexOf("mceItem")!=-1){return}i.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(i.getLang("advanced.image_delta_width",0)),height:275+parseInt(i.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(j,k){var i=this.editor;i.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(i.getLang("advanced.link_delta_width",0)),height:200+parseInt(i.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var i=this.editor;i.windowManager.confirm("advanced.newdocument",function(j){if(j){i.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var i=this;this._mceColorPicker(0,{color:i.fgColor,func:function(j){i.fgColor=j;i.editor.execCommand("ForeColor",false,j)}})},_mceBackColor:function(){var i=this;this._mceColorPicker(0,{color:i.bgColor,func:function(j){i.bgColor=j;i.editor.execCommand("HiliteColor",false,j)}})},_ufirst:function(i){return i.substring(0,1).toUpperCase()+i.substring(1)}});c.ThemeManager.add("advanced",c.themes.AdvancedTheme)}(tinymce));